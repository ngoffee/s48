%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: manual.dvi
%%Pages: 90
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Palatino-Roman Palatino-Italic Palatino-Bold Courier
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -f manual.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2001.05.30:1224
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (manual.dvi)
@start /Fa 103[50 15[50 10[50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 1[50 50 50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 50 50 33[{TeXBase1Encoding ReEncodeFont}
94 83.022 /Courier rf
%DVIPSBitmapFont: Fb cmr7 7 3
/Fb 3 55 df<EB3F803801FFF03803E0F83807803C48487E001E7F003E1480A2003C1307
007C14C0A400FC14E0AE007C14C0A36CEB0F80A36CEB1F006C131E6C6C5A3803E0F86CB4
5A38003F801B277EA521>48 D<13381378EA01F8121F12FE12E01200B3AB487EB512F8A2
15267BA521>I<EB0FE0EB3FF8EBF81C3801E0063803C01F48485AEA0F005A121E003E13
1E91C7FC5AA21304EB3FC038FCFFF038FDC078EB003CB4133E48131E141FA2481480A412
7CA4003C1400123E001E131E143E6C133C6C6C5A3803C1F03801FFC06C6CC7FC19277DA5
21>54 D E
%EndDVIPSBitmapFont
/Fc 133[42 46 43 69 47 50 27 35 33 46 50 45 48 73 24
46 19 24 48 46 28 40 51 37 46 42 7[55 55 1[60 65 51 44
55 65 50 65 69 79 51 60 1[28 69 63 46 51 64 59 51 65
12[42 42 42 42 3[28 41[50 50 2[{TeXBase1Encoding ReEncodeFont}56
83.022 /Palatino-Roman rf
%DVIPSBitmapFont: Fd cmmi8 8 2
/Fd 2 111 df<1307EB0F80EB1FC0A2EB0F80EB070090C7FCA9EA01E0EA07F8EA0E3CEA
1C3E123812301270EA607EEAE07C12C013FC485A120012015B12035BA21207EBC04014C0
120F13801381381F01801303EB0700EA0F06131EEA07F8EA01F0122E7EAC18>105
D<3907C007E0391FE03FF83918F8783E393879E01E39307B801F38707F00126013FEEAE0
FC12C05B00815C0001143E5BA20003147E157C5B15FC0007ECF8081618EBC00115F0000F
1538913803E0300180147016E0001F010113C015E390C7EAFF00000E143E251F7E9D2B>
110 D E
%EndDVIPSBitmapFont
/Fe 135[60 2[60 60 1[60 12[60 60 60 1[60 14[60 8[60 3[60
69[{TeXBase1Encoding ReEncodeFont}11 99.6264 /Courier
rf /Ff 134[55 50 83 55 61 33 44 39 61 61 55 61 89 33
61 33 33 61 55 39 50 61 44 61 50 8[66 100 3[61 72 1[61
83 1[100 61 78 1[39 1[83 55 61 83 72 1[78 7[50 1[50 50
50 50 50 50 50 2[25 33 42[61 2[{TeXBase1Encoding ReEncodeFont}52
99.6264 /Palatino-Bold rf
%DVIPSBitmapFont: Fg cmmi10 10.95 9
/Fg 9 119 df<EC1FF8903801FFFC010713F890381FF000EB3F8001FEC7FC485A485A48
5A120F485AA2485AA2485AA290B512C0B6FC150090C8FCA35AA7127E127F7EA26C7E000F
14703907C001F03903E003E03901F81F8039007FFE00EB0FF01E287CA625>15
D<121EEA7F80A2EAFFC0A4EA7F80A2EA1E000A0A798919>58 D<126012F8B4FCEA7FC0EA
1FF0EA07FCEA01FF38007FC0EB1FF0EB07FCEB01FF9038007FC0EC1FF0EC07FCEC01FF91
38007FC0ED1FF0ED07FCED01FF9238007FC0EE1FF0EE07FCEE01FF9338007FC0EF1FF0EF
07F8EF01FCA2EF07F8EF1FF0EF7FC0933801FF00EE07FCEE1FF0EE7FC04B48C7FCED07FC
ED1FF0ED7FC04A48C8FCEC07FCEC1FF0EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CAFC
EA07FCEA1FF0EA7FC048CBFC12FC1270363678B147>62 D<DC1FF81307923801FFFE030F
9038FF800E923A7FF007E01E4A48C7EAF03EDA03FCEC787EDA0FF0EC3CFCDA3FC0141F4A
48140F4AC8FC4948ED07F8EB07F849481503131F4A16F049481501495A13FF4890C913E0
5B1203485A19C0485AA2485A95C7FC123F5BA2127F5BA312FF5BA590CCFC183CA21838A2
1878187018F06C6C5E17014D5A003F5F6D15074DC7FC001F161E6C6C5D6D5D6C6C5D0003
4B5AD801FEEC07C06C6C4AC8FCD97FC0137E90391FF803F80107B512E001011480902600
1FF8C9FC40427BBF41>67 D<49B56C49B512F81BF0A290C76D9039000FFE004AEE03F070
5D735A03DF150302037F038F5E82190791380787FC030793C7FC1503705C140F91260E01
FF140EA26F151E021E80021C017F141C83193C023C6D7E02381638161F71137814780270
6D6C1370A2040714F002F0804A01035C8318010101EC01FF4A5E82188313034A91387FC3
80A2EF3FC7010716E791C8001F90C8FC18F718FF4981010E5E1707A2131E011C6F5AA201
3C1501137C01FE6F5AEA03FFB512FC187818704D3E7DBD49>78 D<163EEEFFC0923803E1
E0923807C0F0ED0F811687ED1F8F160F153FA217E092387E038093C7FCA45DA514015DA3
0103B512FCA390260003F0C7FCA314075DA4140F5DA5141F5DA4143F92C8FCA45C147EA4
14FE5CA413015CA4495AA35CEA1E07127F5C12FF495AA200FE90C9FCEAF81EEA703EEA78
78EA1FF0EA07C02C537CBF2D>102 D<143C14FEA21301A314FCEB00701400AD137E3801
FF803803C7C0EA0703000F13E0120E121C13071238A2EA780F007013C0A2EAF01F148012
00133F14005B137EA213FE5BA212015B0003130E13F0A20007131EEBE01CA2143CEBC038
1478147014E013C13803E3C03801FF00EA007C173E7EBC1F>105
D<01F8EB0FF0D803FEEB3FFC3A078F80F03E3A0F0F83C01F3B0E07C7800F80001CEBCF00
02FE80003C5B00385B495A127800705BA200F049131F011F5D00005BA2163F013F92C7FC
91C7FC5E167E5B017E14FE5EA201FE0101EB03804914F8A203031307000103F013005B17
0E16E000035E49153C17385F0007913801F1E0496DB45AD801C0023FC7FC31297EA737>
110 D<017E147848B4EB01FC2603C7C013FED807031303000F13E0120E121C0107130100
381400167ED8780F143E00705B161EEAF01F4A131C1200133F91C7123C16385B137E1678
01FE14705B16F016E0120149EB01C0A2ED0380A2ED0700A20000140E5D6D133C017C5B6D
5B90381F03C0903807FF80D901FCC7FC27297EA72C>118 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fh cmr10 10.95 6
/Fh 6 62 df<EB01FE90380FFFC090383F03F090387C00F849137C48487F48487F4848EB
0F80A2000F15C04848EB07E0A3003F15F0A290C712034815F8A64815FCB3A26C15F8A56C
6CEB07F0A3001F15E0A36C6CEB0FC0A26C6CEB1F80000315006C6C133E6C6C5B017C5B90
383F03F090380FFFC0D901FEC7FC263F7DBC2D>48 D<EB01C013031307131F137FEA07FF
B5FC139FEAF81F1200B3B3ACEB7FF0B612F8A31D3D78BC2D>I<EB07FC90383FFF8090B5
12E03903F01FF83907C007FC390F0001FE001E6D7E001C1580003CEC7FC05AED3FE01270
B4FC6DEB1FF07FA56C5A6CC7FC120CC813E0153FA216C0157F168015FF16004A5A5D4A5A
4A5A5D4A5A4A5A4AC7FC147E147C5C495A495A495A495A49C71270133E133C5B4914E048
5A485A485A48C7120148B6FCA25A4815C0B7FCA3243D7CBC2D>I<00061403D80780131F
01F813FE90B5FC5D5D5D15C092C7FC14FCEB3FE090C9FCACEB01FE90380FFF8090383E03
E090387001F8496C7E49137E497F90C713800006141FC813C0A216E0150FA316F0A3120C
127F7F12FFA416E090C7121F12FC007015C012780038EC3F80123C6CEC7F00001F14FE6C
6C485A6C6C485A3903F80FE0C6B55A013F90C7FCEB07F8243F7CBC2D>53
D<EB03FCEB1FFF90387E07C09038FC03F048486C7E48486C7E4848137C000F147E484813
7F81003F15805B007F15C0A2151F12FF16E0A516F0A5127F153FA36C7EA2001F147F120F
6C6C13FF6D13DF000313013900F8039F90387E0F1FD91FFE13E0EB07F090C7FCA2ED3FC0
A41680157FD80F801400487E486C13FEA24A5A5D49485AEB8007391E000FE0001F495A26
0FC07FC7FC3803FFFE6C13F838003FC0243F7CBC2D>57 D<007FB912E0BA12F0A26C18E0
CDFCAE007FB912E0BA12F0A26C18E03C167BA147>61 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fi cmsy8 8 1
/Fi 1 4 df<130C131EA50060EB01800078130739FC0C0FC0007FEB3F80393F8C7F0038
07CCF83801FFE038007F80011EC7FCEB7F803801FFE03807CCF8383F8C7F397F0C3F8000
FCEB0FC039781E078000601301000090C7FCA5130C1A1D7C9E23>3
D E
%EndDVIPSBitmapFont
/Fj 147[72 72 1[72 2[72 72 3[72 19[72 41[72 35[{
TeXBase1Encoding ReEncodeFont}8 119.552 /Courier rf
%DVIPSBitmapFont: Fk cmsy10 10.95 10
/Fk 10 107 df<007FB812F8B912FCA26C17F83604789847>0 D<EB0FFCEB3FFF90B512
C0000314F04880488048804880A2481580A3B712C0AA6C1580A36C1500A26C5C6C5C6C5C
6C5CC614C0013F90C7FCEB0FFC22227BA72D>15 D<1818187CEF01FCEF07F8EF1FF0EF7F
C0933801FF00EE07FCEE1FF0EE7FC04B48C7FCED07FCED1FF0ED7FC04A48C8FCEC07FCEC
1FF0EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CAFCEA07FCEA1FF0EA7FC048CBFC5AEA
7F80EA3FE0EA0FF8EA03FEC66C7EEB3FE0EB0FF8EB03FE903800FF80EC3FE0EC0FF8EC03
FE913800FF80ED3FE0ED0FF8ED03FE923800FF80EE3FE0EE0FF8EE03FE933800FF80EF3F
E0EF0FF8EF03FC170018381800AE007FB812F8B912FCA26C17F8364878B947>20
D<19301978A2197C193CA2193E191EA2191F737EA2737E737EA2737E737E1A7C1A7EF21F
80F20FC0F207F0007FBB12FCBDFCA26C1AFCCDEA07F0F20FC0F21F80F27E001A7C624F5A
4F5AA24F5A4F5AA24FC7FC191EA2193E193CA2197C1978A2193050307BAE5B>33
D<EF01E0841700841878187C84A284727E727E851803727E007FB912FCBA7E856C85CCEA
07E0737EF101FCF1007FF21FC0F20FF8F203FFA2F20FF8F21FC0F27F00F101FCF103F04F
5A007FBA1280BBC7FC616C60CBEA01F04E5A1807614E5A4EC8FC183EA260187818F86017
016050327BAF5B>41 D<153FEC03FFEC0FE0EC3F80EC7E00495A5C495AA2495AB3AA130F
5C131F495A91C7FC13FEEA03F8EA7FE048C8FCEA7FE0EA03F8EA00FE133F806D7E130F80
1307B3AA6D7EA26D7E80EB007EEC3F80EC0FE0EC03FFEC003F205B7AC32D>102
D<12FCEAFFC0EA07F0EA01FCEA007E6D7E131F6D7EA26D7EB3AA801303806D7E1300147F
EC1FC0EC07FEEC00FFEC07FEEC1FC0EC7F0014FC1301495A5C13075CB3AA495AA2495A13
3F017EC7FC485AEA07F0EAFFC000FCC8FC205B7AC32D>I<146014F01301A214E01303A2
14C01307A2EB0F80A214005BA2131E133EA25BA2137813F8A25B1201A25B1203A2485AA2
5B120FA290C7FC5AA2123EA2123C127CA2127812F8A41278127CA2123C123EA27EA27E7F
A212077FA26C7EA212017FA212007FA21378137CA27FA2131E131FA27F1480A2EB07C0A2
130314E0A2130114F0A213001460145A77C323>I<126012F07EA21278127CA2123C123E
A27EA27E7FA212077FA26C7EA212017FA212007FA21378137CA27FA2131E131FA27F1480
A2EB07C0A2130314E0A2130114F0A414E01303A214C01307A2EB0F80A214005BA2131E13
3EA25BA2137813F8A25B1201A25B1203A2485AA25B120FA290C7FC5AA2123EA2123C127C
A2127812F8A25A1260145A7BC323>I<126012F0B3B3B3B3B11260045B76C319>I
E
%EndDVIPSBitmapFont
/Fl 134[66 60 100 66 73 40 53 47 73 73 66 73 106 40 73
1[40 73 66 47 60 73 53 73 60 11[93 80 73 86 100 73 100
1[120 73 2[47 100 1[66 73 100 86 80 93 7[60 60 60 60
60 60 60 60 60 60 35 30 40 42[73 2[{TeXBase1Encoding ReEncodeFont}55
119.552 /Palatino-Bold rf
%DVIPSBitmapFont: Fm cmr8 8 6
/Fm 6 58 df<EB3FC0EBFFF03803E07C48487E48487E497E001EEB0780A2003E14C0A248
EB03E0A500FC14F0B0007C14E0A3007E1307003E14C0A36CEB0F806C14006D5A3807C03E
3803F0FC3800FFF0EB3FC01C2D7DAB23>48 D<130C133C137CEA03FC12FFEAFC7C1200B3
B113FE387FFFFEA2172C7AAB23>I<EB7F803801FFF0380780FC380E003F48EB1F8048EB
0FC05A0060EB07E012F000FC14F07E1403A3007C1307C7FCA215E0140F15C0141F1580EC
3F00147E147C5C495A495A495A495A011EC7FC5B5B4913305B485A4848136048C7FC000E
14E0001FB5FC5A4814C0B6FCA21C2C7DAB23>I<140EA2141E143EA2147E14FEA2EB01BE
1303143E1306130E130C131813381330136013E013C0EA0180120313001206120E120C5A
123812305A12E0B612FCA2C7EA3E00A9147F90381FFFFCA21E2D7EAC23>52
D<000CEB0180380FC01F90B512005C5C14F014C0D80C7EC7FC90C8FCA8EB1FC0EB7FF838
0DE07C380F801F01001380000E130F000CEB07C0C713E0A2140315F0A4127812FCA448EB
07E012E0006014C00070130F6C14806CEB1F006C133E380780F83801FFE038007F801C2D
7DAB23>I<EB3F80EBFFF03803E0783807C03E48487E48487E003E14801407007E14C012
7C00FC14E01403A315F0A5007C1307127EA2003E130F7E6C131F3807803B3803E0F33800
FFC390383F03E013001407A215C0A2140F001E1480003F14005C143E143C003E5B001C5B
380E03E03807FF80D801FEC7FC1C2D7DAB23>57 D E
%EndDVIPSBitmapFont
/Fn 135[86 3[57 1[67 1[105 1[105 4[57 105 2[86 105 2[86
29[124 1[134 9[86 86 86 86 86 86 86 49[{TeXBase1Encoding ReEncodeFont}
19 172.188 /Palatino-Bold rf /Fo 103[55 15[55 10[55 55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 55 55 55 55 55 55 55 55 55 1[55 55 55 55 55 55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
55 33[{TeXBase1Encoding ReEncodeFont}94 90.9091 /Courier
rf /Fp 134[51 45 2[56 30 40 35 1[56 51 56 81 30 2[30
56 51 1[45 56 40 56 45 8[61 2[71 1[56 2[56 76 1[91 56
2[35 5[66 61 71 8[45 45 45 45 45 45 45 45 45 8[25 39[{
TeXBase1Encoding ReEncodeFont}40 90.9091 /Palatino-Bold
rf /Fq 134[115 103 172 1[126 69 92 80 1[126 115 126 184
69 126 1[69 126 115 1[103 126 92 126 103 8[138 2[161
1[126 2[126 172 1[207 126 2[80 5[149 138 161 8[103 3[103
12[57 39[{TeXBase1Encoding ReEncodeFont}35 206.559 /Palatino-Bold
rf /Fr 133[40 45 45 66 45 51 30 35 35 42 45 40 51 71
25 40 1[25 45 45 25 35 45 37 42 40 10[66 71 56 51 61
1[56 71 71 86 51 61 1[30 71 66 51 56 71 61 1[66 1[45
6[45 3[45 2[45 45 1[23 30 23 55 1[30 30 25 35[50 48 2[{
TeXBase1Encoding ReEncodeFont}58 90.9091 /Palatino-Italic
rf /Fs 94[25 9[91 45 1[45 45 24[45 51 47 76 51 55 30
39 36 51 55 50 53 80 26 51 21 26 53 51 30 44 56 40 50
45 25 2[30 1[30 1[61 61 91 66 71 56 48 61 71 55 71 76
86 56 66 30 31 76 69 51 56 70 64 56 71 68 2[55 1[23 23
45 45 45 45 45 45 45 45 45 45 55 23 30 23 55 35 30 30
25 35[55 55 2[{TeXBase1Encoding ReEncodeFont}84 90.9091
/Palatino-Roman rf /Ft 138[87 2[57 3[83 127 42 3[83 1[48
69 1[64 1[72 13[75 96 4[136 20[72 3[72 52[{
TeXBase1Encoding ReEncodeFont}15 143.462 /Palatino-Roman
rf /Fu 134[55 4[32 42 39 1[60 54 58 88 29 2[29 58 1[33
48 61 44 1[50 12[61 1[67 6[72 33 34 18[50 50 4[50 1[25
46[{TeXBase1Encoding ReEncodeFont}25 99.6264 /Palatino-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 1450 2426 a Fu(The)24 b(Incomplete)869 2609 y
Ft(Scheme)35 b(48)h(Refer)m(ence)e(Manual)1467 2792 y
Fu(for)25 b(r)n(elease)g(0.56)1040 3181 y(Richar)n(d)g(Kelsey)g(and)g
(Jonathan)g(Rees)1160 3297 y Fs(with)e(a)g(chapter)f(by)h(Mike)f
(Sperber)p eop
%%Page: 2 2
2 1 bop 393 573 a Fs(A)23 b(line)g(may)g(take)f(us)g(hours,)f(yet)h(if)
h(it)g(does)e(not)h(seem)f(a)j(moment's)d(thought)393
686 y(All)j(our)e(stitching)g(and)h(unstitching)e(has)i(been)f(as)h
(nought.)2091 898 y(Y)-8 b(eats)2091 1011 y Fr(Adam')j(s)24
b(Curse)1850 6071 y Fs(ii)p eop
%%Page: 3 3
3 2 bop 83 1237 a Fq(Acknowledgements)83 1699 y Fs(Thanks)40
b(to)f(Scheme)h(48's)i(users)d(for)h(their)g(suggestions,)h(bug)g(r)n
(eports,)i(and)d(forbearance.)83 1811 y(Thanks)22 b(also)h(to)f
(Deborah)g(T)-8 b(atar)23 b(for)g(pr)n(oviding)f(the)g(Y)-8
b(eats)21 b(quotation.)1753 6071 y(iii)p eop
%%Page: 4 4
4 3 bop 166 1241 a Fq(Contents)166 1784 y Fp(1)91 b(Introduction)2713
b(1)166 1995 y(2)91 b(User)5 b(')-5 b(s)25 b(guide)2720
b(2)302 2113 y Fs(2.1)96 b(Command)24 b(line)f(ar)n(guments)55
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)125 b(2)302 2230
y(2.2)96 b(Command)24 b(pr)n(ocessor)66 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)125 b(3)302 2347 y(2.3)96 b(Editing)62
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)125 b(3)302 2465 y(2.4)96 b(Performance)51
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)125 b(3)302 2582 y(2.5)96 b(Disassembler)26 b(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)125
b(4)302 2700 y(2.6)96 b(Module)22 b(system)78 b(.)46
b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)125
b(4)302 2817 y(2.7)96 b(Library)60 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)125 b(5)166
3028 y Fp(3)91 b(Command)21 b(processor)2389 b(7)302
3146 y Fs(3.1)96 b(Curr)n(ent)23 b(focus)f(value)h(and)g
Fo(##)72 b Fs(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)125 b(7)302
3263 y(3.2)96 b(Command)24 b(levels)87 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)125 b(8)302 3380 y(3.3)96
b(Logistical)23 b(commands)50 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)125 b(8)302 3498 y(3.4)96 b(Module)22 b(commands)55
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)125
b(9)302 3615 y(3.5)96 b(Debugging)22 b(commands)57 b(.)45
b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)125 b(9)302
3732 y(3.6)96 b(Switches)72 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(10)302 3850
y(3.7)96 b(Inspection)21 b(mode)28 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(12)302 3967 y(3.8)96
b(Command)24 b(pr)n(ograms)63 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)79 b(13)302 4084 y(3.9)96 b(Building)23 b(images)43
b(.)j(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(14)302 4202 y(3.10)51 b(Resour)n(ce)22 b(query)f(and)i(contr)n(ol)71
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(14)302 4319
y(3.1)-5 b(1)56 b(Thr)n(eads)33 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(15)302
4437 y(3.12)51 b(Quite)23 b(obscur)n(e)71 b(.)45 b(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(16)166 4648
y Fp(4)91 b(Module)22 b(system)2555 b(17)302 4765 y Fs(4.1)96
b(Intr)n(oduction)56 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)79 b(17)302 4883 y(4.2)96 b(The)22
b(con\002guration)g(language)67 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(18)302 5000 y(4.3)96 b(Interfaces)36 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(20)302
5117 y(4.4)96 b(Macr)n(os)66 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(21)302
5235 y(4.5)96 b(Higher)n(-or)n(der)22 b(modules)67 b(.)45
b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(21)302
5352 y(4.6)96 b(Compiling)24 b(and)f(linking)55 b(.)45
b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(21)302
5469 y(4.7)96 b(Semantics)23 b(of)g(con\002guration)f(mutation)53
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)79 b(22)302 5587 y(4.8)96 b(Command)24
b(pr)n(ocessor)d(support)66 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(23)302 5704 y(4.9)96 b(Con\002guration)23 b(packages)80
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(25)302
5822 y(4.10)51 b(Discussion)59 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(26)1837 6071
y(iv)p eop
%%Page: 5 5
5 4 bop 83 573 a Fp(5)91 b(Libraries)2821 b(28)219 687
y Fs(5.1)96 b(ASCII)22 b(character)i(encoding)77 b(.)45
b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(28)219 802 y(5.2)96
b(Bitwise)22 b(integer)f(operations)58 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)79 b(28)219 917 y(5.3)96 b(Byte)21 b(vectors)72
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)79 b(29)219 1031 y(5.4)96 b(Cells)24 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(29)219 1146 y(5.5)96 b(Queues)52 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(29)219
1260 y(5.6)96 b(Arrays)82 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(30)219 1375
y(5.7)96 b(Recor)n(ds)36 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(31)428 1490
y(5.7.1)110 b(Low-level)23 b(access)f(to)g(r)n(ecor)n(ds)65
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)79 b(32)428 1604 y(5.7.2)110 b(Recor)n(d)22
b(types)88 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(32)219 1719 y(5.8)96 b(Finite)23 b(r)n(ecor)n(d)f(types)85
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(34)219 1833 y(5.9)96 b(Hash)23 b(tables)j(.)45 b(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(35)219
1948 y(5.10)51 b(Port)22 b(extensions)82 b(.)46 b(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(36)219 2063
y(5.1)-5 b(1)56 b(Fluid)23 b(bindings)41 b(.)k(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(37)219 2177
y(5.12)51 b(Sockets)58 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(38)219 2292
y(5.13)51 b(Macr)n(os)23 b(for)g(writing)f(loops)45 b(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)79 b(39)428 2406 y(5.13.1)65
b Fo(Iterate)24 b Fs(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)79 b(39)428 2521 y(5.13.2)65 b Fo(Reduce)79
b Fs(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(40)428 2636 y(5.13.3)65 b(Sequence)21 b(types)63 b(.)45
b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(41)428
2750 y(5.13.4)65 b(Synchr)n(onous)21 b(sequences)67 b(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)79 b(42)428 2865 y(5.13.5)65 b(Examples)86
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(42)428 2979 y(5.13.6)65 b(De\002ning)23 b(sequence)e(types)38
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(43)428 3094 y(5.13.7)65
b(Expanded)21 b(code)59 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)79 b(44)219 3208 y(5.14)51 b(Regular)23 b(expr)n(essions)j(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(44)428 3323 y(5.14.1)65 b(Character)24 b(sets)45 b(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(45)428 3438 y(5.14.2)65
b(Anchoring)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)79 b(45)428 3552 y(5.14.3)65 b(Composite)22 b(expr)n(essions)j(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(46)428 3667 y(5.14.4)65
b(Case)23 b(sensitivity)52 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)79 b(46)428 3781 y(5.14.5)65 b(Submatches)23 b(and)f(matching)30
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)79 b(47)219 3896 y(5.15)51 b(SRFIs)61
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)79 b(48)83 4103 y Fp(6)91 b(Mixing)23
b(Scheme)g(48)h(and)e(C)68 b Fs(Mike)22 b(Sperber)f(and)i(Richar)n(d)g
(Kelsey)746 b Fp(50)219 4217 y Fs(6.1)96 b(A)-8 b(vailable)25
b(facilities)36 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)79 b(50)428 4332 y(6.1.1)110 b(Scheme)22 b(str)o(uctur)n(es)87
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(50)428 4446
y(6.1.2)110 b(C)24 b(naming)f(conventions)47 b(.)e(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)79 b(51)428 4561 y(6.1.3)110 b(Garbage)24 b(collection)70
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(51)219 4676
y(6.2)96 b(Shar)n(ed)23 b(bindings)43 b(.)j(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(51)428 4790 y(6.2.1)110
b(Exporting)21 b(Scheme)h(values)h(to)f(C)91 b(.)45 b(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(51)428 4905 y(6.2.2)110 b(Exporting)21 b(C)i(values)g(to)f(Scheme)90
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)79 b(51)428 5019 y(6.2.3)110 b(Complete)22
b(shar)n(ed)g(binding)h(interface)38 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(52)219
5134 y(6.3)96 b(Calling)25 b(C)e(functions)f(fr)n(om)i(Scheme)54
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)79 b(53)219 5249 y(6.4)96 b(Adding)22
b(external)g(modules)g(to)g(the)f Fo(Makefile)47 b Fs(.)f(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(53)219 5363 y(6.5)96 b(Dynamic)25 b(loading)72 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(54)219 5478 y(6.6)96 b(Compatibility)73 b(.)45 b(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(55)219 5592
y(6.7)96 b(Accessing)22 b(Scheme)g(data)h(fr)n(om)g(C)78
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(55)428 5707 y(6.7.1)110
b(Constants)75 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)79 b(55)428 5822 y(6.7.2)110 b(Converting)22 b(values)79
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(55)1767
6071 y(v)p eop
%%Page: 6 6
6 5 bop 511 573 a Fs(6.7.3)110 b(C)24 b(versions)d(of)i(Scheme)f(pr)n
(ocedur)n(es)32 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)79 b(56)302 686 y(6.8)96 b(Calling)25
b(Scheme)d(functions)g(fr)n(om)h(C)56 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(57)302 799 y(6.9)96 b(Interacting)22 b(with)h(the)f(Scheme)g(heap)36
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)79 b(58)511 912 y(6.9.1)110 b(Registering)21
b(objects)h(with)g(the)g(GC)29 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(58)511
1024 y(6.9.2)110 b(Keeping)22 b(C)h(data)g(str)o(uctur)n(es)e(in)i(the)
f(Scheme)g(heap)61 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(58)511 1137 y(6.9.3)110 b(C)24 b(code)d(and)i(heap)f(images)43
b(.)i(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(59)302 1250 y(6.10)51
b(Using)22 b(Scheme)g(r)n(ecor)n(ds)g(in)h(C)h(code)e(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)79 b(59)302 1363 y(6.1)-5 b(1)56
b(Raising)23 b(exceptions)e(fr)n(om)i(external)f(code)60
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)79 b(60)302 1476 y(6.12)51 b(Unsafe)23 b(functions)f(and)h
(macr)n(os)78 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(61)166
1680 y Fp(7)91 b(Access)25 b(to)d(POSIX)2505 b(63)302
1793 y Fs(7.1)96 b(Pr)n(ocess)22 b(primitives)33 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(63)511 1906 y(7.1.1)110 b(Pr)n(ocess)22 b(cr)n(eation)h(and)g
(termination)46 b(.)f(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)79 b(63)511 2019 y(7.1.2)110 b
Fo(Exec)53 b Fs(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)79 b(64)302 2132 y(7.2)96 b(Signals)72
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)79 b(65)511 2245 y(7.2.1)110 b(POSIX)22
b(signals)47 b(.)e(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(65)511 2357 y(7.2.2)110 b(Other)23 b(signals)78 b(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(66)511
2470 y(7.2.3)110 b(Sending)22 b(signals)50 b(.)45 b(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)79 b(66)511 2583 y(7.2.4)110 b(Receiving)23
b(signals)52 b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(66)302 2696 y(7.3)96 b(Pr)n(ocess)22 b(envir)n(onment)64
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(67)511 2809 y(7.3.1)110 b(Pr)n(ocess)22 b(identi\002cation)30
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(67)511 2922
y(7.3.2)110 b(Envir)n(onment)23 b(variables)40 b(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(68)302 3035 y(7.4)96
b(Users)21 b(and)i(gr)n(oups)58 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)79 b(68)302 3148 y(7.5)96 b(OS)23
b(and)g(machine)h(identi\002cation)k(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(69)302 3261 y(7.6)96 b(Files)23 b(and)f(dir)n(ectories)27
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(69)511 3374 y(7.6.1)110 b(Dir)n(ectory)23 b(str)n(eams)35
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(69)511
3487 y(7.6.2)110 b(W)-8 b(orking)22 b(dir)n(ectory)80
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(69)511 3599
y(7.6.3)110 b(File)23 b(cr)n(eation)g(and)g(r)n(emoval)69
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)79 b(69)511 3712 y(7.6.4)110
b(File)23 b(information)33 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)79 b(71)511 3825 y(7.6.5)110 b(File)23 b(modes)39
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(72)302 3938 y(7.7)96 b(T)-5 b(ime)90 b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(73)302 4051 y(7.8)96 b(I/O)66 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(74)302 4164 y(7.9)96 b(Regular)23 b(expr)n(essions)j(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79
b(75)302 4277 y(7.10)51 b(C)24 b(to)e(Scheme)g(corr)n(espondence)87
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)79 b(76)166 4481 y Fp(A)65
b(ASCII)23 b(character)i(encoding)2126 b(78)166 4685
y(B)75 b(Bibliography)2641 b(80)166 4888 y(C)70 b(Index)2956
b(81)1837 6071 y Fs(vi)p eop
%%Page: 1 7
1 6 bop 83 1196 a Fn(Chapter)44 b(1)83 1611 y Fq(Introduction)83
2056 y Fs(Scheme)26 b(48)i(is)f(an)h(implementation)e(of)h(the)f
(Scheme)h(pr)n(ogramming)g(language)f(as)h(described)83
2169 y(in)35 b(the)g(Revised)680 2136 y Fm(5)753 2169
y Fs(Report)e(on)i(the)f(Algorithmic)h(Language)f(Scheme)g([6)q(].)65
b(It)35 b(is)g(based)f(on)h(a)83 2281 y(compiler)25 b(and)g(interpr)n
(eter)e(for)h(a)h(virtual)h(Scheme)e(machine.)35 b(Scheme)25
b(48)g(tries)f(to)g(be)h(faithful)83 2394 y(to)34 b(the)g(Revised)679
2361 y Fm(5)753 2394 y Fs(Scheme)g(Report,)i(pr)n(oviding)f(neither)f
(mor)n(e)g(nor)h(less)f(in)h(the)f(initial)j(user)83
2507 y(envir)n(onment.)k(\(This)27 b(is)g(not)g(to)f(say)h(that)g(mor)n
(e)g(isn't)g(available)j(in)d(other)f(envir)n(onments;)i(see)83
2620 y(below)-8 b(.\))35 b(Support)24 b(for)h(numbers)f(is)i(weak:)32
b(bignums)25 b(ar)n(e)h(slow)f(and)g(\003oating)g(point)g(is)g(almost)
83 2733 y(nonexistent)20 b(\(see)i(description)f(of)i(\003oatnums,)f
(below\).)224 2846 y(Scheme)27 b(48)i(is)e(under)g(continual)h
(development.)41 b(Please)27 b(r)n(eport)f(bugs,)i(especially)g(in)g
(the)83 2959 y(VM,)k(especially)g(cor)n(e)g(dumps,)h(to)e
(scheme-48-bugs@zurich.ai.mit.edu.)57 b(Include)31 b(the)h(ver)n(-)83
3072 y(sion)e(number)g(x.yy)f(fr)n(om)i(the)e(\224W)-8
b(elcome)31 b(to)e(Scheme)h(48)h(x.yy\224)f(gr)n(eeting)f(message)f(in)
j(your)83 3185 y(bug)36 b(r)n(eport.)68 b(It)35 b(is)i(a)g(goal)f(of)g
(this)g(pr)n(oject)g(to)g(pr)n(oduce)f(a)i(bullet-pr)n(oof)f(system;)41
b(we)36 b(want)83 3298 y(no)k(bugs)f(and,)44 b(especially)-10
b(,)44 b(no)c(crashes.)79 b(\(Ther)n(e)39 b(ar)n(e)i(a)f(few)g(known)f
(bugs,)k(listed)c(in)i(the)83 3411 y Fo(doc/todo.txt)17
b Fs(\002le)23 b(that)f(comes)g(with)h(the)f(distribution.\))224
3523 y(Send)28 b(mail)i(to)e(scheme-48-r)n(equest@zurich.ai.mit.edu)g
(to)g(be)g(put)g(on)g(a)h(mailing)h(list)f(for)83 3636
y(announcements,)21 b(discussion,)g(bug)i(r)n(eports,)d(and)j(bug)f
(\002xes.)224 3749 y(The)27 b(name)h(`Scheme)g(48')h(commemorates)e
(our)g(having)h(written)f(the)g(original)h(version)g(in)83
3862 y(forty-eight)21 b(hours,)g(on)i(August)d(6th)j(and)g(7th,)f
(1986.)1770 6071 y(1)p eop
%%Page: 2 8
2 7 bop 166 1196 a Fn(Chapter)44 b(2)166 1611 y Fq(User)11
b(')-11 b(s)52 b(guide)166 2072 y Fs(This)32 b(chapter)g(details)f
(Scheme)h(48's)h(user)e(interface:)47 b(its)32 b(command-line)h(ar)n
(guments,)g(com-)166 2185 y(mand)23 b(pr)n(ocessor)-7
b(,)21 b(debugger)-7 b(,)20 b(and)j(so)f(forth.)166 2483
y Fl(2.1)119 b(Command)31 b(line)e(arguments)166 2694
y Fs(A)22 b(few)h(command)g(line)g(ar)n(guments)f(ar)n(e)h(pr)n
(ocessed)d(by)j(Scheme)f(48)h(as)g(it)g(starts)e(up.)307
2807 y Fo(scheme48)e Fs([)p Fo(-i)j Fr(image)p Fs(])j([)p
Fo(-h)d Fr(heapsize)p Fs(])k([)p Fo(-a)c Fr(ar)n(gument)h(.)14
b(.)g(.)g Fs(])166 3018 y Fo(-i)22 b Fr(image)46 b Fs(speci\002es)32
b(a)h(heap)f(image)h(\002le)g(to)f(r)n(esume.)57 b(This)33
b(defaults)f(to)g(a)h(heap)f(image)h(that)393 3131 y(r)o(uns)23
b(a)g(Scheme)f(command)h(pr)n(ocessor)-7 b(.)26 b(Heap)c(images)h(ar)n
(e)g(cr)n(eated)f(by)h(the)f Fo(,dump)e Fs(and)393 3244
y Fo(,build)52 b(commands)p Fs(,)19 b(for)j(which)i(see)d(below)-8
b(.)166 3431 y Fo(-h)22 b Fr(heapsize)48 b Fs(speci\002es)30
b(how)g(much)h(space)f(should)f(be)i(r)n(eserved)e(for)h(allocation.)53
b Fr(Heapsize)33 b Fs(is)393 3543 y(in)28 b(wor)n(ds)d(\(wher)n(e)h
(one)g(wor)n(d)g(=)h(4)h(bytes\),)e(and)h(covers)f(both)g(semispaces,)h
(only)f(one)g(of)393 3656 y(which)f(is)g(in)g(use)e(at)i(any)f(given)h
(time)f(\(except)g(during)f(garbage)i(collection\).)34
b(Cons)24 b(cells)393 3769 y(ar)n(e)32 b(curr)n(ently)e(3)i(wor)n(ds,)g
(so)e(if)i(you)f(want)g(to)f(make)h(sur)n(e)f(you)h(can)h(allocate)g(a)
f(million)393 3882 y(cons)22 b(cells,)h(you)f(should)f(specify)h
Fo(-h)54 b(6000000)19 b Fs(\(actually)24 b(somewhat)e(mor)n(e)g(than)h
(this,)393 3995 y(to)e(account)h(for)f(the)g(initial)i(heap)e(image)h
(and)g(br)n(eathing)f(r)n(oom\).)28 b(The)21 b(default)g(heap)g(size)
393 4108 y(is)k(3000000)j(wor)n(ds.)33 b(The)24 b(system)f(will)j(use)e
(a)h(lar)n(ger)g(heap)f(if)i(the)e(speci\002ed)f(\(or)i(default\))393
4221 y(size)e(is)g(less)f(than)g(the)g(size)h(of)f(the)g(image)h(being)
g(r)n(esumed.)166 4408 y Fo(-a)f Fr(ar)n(gument)i(.)14
b(.)g(.)57 b Fs(is)31 b(only)e(useful)h(with)h(images)f(built)h(using)f
Fo(,build)p Fs(.)48 b(The)29 b(ar)n(guments)h(ar)n(e)393
4521 y(passed)21 b(as)i(a)g(list)g(of)g(strings)e(to)h(the)g(pr)n
(ocedur)n(e)f(speci\002ed)h(in)h(the)f Fo(,build)e Fs(command)j(as)393
4634 y(for)g(example:)559 4821 y Fo(>)54 b(\(define)d(\(f)j(a\))f
(\(for-each)e(display)g(a\))j(\(newline\))c(0\))559 4934
y(>)k(,build)e(f)i(foo.image)559 5046 y(>)g(,exit)559
5159 y(\045)g(scheme48vm)c(-i)j(foo.image)e(-a)i(mumble)f("foo)h(x")559
5272 y(mumblefoo)d(x)559 5385 y(\045)307 5596 y Fs(The)28
b(usual)h(de\002nition)f(of)h(the)f Fo(s48)f Fs(or)i
Fo(scheme48)c Fs(command)k(is)g(actually)h(a)g(shell)f(script)166
5709 y(that)i(starts)f(up)h(the)g(Scheme)f(48)j(virtual)f(machine)h
(with)e(a)h Fo(-i)53 b Fr(image\002le)33 b Fs(specifying)e(the)g(de-)
166 5822 y(velopment)f(envir)n(onment)h(heap)f(image)i(and)f(a)h
Fo(-o)53 b Fr(vm-executable)34 b Fs(specifying)c(the)h(location)1853
6071 y(2)p eop
%%Page: 3 9
3 8 bop 83 573 a Fs(of)25 b(the)e(virtual-machine)k(executable)d(\(the)
g(executable)g(is)h(needed)d(for)i(loading)h(external)f(code)83
686 y(on)31 b(some)g(versions)f(of)i(Unix;)j(see)30 b(section)h(6.5)h
(for)g(mor)n(e)f(information\).)55 b(The)31 b(\002le)g
Fo(go)g Fs(in)h(the)83 799 y(Scheme)22 b(48)i(installation)f(sour)n(ce)
f(dir)n(ectory)g(is)h(an)g(example)f(of)h(such)f(a)i(shell)e(script.)83
1094 y Fl(2.2)119 b(Command)31 b(processor)83 1305 y
Fs(When)25 b(you)g(invoke)g(the)f(default)i(heap)f(image,)h(a)g
(command)g(pr)n(ocessor)e(starts)g(r)o(unning.)37 b(The)83
1418 y(command)23 b(pr)n(ocessor)e(acts)i(as)g(both)g(a)g(r)n
(ead-eval-print)h(loop,)e(r)n(eading)h(expr)n(essions,)d(evaluat-)83
1531 y(ing)j(them,)f(and)h(printing)f(the)h(r)n(esults,)e(and)i(as)g
(an)g(interactive)h(debugger)c(and)j(data)g(inspector)-7
b(.)83 1644 y(See)22 b(Chapter)g(3)h(for)g(a)g(description)e(of)i(the)f
(command)h(pr)n(ocessor)-7 b(.)83 1939 y Fl(2.3)119 b(Editing)83
2150 y Fs(W)-8 b(e)55 b(r)n(ecommend)g(r)o(unning)h(Scheme)f(48)i
(under)d(GNU)i(Emacs)g(or)f(XEmacs)h(using)f(the)83 2263
y Fo(cmuscheme48)28 b Fs(command)33 b(package.)57 b(This)32
b(is)h(in)g(the)f(Scheme)f(48)j(distribution's)e Fo(emacs/)83
2375 y Fs(subdir)n(ectory)k(and)i(is)g(included)f(in)i(XEmacs's)e
Fo(scheme)e Fs(package.)73 b(It)37 b(is)h(a)g(variant)h(of)f(the)83
2488 y Fo(cmuscheme)27 b Fs(library)-10 b(,)34 b(which)d(comes)g(to)f
(us)g(courtesy)f(of)i(Olin)h(Shivers,)h(formerly)d(of)h(CMU.)83
2601 y(Y)-8 b(ou)21 b(might)i(want)g(to)f(put)f(the)h(following)h(in)g
(your)f(Emacs)h(init)g(\002le)g(\()p Fo(.emacs)p Fs(\):)248
2772 y Fo(\(setq)53 b(scheme-program)o(-n)o(am)o(e)c("scheme48"\))248
2885 y(\(autoload)i('run-scheme)794 2998 y("cmuscheme48")794
3110 y("Run)i(an)g(inferior)e(Scheme)h(process.")794
3223 y(t\))83 3394 y Fs(The)20 b(Emacs)i(function)f Fo(run-scheme)c
Fs(can)22 b(then)e(be)h(used)f(to)g(start)h(a)g(pr)n(ocess)f(r)o
(unning)h(the)f(pr)n(o-)83 3507 y(gram)f Fo(scheme48)14
b Fs(in)19 b(a)g(new)f(buf)n(fer)-7 b(.)27 b(T)-8 b(o)18
b(make)g(the)f Fo(autoload)e Fs(and)k Fo(\(require)50
b(...\))25 b Fs(forms)83 3620 y(work,)c(you)h(will)i(also)f(need)e(to)h
(put)g(the)g(dir)n(ectory)f(containing)i Fo(cmuscheme)c
Fs(and)j(r)n(elated)g(\002les)83 3733 y(in)h(your)f(emacs)h(load-path:)
248 3903 y Fo(\(setq)53 b(load-path)357 4016 y(\(append)f(load-path)e
('\(")p Fr(scheme-48-dir)n(ectory)p Fo(/emacs"\)\)\))83
4186 y Fs(Further)45 b(documentation)g(can)i(be)f(found)f(in)i(the)e
(\002les)h Fo(emacs/cmuscheme)o(48)o(.e)o(l)40 b Fs(and)83
4299 y Fo(emacs/comint.el)o Fs(.)83 4594 y Fl(2.4)119
b(Performance)83 4805 y Fs(If)36 b(you)f(want)i(to)e(generally)h(have)g
(your)f(code)h(r)o(un)g(faster)f(than)i(it)f(normally)h(would,)h(enter)
83 4918 y Fo(inline-values)23 b Fs(mode)k(befor)n(e)h(loading)h
(anything.)45 b(Otherwise)27 b(calls)j(to)e(primitives)h(\(like)83
5031 y Fo(+)g Fs(and)f Fo(cons)p Fs(\))g(and)h(in-line)h(pr)n(ocedur)n
(es)d(\(like)i Fo(not)f Fs(and)h Fo(cadr)p Fs(\))e(won't)h(be)h
(open-coded,)f(and)83 5144 y(pr)n(ograms)22 b(will)i(r)o(un)f(mor)n(e)f
(slowly)-10 b(.)224 5257 y(The)19 b(system)f(doesn't)g(start)g(in)i
Fo(inline-values)14 b Fs(mode)19 b(by)g(default)h(because)f(the)g
(Scheme)83 5370 y(r)n(eport)k(permits)g(r)n(ede\002nitions)f(of)i
(built-in)h(pr)n(ocedur)n(es.)30 b(W)-5 b(ith)24 b(this)f(mode)g(set,)g
(such)g(r)n(ede\002ni-)83 5483 y(tions)e(don't)f(work)g(accor)n(ding)i
(to)f(the)f(r)n(eport,)g(because)h(pr)n(eviously)f(compiled)i(calls)g
(may)g(have)83 5596 y(in-lined)h(the)f(old)g(de\002nition,)g(leaving)h
(no)g(opportunity)d(to)i(call)i(the)e(new)g(de\002nition.)224
5709 y Fo(Inline-values)41 b Fs(mode)46 b(is)g(contr)n(olled)g(by)h
(the)f Fo(inline-values)40 b Fs(switch.)100 b Fo(,set)83
5822 y(inline-values)17 b Fs(and)22 b Fo(,unset)52 b(inline-values)17
b Fs(turn)22 b(it)h(on)f(and)h(of)n(f.)1770 6071 y(3)p
eop
%%Page: 4 10
4 9 bop 166 573 a Fl(2.5)119 b(Disassembler)166 786 y
Fs(The)22 b Fo(,dis)f Fs(command)i(prints)f(out)g(the)f(disassembled)h
(byte)g(codes)f(of)i(a)g(pr)n(ocedur)n(e.)331 979 y Fo(>)54
b(,dis)f(cons)331 1093 y(cons)440 1206 y(0)i(\(protocol)50
b(2\))440 1320 y(2)55 b(\(pop\))440 1434 y(3)g(\(make-stored-o)o(bj)o
(ec)o(t)48 b(2)55 b(pair\))440 1548 y(6)g(\(return\))331
1662 y(>)166 1854 y Fs(The)34 b(curr)n(ent)g(byte)f(codes)h(ar)n(e)h
(listed)e(in)i(the)f(\002le)h Fo(scheme/vm/arch)o(.s)o(cm)o
Fs(.)58 b(A)34 b(somewhat)166 1967 y(out-of-date)21 b(description)h(of)
g(them)h(can)g(be)g(found)e(in)j([5].)307 2081 y(The)g(command)h(ar)n
(gument)g(is)f(optional;)i(if)f(unsupplied)e(it)i(defaults)f(to)g(the)g
(curr)n(ent)g(focus)166 2194 y(object)e(\()p Fo(##)p
Fs(\).)307 2308 y(The)g(disassembler)g(can)h(also)g(be)g(invoked)e(on)i
(continuations)f(and)g(templates.)166 2612 y Fl(2.6)119
b(Module)30 b(system)166 2826 y Fs(This)j(section)g(gives)g(a)i(brief)f
(description)e(of)i(modules)e(and)i(r)n(elated)f(entities.)60
b(For)33 b(detailed)166 2938 y(information,)23 b(including)h(a)g
(description)d(of)i(the)f(module)h(con\002guration)f(language,)h(see)e
(chap-)166 3051 y(ter)h(4.)307 3165 y(A)j Fr(module)g
Fs(is)g(an)g(isolated)f(namespace,)h(with)g(visibility)h(of)f(bindings)
f(contr)n(olled)h(by)f(mod-)166 3278 y(ule)c(descriptions)e(written)h
(in)h(a)g(special)g(con\002guration)g(language.)26 b(A)20
b(module)f(may)h(be)g(instan-)166 3391 y(tiated)30 b(as)h(a)g
Fr(package)p Fs(,)j(which)d(is)g(an)g(envir)n(onment)f(in)h(which)g
(code)f(can)h(be)g(evaluated.)51 b(Most)166 3504 y(modules)31
b(ar)n(e)h(instantiated)f(only)g(once)g(and)h(so)f(have)h(a)g(unique)f
(package.)55 b(A)32 b Fr(structur)n(e)h Fs(is)f(a)166
3617 y(subset)21 b(of)h(the)f(bindings)h(in)g(a)h(package.)k(Only)22
b(by)g(being)g(included)g(in)h(a)f(str)o(uctur)n(e)f(can)i(a)g(bind-)
166 3730 y(ing)i(be)f(made)h(visible)h(in)f(other)f(packages.)33
b(A)25 b(str)o(uctur)n(e)e(has)i(two)f(parts,)g(the)g(package)h(whose)
166 3843 y(bindings)h(ar)n(e)g(being)f(exported)f(and)h(the)g(set)g(of)
h(names)g(that)f(ar)n(e)h(to)f(be)h(exported.)35 b(This)26
b(set)e(of)166 3956 y(names)e(is)h(called)h(an)f Fr(interface)p
Fs(.)30 b(A)22 b(module)g(then)g(has)g(thr)n(ee)g(parts:)302
4147 y Fk(\017)46 b Fs(a)23 b(set)f(of)h(str)o(uctur)n(es)e(whose)g
(bindings)h(ar)n(e)h(to)f(be)h(visible)h(within)e(the)g(module)302
4339 y Fk(\017)46 b Fs(the)22 b(sour)n(ce)g(code)g(to)g(be)g(evaluated)
h(within)g(the)f(module)302 4531 y Fk(\017)46 b Fs(a)23
b(set)f(of)h(exported)d(interfaces)166 4722 y(Instantiating)i(a)h
(module)f(pr)n(oduces)g(a)h(package)f(and)h(a)g(set)f(of)h(str)o(uctur)
n(es,)e(one)g(for)i(each)g(of)g(the)166 4835 y(exported)d(interfaces.)
307 4949 y(The)25 b(following)h(example)g(uses)e Fo(define-structur)o
(e)c Fs(to)25 b(cr)n(eate)h(a)g(module)f(that)g(imple-)166
5062 y(ments)c(simple)g(cells)h(as)g(pairs,)g(instantiates)e(this)i
(module,)f(and)g(binds)h(the)e(r)n(esulting)h(str)o(uctur)n(e)166
5175 y(to)28 b Fo(cells)p Fs(.)45 b(The)28 b(syntax)g
Fo(\(export)51 b Fr(name)29 b(.)14 b(.)g(.)g Fo(\))44
b Fs(cr)n(eates)29 b(an)g(interface)g(containing)g Fr(name)g(.)14
b(.)g(.)g Fs(.)166 5288 y(The)28 b Fo(open)f Fs(clause)i(lists)g(str)o
(uctur)n(es)e(whose)h(bindings)g(ar)n(e)i(visible)g(within)f(the)f
(module.)46 b(The)166 5401 y Fo(begin)20 b Fs(clause)j(contains)g(sour)
n(ce)f(code.)331 5594 y Fo(\(define-structur)o(e)48 b(cells)k(\(export)
g(make-cell)2077 5708 y(cell-ref)2077 5822 y(cell-set!\))1853
6071 y Fs(4)p eop
%%Page: 5 11
5 10 bop 357 573 a Fo(\(open)53 b(scheme\))357 686 y(\(begin)f
(\(define)g(\(make-cell)e(x\))848 799 y(\(cons)j('cell)f(x\)\))739
912 y(\(define)g(cell-ref)f(cdr\))739 1025 y(\(define)h(cell-set!)e
(set-cdr!\)\)\))224 1212 y Fs(Cells)23 b(could)f(also)g(have)h(been)f
(implemented)f(using)g(the)h(r)n(ecor)n(d)g(facility)i(described)d(in)h
(sec-)83 1325 y(tion)g(5.7)i(and)e(available)k(in)d(str)o(uctur)n(e)f
Fo(define-record-)o(ty)o(pe)o Fs(.)248 1513 y Fo(\(define-structur)o(e)
48 b(cells)k(\(export)g(make-cell)1994 1626 y(cell-ref)1994
1739 y(cell-set!\))357 1851 y(\(open)h(scheme)f(define-record-)o(ty)o
(pe)o(s\))357 1964 y(\(begin)g(\(define-record-)o(typ)o(e)c(cell)53
b(:cell)848 2077 y(\(make-cell)d(value\))848 2190 y(cell?)848
2303 y(\(value)i(cell-ref)f(cell-set!\)\)\)\))224 2491
y Fs(W)-5 b(ith)26 b(either)f(de\002nition)h(the)f(r)n(esulting)g(str)o
(uctur)n(e)g(can)i(be)f(used)f(in)i(other)d(modules)h(by)h(in-)83
2604 y(cluding)d Fo(cells)d Fs(in)j(an)g Fo(open)e Fs(clause.)224
2717 y(The)c(command)h(interpr)n(eter)d(is)i(always)h(operating)e
(within)i(a)g(particular)g(package.)26 b(Initially)83
2829 y(this)18 b(is)g(a)h(package)f(in)g(which)h(only)f(the)f(standar)n
(d)g(Scheme)h(bindings)g(ar)n(e)g(visible.)28 b(The)17
b(bindings)83 2942 y(of)32 b(other)e(str)o(uctur)n(es)g(can)i(be)g
(made)g(visible)g(by)g(using)f(the)g Fo(,open)e Fs(command)j(described)
f(in)83 3055 y(section)22 b(3.4)h(below)-8 b(.)224 3168
y(Note)17 b(that)i(this)f(initial)i(package)e(does)f(not)h(include)h
(the)f(con\002guration)g(language.)26 b(Module)83 3281
y(code)c(needs)f(to)h(be)g(evaluated)h(in)g(the)f(con\002guration)g
(package,)g(which)i(can)f(be)g(done)e(by)i(using)83 3394
y(the)f Fo(,)p Fs(con\002g)g(command:)248 3582 y Fo(>)54
b(,config)e(\(define-struct)o(ure)c(cells)k(...\))248
3695 y(>)i(,open)f(cells)248 3807 y(>)h(\(make-cell)c(4\))248
3920 y('\(cell)i(.)i(4\))248 4033 y(>)g(\(define)e(c)i(\(make-cell)c
(4\)\))248 4146 y(>)k(\(cell-ref)d(c\))248 4259 y(4)83
4558 y Fl(2.7)119 b(Library)83 4769 y Fs(A)32 b(number)f(of)h(useful)g
(utilities)g(ar)n(e)g(either)f(built)i(in)f(to)f(Scheme)g(48)i(or)f
(can)h(be)e(loaded)h(fr)n(om)83 4882 y(an)27 b(external)e(library)-10
b(.)40 b(These)24 b(utilities)i(ar)n(e)h(not)e(visible)j(in)e(the)g
(user)f(envir)n(onment)g(by)i(default,)83 4995 y(but)d(can)g(be)g(made)
f(available)k(with)d(the)f Fo(open)f Fs(command.)31 b(For)23
b(example,)h(to)f(use)g(the)g Fo(tables)83 5108 y Fs(str)o(uctur)n(e,)e
(do)248 5295 y Fo(>)54 b(,open)f(tables)248 5408 y(>)224
5596 y Fs(If)25 b(the)e(utility)i(is)f(not)g(alr)n(eady)h(loaded,)f
(then)g(the)f Fo(,open)g Fs(command)i(will)g(load)g(it.)34
b(Or)-7 b(,)25 b(you)83 5709 y(can)35 b(load)e(something)g(explicitly)h
(\(without)f(opening)f(it\))i(using)f(the)g Fo(load-package)28
b Fs(com-)83 5822 y(mand:)1770 6071 y(5)p eop
%%Page: 6 12
6 11 bop 331 573 a Fo(>)54 b(,load-package)49 b(queues)331
686 y(>)54 b(,open)f(queues)307 873 y Fs(When)34 b(loading)g(a)h
(utility)-10 b(,)37 b(the)c(message)g(\224Note:)49 b(optional)35
b(optimizer)f(not)f(invoked\224)h(is)166 986 y(innocuous.)27
b(Feel)22 b(fr)n(ee)g(to)g(ignor)n(e)g(it.)307 1099 y(See)g(also)h(the)
e(package)i(system)d(documentation,)i(in)h(chapter)f(4.)307
1212 y(Not)40 b(all)j(of)e(the)f(the)g(libraries)i(available)i(in)e
(Scheme)f(48)h(ar)n(e)f(described)f(in)h(this)g(man-)166
1325 y(ual.)117 b(All)53 b(ar)n(e)f(listed)g(in)g(\002les)g
Fo(rts-packages.sc)o(m)p Fs(,)h Fo(comp-packages.s)o(cm)p
Fs(,)g Fo(env-)166 1438 y(packages.scm)p Fs(,)32 b(and)i
Fo(more-packages.sc)o(m)28 b Fs(in)35 b(the)f Fo(scheme)e
Fs(dir)n(ectory)h(of)i(the)e(distri-)166 1551 y(bution,)44
b(and)d(the)e(bindings)i(they)e(export)f(ar)n(e)j(listed)f(in)h
Fo(interfaces.scm)34 b Fs(and)40 b Fo(more-)166 1664
y(interfaces.scm)16 b Fs(in)23 b(the)f(same)h(dir)n(ectory)-10
b(.)1853 6071 y(6)p eop
%%Page: 7 13
7 12 bop 83 1212 a Fn(Chapter)44 b(3)83 1644 y Fq(Command)52
b(processor)83 2121 y Fs(This)20 b(chapter)f(details)h(Scheme)f(48's)i
(command)g(pr)n(ocessor)-7 b(,)19 b(which)h(incorporates)f(both)g(a)i
(r)n(ead-)83 2234 y(eval-print)29 b(loop)e(and)h(an)g(interactive)g
(debugger)-7 b(.)42 b(At)27 b(the)g Fo(>)h Fs(pr)n(ompt,)g(you)f(can)h
(type)f(either)g(a)83 2347 y(Scheme)i(form)h(\(expr)n(ession)d(or)j
(de\002nition\))e(or)i(a)g(command)g(beginning)f(with)g(a)h(comma.)49
b(In)83 2460 y(inspection)25 b(mode)g(\(see)h(section)f(3.7\))i(the)e
(pr)n(ompt)g(changes)h(to)f Fo(:)35 b Fs(and)26 b(commands)g(no)g
(longer)83 2573 y(need)c(to)h(be)g(pr)n(eceded)f(by)h(a)h(comma;)g
(input)f(beginning)g(with)h(a)g(letter)e(or)h(digit)g(is)h(assumed)e
(to)83 2686 y(be)h(a)h(command,)g(not)f(an)h(expr)n(ession.)k(In)23
b(inspection)g(mode)g(the)f(command)i(pr)n(ocessor)e(prints)83
2798 y(out)g(a)h(menu)f(of)h(selectable)f(components)f(for)i(the)f
(curr)n(ent)g(object)g(of)h(inter)n(est.)83 3200 y Fl(3.1)119
b(Current)29 b(focus)h(value)g(and)f Fj(##)83 3445 y
Fs(The)f(command)h(pr)n(ocessor)e(keeps)g(track)i(of)f(a)i(curr)n(ent)e
Fr(focus)h(value)p Fs(.)48 b(This)28 b(value)i(is)e(normally)83
3558 y(the)34 b(last)g(value)i(r)n(eturned)d(by)h(a)h(command.)64
b(If)35 b(a)g(command)g(r)n(eturns)e(multiple)i(values)g(the)83
3671 y(focus)h(object)h(is)f(a)h(list)g(of)f(the)g(values.)70
b(The)36 b(focus)g(value)h(is)g(not)e(changed)h(if)i(a)f(command)83
3784 y(r)n(eturns)31 b(no)h(values)g(or)g(a)h(distinguished)d
(`unspeci\002c')i(value.)57 b(Examples)32 b(of)g(forms)g(that)g(r)n(e-)
83 3897 y(turn)25 b(this)g(unspeci\002c)h(value)g(ar)n(e)g
(de\002nitions,)f(uses)f(of)i Fo(set!)p Fs(,)e(and)i
Fo(\(if)53 b(#f)h(0\))p Fs(.)36 b(It)25 b(prints)g(as)83
4010 y Fo(#)p Fk(f)p Fo(Unspecific)p Fk(g)p Fs(.)224
4140 y(The)h(r)n(eader)f(used)g(by)h(the)f(command)i(pr)n(ocessor)d(r)n
(eads)i Fo(##)f Fs(as)i(a)f(special)h(expr)n(ession)d(that)83
4253 y(evaluates)f(to)f(the)f(curr)n(ent)i(focus)f(object.)248
4524 y Fo(>)54 b(\(list)f('a)g('b\))248 4654 y('\(a)h(b\))248
4784 y(>)g(\(car)f(##\))248 4913 y('a)248 5043 y(>)h(\(symbol->string)
48 b(##\))248 5173 y("a")248 5303 y(>)54 b(\(if)g(#f)f(0\))248
5432 y(#)p Fk(f)p Fo(Unspecific)p Fk(g)248 5562 y Fo(>)h(##)248
5692 y("a")248 5822 y(>)1770 6071 y Fs(7)p eop
%%Page: 8 14
8 13 bop 166 573 a Fl(3.2)119 b(Command)31 b(levels)166
784 y Fs(If)g(an)g(err)n(or)-7 b(,)32 b(keyboar)n(d)d(interr)o(upt,)i
(or)g(other)e(br)n(eakpoint)h(occurs,)i(or)e(the)g Fo(,push)f
Fs(command)166 897 y(is)24 b(used,)e(the)h(command)h(pr)n(ocessor)e
(invokes)h(a)h(r)n(ecursive)g(copy)f(of)h(itself,)f(pr)n(eserving)g
(the)g(dy-)166 1010 y(namic)32 b(state)d(of)h(the)g(pr)n(ogram)g(when)g
(the)f(br)n(eakpoint)h(occur)n(ed.)50 b(The)30 b(r)n(ecursive)g
(invocation)166 1123 y(cr)n(eates)24 b(a)h(new)f Fr(command)h(level)p
Fs(.)36 b(The)24 b(command)h(levels)g(form)g(a)g(stack)f(with)h(the)e
(curr)n(ent)i(level)166 1235 y(at)k(the)f(top.)45 b(The)28
b(command)h(pr)n(ompt)f(indicates)h(the)f(number)g(of)h(stopped)d
(levels)i(below)h(the)166 1348 y(curr)n(ent)j(one:)46
b Fo(>)32 b Fs(or)f Fo(:)47 b Fs(for)32 b(the)g(base)g(level)g(and)h
Fr(n)p Fo(>)e Fs(or)h Fr(n)p Fo(:)46 b Fs(for)32 b(all)i(other)d
(levels,)j(wher)n(e)d Fr(n)h Fs(is)166 1461 y(the)22
b(command-level)h(nesting)e(depth.)26 b(The)c Fo(auto-levels)17
b Fs(switch)23 b(described)e(below)h(can)h(be)166 1574
y(used)e(to)h(disable)h(the)f(automatic)h(pushing)f(of)h(new)f(levels.)
307 1687 y(The)36 b(command)h(pr)n(ocessor)7 b('s)34
b(evaluation)k(package)e(and)g(the)g(value)h(of)g(the)f
Fo(inspect-)166 1800 y(focus-value)30 b Fs(switch)k(ar)n(e)h(local)i
(to)d(each)h(command)g(level.)65 b(They)33 b(ar)n(e)i(pr)n(eserved)e
(when)166 1913 y(a)i(new)f(level)h(is)f(pushed)f(and)h(r)n(estor)n(ed)f
(when)g(it)i(is)g(discar)n(ded.)62 b(The)34 b(settings)e(of)j(all)g
(other)166 2026 y(switches)22 b(ar)n(e)h(shar)n(ed)f(by)g(all)i
(command)f(levels.)211 2196 y Fk(h)p Fs(eof)p Fk(i)393
2309 y Fs(Discar)n(ds)g(the)e(curr)n(ent)h(command)g(level)g(and)g(r)n
(esumes)f(r)o(unning)h(the)f(level)h(down.)27 b Fk(h)p
Fs(eof)p Fk(i)393 2422 y Fs(is)44 b(usually)g(contr)n(ol-)p
Fo(D)g Fs(at)g(a)g(Unix)g(shell)g(or)f(contr)n(ol-)p
Fo(C)h Fs(contr)n(ol-)p Fo(D)g Fs(using)f(the)g(Emacs)393
2535 y Fo(cmuscheme48)18 b Fs(library)-10 b(.)211 2709
y Fo(,pop)393 2821 y Fs(The)22 b(same)h(as)f Fk(h)p Fs(eof)p
Fk(i)p Fs(.)211 2995 y Fo(,proceed)51 b([)p Fr(exp)56
b Fo(...)p Fs(])393 3108 y(Pr)n(oceed)34 b(after)i(an)f(interr)o(upt)f
(or)h(err)n(or)-7 b(,)38 b(r)n(esuming)c(the)h(next)f(command)i(level)f
(down,)393 3221 y(delivering)24 b(the)e(values)i(of)f
Fr(exp)i(.)14 b(.)g(.)43 b Fs(to)22 b(the)h(continuation.)30
b(Interr)o(upt)21 b(continuations)i(dis-)393 3334 y(car)n(d)32
b(any)g(r)n(eturned)d(values.)55 b Fo(,Pop)29 b Fs(and)j
Fo(,proceed)27 b Fs(have)32 b(the)f(same)g(ef)n(fect)g(after)h(an)393
3447 y(interr)o(upt)c(but)h(behave)g(dif)n(fer)n(ently)g(after)g(err)n
(ors.)46 b Fo(,Proceed)25 b Fs(r)n(estarts)j(the)g(err)n(oneous)393
3560 y(computation)k(fr)n(om)h(the)e(point)h(wher)n(e)f(the)g(err)n(or)
h(occurr)n(ed)f(\(although)h(not)g(all)h(err)n(ors)393
3672 y(ar)n(e)22 b(pr)n(oceedable\))f(while)h Fo(,pop)d
Fs(\(and)j Fk(h)p Fs(eof)p Fk(i)p Fs(\))g(discar)n(ds)f(it)h(and)f(pr)n
(ompts)f(for)i(a)g(new)e(com-)393 3785 y(mand.)211 3959
y Fo(,push)393 4072 y Fs(Pushes)32 b(a)i(new)f(command)h(level)g(on)f
(above)h(the)e(curr)n(ent)h(one.)60 b(This)33 b(is)h(useful)f(if)h(the)
393 4185 y Fo(auto-levels)26 b Fs(switch)k(has)g(been)f(used)g(to)h
(disable)g(the)g(automatic)g(pushing)g(of)g(new)393 4298
y(levels)23 b(for)f(err)n(ors)g(and)h(interr)o(upts.)211
4471 y Fo(,reset)52 b([)p Fr(number)p Fo(])393 4584 y
Fs(Pops)35 b(down)f(to)h(a)h(given)g(level)g(and)f(r)n(estarts)g(that)g
(level.)67 b Fr(Number)36 b Fs(defaults)e(to)h(zer)n(o,)393
4697 y Fo(,reset)20 b Fs(r)n(estarts)i(the)f(command)j(pr)n(ocessor)-7
b(,)20 b(discar)n(ding)j(all)h(existing)e(levels.)307
4867 y(Whenever)36 b(moving)i(to)f(an)h(existing)e(level,)41
b(either)c(by)g(sending)f(an)i Fk(h)p Fs(eof)p Fk(i)f
Fs(or)g(by)h(using)166 4980 y Fo(,reset)24 b Fs(or)h(the)h(other)e
(commands)j(listed)e(above,)i(the)f(command)g(pr)n(ocessor)f(r)o(uns)g
(all)j(of)e(the)166 5093 y Fo(dynamic-wind)19 b Fs(\223after)7
b(\224)25 b(thunks)d(belonging)i(to)g(stopped)d(computations)i(on)h
(the)g(discar)n(ded)166 5206 y(level\(s\).)166 5498 y
Fl(3.3)119 b(Logistical)30 b(commands)211 5709 y Fo(,load)53
b Fr(\002lename)23 b(.)14 b(.)g(.)393 5822 y Fs(Loads)23
b(the)g(named)h(Scheme)f(sour)n(ce)g(\002le\(s\).)32
b(Easier)23 b(to)g(type)g(than)h Fo(\(load)52 b(")p Fr(\002lename)p
Fo("\))1853 6071 y Fs(8)p eop
%%Page: 9 15
9 14 bop 310 573 a Fs(because)24 b(you)f(don't)g(have)h(to)g(shift)f
(to)h(type)e(the)h(par)n(entheses)f(or)h(quote)g(marks.)31
b(Also,)24 b(it)310 686 y(works)i(in)j(any)e(package,)h(unlike)g
Fo(\(load)52 b(")p Fr(\002lename)p Fo("\))p Fs(,)28 b(which)g(will)h
(work)e(only)g(work)310 799 y(in)c(packages)f(in)h(which)g(the)f
(variable)j Fo(load)c Fs(is)i(de\002ned)d(appr)n(opriately)-10
b(.)128 999 y Fo(,exit)53 b([)p Fr(exp)p Fo(])20 b Fs(Exits)f(back)i
(out)d(to)i(shell)f(\(or)h(executive)f(or)h(whatever)f(invoked)g
(Scheme)g(48)i(in)310 1111 y(the)i(\002rst)g(place\).)32
b Fr(Exp)24 b Fs(should)f(evaluate)h(to)f(an)h(integer)-7
b(.)30 b(The)23 b(integer)f(is)i(r)n(eturned)e(to)h(the)310
1224 y(calling)30 b(pr)n(ogram.)45 b(The)28 b(default)g(value)h(of)f
Fr(exp)i Fs(is)e(zer)n(o,)i(which,)g(on)e(Unix,)h(is)g(generally)310
1337 y(interpr)n(eted)21 b(as)h(success.)83 1655 y Fl(3.4)119
b(Module)30 b(commands)83 1872 y Fs(Ther)n(e)23 b(ar)n(e)i(many)g
(commands)f(r)n(elated)g(to)g(modules.)31 b(Only)25 b(the)e(most)h
(commonly)g(used)f(mod-)83 1985 y(ule)33 b(commands)g(ar)n(e)g
(described)f(her)n(e;)38 b(documentation)32 b(for)g(the)h(r)n(est)f
(can)i(be)f(found)f(in)h(sec-)83 2098 y(tion)j(4.8.)68
b(Ther)n(e)36 b(is)g(also)g(a)h(brief)f(description)f(of)h(modules,)i
(str)o(uctur)n(es,)f(and)f(packages)g(in)83 2211 y(section)22
b(2.6)h(below)-8 b(.)128 2439 y Fo(,open)53 b Fr(structur)n(e)24
b(.)14 b(.)g(.)310 2551 y Fs(Makes)k(the)g(bindings)g(in)h(the)f
Fr(structur)n(e)p Fs(s)h(visible)h(in)f(the)f(curr)n(ent)g(package.)26
b(The)18 b(packages)310 2664 y(associated)30 b(with)h(the)f
Fr(structur)n(e)p Fs(s)h(will)h(be)f(loaded)f(if)h(this)g(has)f(not)g
(alr)n(eady)h(been)f(done)310 2777 y(\(the)d Fo(ask-before-loa)o(din)o
(g)21 b Fs(switch)27 b(can)h(be)f(used)e(disable)j(the)e(automatic)i
(loading)310 2890 y(of)23 b(packages\).)128 3090 y Fo(,config)52
b([)p Fr(command)p Fo(])310 3203 y Fs(Executes)22 b Fr(command)j
Fs(in)f(the)f Fo(config)f Fs(package,)i(which)g(includes)g(the)f
(module)g(con\002gu-)310 3316 y(ration)g(language.)28
b(For)21 b(example,)i(use)476 3519 y Fo(,config)51 b(,load)h
Fr(\002lename)310 3719 y Fs(to)21 b(load)h(a)h(\002le)f(containing)g
(module)f(de\002nitions.)26 b(If)c(no)f Fr(command)h
Fs(is)g(given,)g(the)f Fo(config)310 3832 y Fs(package)i(becomes)e(the)
h(execution)g(package)g(for)h(futur)n(e)f(commands.)128
4031 y Fo(,user)53 b([)p Fr(command)p Fo(])310 4144 y
Fs(This)26 b(is)h(similar)g(to)f(the)f Fo(,config)p Fs(.)36
b(It)25 b(moves)h(to)g(or)f(executes)g(a)h(command)h(in)g(the)e(user)
310 4257 y(package)c(\(which)h(is)g(the)e(default)i(package)f(when)f
(the)h(Scheme)g(48)h(command)g(pr)n(ocessor)310 4370
y(starts\).)83 4688 y Fl(3.5)119 b(Debugging)31 b(commands)128
4905 y Fo(,preview)310 5018 y Fs(Somewhat)d(like)g(a)h(backtrace,)h
(but)f(because)f(of)g(tail)i(r)n(ecursion)d(you)h(see)f(less)h(than)g
(you)310 5131 y(might)c(in)g(debuggers)e(for)h(some)g(other)g
(languages.)31 b(The)23 b(stack)g(to)h(display)f(is)h(chosen)f(as)310
5244 y(follows:)397 5443 y(1.)45 b(If)24 b(the)f(curr)n(ent)g(focus)h
(object)f(is)h(a)h(continuation)e(or)h(a)g(thr)n(ead,)f(then)g(that)h
(continua-)510 5556 y(tion)f(or)f(thr)n(ead's)g(stack)g(is)h
(displayed.)397 5709 y(2.)45 b(Otherwise,)26 b(if)h(the)e(curr)n(ent)h
(command)h(level)f(was)h(initiated)f(because)g(of)g(a)h(br)n(eak-)510
5822 y(point)22 b(in)g(the)g(next)f(level)h(down,)f(then)h(the)f(stack)
h(at)g(that)g(br)n(eakpoint)f(is)i(displayed.)1770 6071
y(9)p eop
%%Page: 10 16
10 15 bop 480 573 a Fs(3.)45 b(Otherwise,)37 b(ther)n(e)d(is)h(no)g
(stack)f(to)h(display)f(and)h(a)h(message)d(is)i(printed)f(to)g(that)
593 686 y(ef)n(fect.)393 864 y(One)20 b(line)g(is)g(printed)e(out)h
(for)g(each)h(continuation)g(on)f(the)g(chosen)g(stack,)g(going)g(fr)n
(om)h(top)393 977 y(to)i(bottom.)211 1155 y Fo(,run)53
b Fr(exp)393 1268 y Fs(Evaluate)34 b Fr(exp)p Fs(,)i(printing)d(the)f
(r)n(esult\(s\))h(and)g(making)g(them)f(\(or)h(a)h(list)f(of)g(them,)i
(if)f Fr(exp)393 1381 y Fs(r)n(eturns)f(multiple)i(r)n(esults\))e(the)h
(new)g(focus)g(object.)62 b(The)34 b Fo(,run)e Fs(command)j(is)g
(useful)393 1494 y(when)22 b(writing)h(command)g(pr)n(ograms,)f(which)h
(ar)n(e)g(described)e(in)i(section)f(3.8)h(below)-8 b(.)211
1672 y Fo(,trace)52 b Fr(name)j Fo(...)393 1784 y Fs(Start)29
b(tracing)h(calls)h(to)e(the)f(named)i(pr)n(ocedur)n(e)e(or)h(pr)n
(ocedur)n(es.)47 b(W)-5 b(ith)29 b(no)g(ar)n(guments,)393
1897 y(displays)h(all)j(pr)n(ocedur)n(es)c(curr)n(ently)h(traced.)52
b(This)31 b(af)n(fects)g(the)f(binding)h(of)g Fr(name)p
Fs(,)i(not)393 2010 y(the)i(behavior)h(of)g(the)f(pr)n(ocedur)n(e)f
(that)i(is)f(its)h(curr)n(ent)f(value.)67 b Fr(Name)36
b Fs(is)g(r)n(ede\002ned)e(to)393 2123 y(be)h(a)h(pr)n(ocedur)n(e)d
(that)i(prints)f(a)i(message,)g(calls)g(the)f(original)g(value)h(of)f
Fr(name)p Fs(,)j(prints)393 2236 y(another)25 b(message,)g(and)h
(\002nally)h(passes)d(along)i(the)f(value\(s\))i(r)n(eturned)d(by)i
(the)f(original)393 2349 y(pr)n(ocedur)n(e.)211 2527
y Fo(,untrace)51 b Fr(name)k Fo(...)393 2640 y Fs(Stop)32
b(tracing)h(calls)i(to)d(the)g(named)h(pr)n(ocedur)n(e)f(or)g(pr)n
(ocedur)n(es.)57 b(W)-5 b(ith)33 b(no)g(ar)n(gument,)393
2753 y(stop)21 b(tracing)i(all)i(calls)f(to)e(all)i(pr)n(ocedur)n(es.)
211 2931 y Fo(,condition)393 3044 y Fs(The)29 b Fo(,condition)c
Fs(command)k(displays)g(the)f(condition)h(object)g(describing)g(the)g
(err)n(or)393 3157 y(or)f(interr)o(upt)e(that)h(initiated)h(the)f(curr)
n(ent)g(command)h(level.)43 b(The)27 b(condition)h(object)f(be-)393
3270 y(comes)k(the)g(curr)n(ent)g(focus)g(value.)55 b(This)32
b(is)f(particularly)i(useful)e(in)h(conjunction)f(with)393
3383 y(the)24 b(inspector)-7 b(.)31 b(For)23 b(example,)h(if)h(a)g(pr)n
(ocedur)n(e)d(is)j(passed)d(the)h(wr)n(ong)h(number)g(of)g(ar)n(gu-)393
3495 y(ments,)c(do)g Fo(,condition)c Fs(followed)21 b(by)f
Fo(,inspect)d Fs(to)j(inspect)g(the)g(pr)n(ocedur)n(e)g(and)g(its)393
3608 y(ar)n(guments.)211 3786 y Fo(,bound?)52 b Fr(name)393
3899 y Fs(Display)23 b(the)f(binding)h(of)g Fr(name)p
Fs(,)f(if)i(ther)n(e)d(is)i(one,)f(and)g(otherwise)f(prints)h(`)p
Fo(Not)53 b(bound)p Fs('.)211 4077 y Fo(,expand)f Fr(form)211
4165 y Fo(,expand-all)e Fr(form)393 4277 y Fs(Show)20
b(macr)n(o)i(expansion)d(of)i Fr(form)p Fs(,)g(if)h(any)-10
b(.)27 b Fo(,expand)17 b Fs(performs)j(a)h(single)f(macr)n(o)h(expan-)
393 4390 y(sion)i(while)f Fo(,expand-all)c Fs(fully)23
b(expands)f(all)i(macr)n(os)f(in)g Fr(form)p Fs(.)211
4568 y Fo(,where)52 b Fr(pr)n(ocedur)n(e)393 4681 y Fs(Display)23
b(name)g(of)g(\002le)g(containing)g Fr(pr)n(ocedur)n(e)p
Fs('s)i(sour)n(ce)d(code.)166 4975 y Fl(3.6)119 b(Switches)166
5186 y Fs(Ther)n(e)22 b(ar)n(e)g(a)h(number)f(of)h(binary)g(switches)e
(that)h(contr)n(ol)h(the)e(behavior)i(of)g(the)e(command)i(pr)n(o-)166
5299 y(cessor)-7 b(.)27 b(They)21 b(can)j(be)e(set)g(using)g(the)f
Fo(,set)g Fs(and)i Fo(,unset)d Fs(commands.)211 5483
y Fo(,set)53 b Fr(switch)j Fo([on)d(|)h(off)f(|)h(?])393
5596 y Fs(This)24 b(sets)e(the)i(value)g(of)g(mode-switch)f
Fr(switch)p Fs(.)33 b(The)23 b(second)g(ar)n(gument)h(defaults)f(to)g
Fo(on)p Fs(.)393 5709 y(If)h(the)g(second)e(ar)n(gument)i(is)g
Fo(?)32 b Fs(the)23 b(value)i(of)f Fr(switch)h Fs(is)g(is)f(displayed)f
(and)h(not)f(changed.)393 5822 y(Doing)g Fo(,set)53 b(?)27
b Fs(will)d(display)f(a)g(list)g(of)f(the)g(switches)g(and)g(their)g
(curr)n(ent)h(values.)1831 6071 y(10)p eop
%%Page: 11 17
11 16 bop 128 573 a Fo(,unset)52 b Fr(switch)310 686
y Fo(,unset)g Fr(switch)24 b Fs(is)f(the)e(same)i(as)g
Fo(,set)52 b Fr(switch)k Fo(off)p Fs(.)224 922 y(The)22
b(switches)g(ar)n(e)h(as)f(follows:)128 1128 y Fo(batch)310
1241 y Fs(In)d(`batch)i(mode')d(any)i(err)n(or)f(or)g(interr)o(upt)f
(that)h(comes)g(up)g(will)h(cause)g(Scheme)e(48)j(to)d(exit)310
1354 y(immediately)26 b(with)g(a)g(non-zer)n(o)g(exit)f(status.)36
b(Also,)26 b(the)f(command)h(pr)n(ocessor)e(doesn't)310
1467 y(print)f(pr)n(ompts.)j(Batch)d(mode)e(is)i(of)n(f)g(by)g
(default.)128 1673 y Fo(auto-levels)310 1786 y Fs(Enables)33
b(or)f(disables)h(the)f(automatic)h(pushing)f(of)h(a)g(new)f(command)h
(level)h(when)e(an)310 1899 y(err)n(or)-7 b(,)26 b(interr)o(upt,)e(or)h
(other)f(br)n(eakpoint)h(occurs.)36 b(When)25 b(enabled)g(\(the)g
(default\),)h(br)n(eak-)310 2011 y(points)d(push)f(a)j(new)d(command)j
(level,)f(and)f Fk(h)p Fs(eof)p Fk(i)h Fs(\(see)f(above\))h(or)f
Fo(,reset)e Fs(is)j(r)n(equir)n(ed)310 2124 y(to)e(r)n(eturn)g(to)g
(top)g(level.)28 b(The)22 b(ef)n(fects)g(of)h(pushed)e(command)i
(levels)f(include:)419 2331 y Fk(\017)46 b Fs(a)23 b(longer)f(pr)n
(ompt)419 2486 y Fk(\017)46 b Fs(r)n(etention)22 b(of)g(the)g
(continuation)h(in)g(ef)n(fect)f(at)h(the)f(point)g(of)h(err)n(ors)419
2641 y Fk(\017)46 b Fs(confusion)23 b(among)f(some)g(newcomers)310
2848 y(W)-5 b(ith)31 b Fo(auto-levels)25 b Fs(disabled)30
b(one)g(must)g(issue)f(a)i Fo(,push)d Fs(command)j(immediately)310
2961 y(following)d(an)h(err)n(or)e(in)h(or)n(der)f(to)h(r)n(etain)g
(the)f(err)n(or)g(continuation)h(for)g(debugging)e(pur)n(-)310
3073 y(poses;)h(otherwise)d(the)i(continuation)g(is)h(lost)f(as)h(soon)
e(as)i(the)e(focus)i(object)f(changes.)39 b(If)310 3186
y(you)19 b(don't)g(know)f(anything)h(about)h(the)f(available)j
(debugging)c(tools,)h(then)g(levels)g(might)310 3299
y(as)k(well)g(be)g(disabled.)128 3506 y Fo(inspect-focus-va)o(lu)o(e)
310 3618 y Fs(Enable)d(or)f(disable)h(`inspection')f(mode,)g(which)h
(is)g(used)e(for)h(inspecting)g(data)h(str)o(uctur)n(es)310
3731 y(and)j(continuations.)k(Inspection)21 b(mode)h(is)h(described)e
(in)i(section)f(3.7.)128 3938 y Fo(break-on-warning)o(s)310
4050 y Fs(Enter)g(a)i(new)e(command)i(level)f(when)f(a)i(warning)f(is)g
(pr)n(oduced,)e(just)i(as)g(when)f(an)i(err)n(or)310
4163 y(occurs.)j(Normally)22 b(warnings)f(only)g(r)n(esult)g(in)h(a)f
(displayed)g(message)e(and)j(the)e(pr)n(ogram)310 4276
y(does)h(not)h(stop)f(executing.)128 4483 y Fo(ask-before-loadi)o(ng)
310 4595 y Fs(If)37 b(on,)j(the)c(system)g(will)i(ask)f(befor)n(e)f
(loading)h(modules)f(that)h(ar)n(e)g(ar)n(guments)g(to)f(the)310
4708 y Fo(,open)21 b Fs(command.)28 b Fo(Ask-before-load)o(in)o(g)17
b Fs(is)22 b(of)n(f)i(by)e(default.)476 4919 y Fo(>)54
b(,set)e(ask-before-loadi)o(ng)476 5037 y(will)g(ask)i(before)d
(loading)h(modules)476 5154 y(>)i(,open)e(random)476
5272 y(Load)g(structure)f(random)h(\(y/n\)?)f(y)476 5389
y(>)128 5596 y(load-noisily)310 5709 y Fs(When)27 b(on,)h(the)f(system)
e(will)k(print)e(out)g(the)f(names)i(of)f(modules)g(and)g(\002les)g(as)
h(they)e(ar)n(e)310 5822 y(loaded.)h Fo(load-noisily)18
b Fs(is)k(of)n(f)i(by)e(default.)1750 6071 y(1)-5 b(1)p
eop
%%Page: 12 18
12 17 bop 559 573 a Fo(>)54 b(,set)e(load-noisily)559
686 y(will)g(notify)g(when)h(loading)e(modules)h(and)h(files)559
799 y(>)h(,open)e(random)559 912 y([random)f(/usr/local/lib/)o(sc)o(he)
o(me)o(48/)o(bi)o(g/)o(ra)o(nd)o(om.)o(sc)o(m])559 1025
y(>)211 1212 y(inline-values)393 1325 y Fs(This)21 b(contr)n(ols)g
(whether)f(or)h(not)f(the)h(compiler)h(is)f(allowed)g(to)g(substitute)e
(variables')k(val-)393 1438 y(ues)j(in-line.)41 b(When)25
b Fo(inline-values)c Fs(mode)26 b(is)g(on,)h(some)f(Scheme)g(pr)n
(ocedur)n(es)f(will)393 1551 y(be)19 b(substituted)e(in-line;)k(when)e
(it)g(is)h(of)n(f,)g(none)e(will.)28 b(Section)19 b(2.4)h(has)f(mor)n
(e)g(information.)166 1850 y Fl(3.7)119 b(Inspection)30
b(mode)166 2061 y Fs(Ther)n(e)e(is)h(a)g(data)g(inspector)e(available)
32 b(via)e(the)e Fo(,inspect)d Fs(and)k Fo(,debug)d Fs(commands)j(or)f
(by)166 2173 y(setting)21 b(the)g Fo(inspect-focus-)o(val)o(ue)15
b Fs(switch.)28 b(The)21 b(inspector)g(is)h(particularly)i(useful)d
(with)166 2286 y(pr)n(ocedur)n(es,)j(continuations,)h(and)h(r)n(ecor)n
(ds.)35 b(The)25 b(command)h(pr)n(ocessor)d(can)k(be)e(taken)g(out)f
(of)166 2399 y(inspection)19 b(mode)g(by)h(using)g(the)f
Fo(q)h Fs(command,)g(by)g(unsetting)e(the)i Fo(inspect-focus-)o(va)o
(lu)o(e)166 2512 y Fs(switch,)34 b(or)d(by)h(going)f(to)h(a)g(command)h
(level)f(wher)n(e)f(the)g Fo(inspect-focus-va)o(lu)o(e)26
b Fs(is)32 b(not)166 2625 y(set.)60 b(When)34 b(in)g(inspection)f
(mode,)j(input)d(that)h(begins)f(with)h(a)g(letter)f(or)g(digit)h(is)g
(r)n(ead)g(as)g(a)166 2738 y(command,)24 b(not)e(as)h(an)h(expr)n
(ession.)j(T)-8 b(o)22 b(see)g(the)g(value)i(of)f(a)h(variable)h(or)d
(number)-7 b(,)23 b(do)g Fo(\(begin)166 2851 y Fr(exp)p
Fo(\))h Fs(or)e(use)f(the)h Fo(,run)53 b Fr(exp)24 b
Fs(command.)307 2964 y(In)i(inspection)g(mode)f(the)h(command)h(pr)n
(ocessor)e(prints)g(out)h(a)h(menu)f(of)g(selectable)g(com-)166
3077 y(ponents)d(for)j(the)f(curr)n(ent)g(focus)g(object.)36
b(T)-8 b(o)25 b(inspect)g(a)h(particular)g(component,)f(just)g(type)f
(the)166 3190 y(corr)n(esponding)g(number)j(in)g(the)e(menu.)39
b(That)26 b(component)f(becomes)h(the)g(new)f(focus)i(object.)166
3303 y(For)22 b(example:)331 3490 y Fo(>)54 b(,inspect)d('\(a)j(\(b)f
(c\))h(d\))331 3603 y(\(a)g(\(b)g(c\))f(d\))331 3829
y([0])h(a)331 3942 y([1])g(\(b)f(c\))331 4055 y([2])h(d)331
4168 y(:)g(1)331 4281 y(\(b)g(c\))331 4506 y([0])g(b)331
4619 y([1])g(c)331 4732 y(:)307 4920 y Fs(When)24 b(a)i(new)e(focus)h
(object)f(is)h(selected)f(the)g(pr)n(evious)g(one)g(is)h(pushed)e(onto)
h(a)h(stack.)34 b(Y)-8 b(ou)166 5033 y(can)30 b(pop)e(the)h(stack,)h(r)
n(everting)e(to)h(the)f(pr)n(evious)g(object,)j(with)e(the)f
Fo(u)h Fs(command,)i(or)e(use)f(the)166 5146 y Fo(stack)20
b Fs(command)k(to)e(move)g(to)g(an)h(earlier)g(object.)307
5259 y(Commands)g(useful)f(when)g(in)h(inspection)f(mode:)302
5446 y Fk(\017)46 b Fo(u)23 b Fs(\(up\))f(pop)g(object)g(stack)302
5634 y Fk(\017)46 b Fo(m)23 b Fs(\(mor)n(e\))g(print)f(mor)n(e)g(of)h
(a)g(long)f(menu)302 5822 y Fk(\017)46 b Fo(\(...\))26
b Fs(evaluate)d(a)g(form)g(and)g(select)f(r)n(esult)1831
6071 y(12)p eop
%%Page: 13 19
13 18 bop 219 573 a Fk(\017)46 b Fo(q)23 b Fs(quit)219
758 y Fk(\017)46 b Fo(template)26 b Fs(select)h(a)j(closur)n(e)e(or)h
(continuation's)f(template)g(\(T)-8 b(emplates)28 b(ar)n(e)h(the)f
(static)310 871 y(components)h(of)i(pr)n(ocedur)n(es;)h(these)d(ar)n(e)
i(found)f(inside)g(of)h(pr)n(ocedur)n(es)d(and)j(continu-)310
984 y(ations,)f(and)e(contain)h(the)e(quoted)g(constants)g(and)h
(top-level)g(variables)i(r)n(eferr)n(ed)d(to)h(by)310
1097 y(byte-compiled)22 b(code.\))219 1283 y Fk(\017)46
b Fo(d)23 b Fs(\(down\))f(move)g(to)g(the)g(next)g(continuation)g
(\(curr)n(ent)h(object)f(must)g(be)h(a)g(continuation\))219
1468 y Fk(\017)46 b Fo(menu)21 b Fs(print)h(the)g(selection)g(menu)g
(for)h(the)f(focus)g(object)224 1651 y(Multiple)33 b(selection)f
(commands)h(\()p Fo(u)p Fs(,)i Fo(d)p Fs(,)g(and)e(menu)f(indexes\))g
(may)h(be)g(put)f(on)g(a)i(single)83 1764 y(line.)224
1877 y(All)26 b(or)n(dinary)f(commands)h(ar)n(e)g(available)i(when)d
(in)h(inspection)e(mode.)35 b(Similarly)-10 b(,)28 b(the)c(in-)83
1990 y(spection)d(commands)i(can)h(be)e(used)f(when)h(not)g(in)h
(inspection)f(mode.)27 b(For)22 b(example:)248 2172 y
Fo(>)54 b(\(list)f('a)g('\(b)h(c\))f('d\))248 2285 y('\(a)h(\(b)f(c\))h
(d\))248 2398 y(>)g(,1)248 2511 y('\(b)g(c\))248 2624
y(>)g(,menu)248 2737 y([0])g(b)248 2849 y([1])g(c)248
2962 y(>)224 3145 y Fs(If)19 b(the)e(curr)n(ent)h(command)h(level)g
(was)g(initiated)f(because)g(of)h(a)g(br)n(eakpoint)f(in)g(the)g(next)g
(level)83 3258 y(down,)26 b(then)f Fo(,debug)f Fs(will)j(invoke)f(the)g
(inspector)f(on)h(the)f(continuation)h(at)h(the)e(point)h(of)g(the)83
3371 y(err)n(or)-7 b(.)52 b(The)30 b Fo(u)g Fs(and)h
Fo(d)f Fs(\(up)h(and)f(down\))g(commands)h(then)f(make)h(the)f
(inspected-value)f(stack)83 3484 y(look)d(like)g(a)h(conventional)g
(stack)f(debugger)-7 b(,)25 b(with)i(continuations)f(playing)g(the)g(r)
n(ole)g(of)g(stack)83 3596 y(frames.)j Fo(D)23 b Fs(goes)e(to)i(older)f
(or)h(deeper)d(continuations)j(\(frames\),)g(and)g Fo(u)g
Fs(goes)f(back)h(up)g(to)f(mor)n(e)83 3709 y(r)n(ecent)g(ones.)83
4007 y Fl(3.8)119 b(Command)31 b(programs)83 4218 y Fs(The)21
b Fo(exec)e Fs(package)i(contains)h(pr)n(ocedur)n(es)d(that)i(ar)n(e)h
(used)e(to)h(execute)e(the)i(command)h(pr)n(oces-)83
4331 y(sor)7 b('s)22 b(commands.)31 b(A)24 b(command)g
Fo(,)p Fr(foo)g Fs(is)g(executed)e(by)h(applying)g(the)g(value)i(of)e
(the)g(identi\002er)83 4444 y Fr(foo)h Fs(in)f(the)f
Fo(exec)f Fs(package)h(to)g(the)g(\(suitably)h(parsed\))e(command)j(ar)
n(guments.)128 4650 y Fo(,exec)53 b([)p Fr(command)p
Fo(])310 4763 y Fs(Evaluate)23 b Fr(command)g Fs(in)g(the)f
Fo(exec)f Fs(package.)27 b(For)22 b(example,)h(use)476
4949 y Fo(,exec)52 b(,load)g Fr(\002lename)310 5134 y
Fs(to)27 b(load)g(a)g(\002le)g(containing)h(commands.)41
b(If)27 b(no)f Fr(command)h Fs(is)g(given,)h(the)e Fo(exec)f
Fs(package)310 5247 y(becomes)d(the)g(execution)g(package)g(for)g
(futur)n(e)g(commands.)224 5453 y(The)g(r)n(equir)n(ed)g(ar)n(gument)g
(types)f(ar)n(e)i(as)g(follows:)219 5636 y Fk(\017)46
b Fs(\002lenames)23 b(should)e(be)i(strings)219 5822
y Fk(\017)46 b Fs(other)22 b(names)g(and)h(identi\002ers)e(should)h(be)
g(symbols)1748 6071 y(13)p eop
%%Page: 14 20
14 19 bop 302 573 a Fk(\017)46 b Fs(expr)n(essions)21
b(should)g(be)i(s-expr)n(essions)302 771 y Fk(\017)46
b Fs(commands)g(\(as)h(for)f Fo(,config)c Fs(and)k Fo(,exec)e
Fs(itself\))i(should)f(be)h(lists)g(of)g(the)f(form)393
884 y Fo(\()p Fr(command-name)55 b(ar)n(gument)g(...)p
Fo(\))27 b Fs(wher)n(e)22 b Fr(command-name)h Fs(is)g(a)g(symbol.)307
1083 y(For)f(example,)g(the)g(following)h(two)f(commands)h(ar)n(e)g
(equivalent:)331 1284 y Fo(,config)52 b(,load)g(my-file.scm)331
1515 y(,exec)h(\(config)e('\(load)h("my-file.scm"\))o(\))307
1713 y Fs(The)27 b(\002le)h Fo(scheme/vm/load)o(-v)o(m.)o(scm)21
b Fs(in)28 b(the)e(sour)n(ce)h(dir)n(ectory)g(contains)g(an)h(example)
166 1826 y(of)23 b(an)g Fo(exec)e Fs(pr)n(ogram.)166
2141 y Fl(3.9)119 b(Building)30 b(images)211 2358 y Fo(,dump)53
b Fr(\002lename)i Fo([)p Fr(identi\002cation)p Fo(])393
2471 y Fs(W)-7 b(rites)32 b(the)g(curr)n(ent)g(heap)g(out)g(to)g(a)h
(\002le,)h(which)g(can)f(then)e(be)i(r)o(un)f(using)g(the)g(virtual)393
2584 y(machine.)k(The)24 b(new)g(image)h(\002le)g(includes)g(the)f
(command)h(pr)n(ocessor)-7 b(.)33 b(If)25 b(pr)n(esent,)e
Fr(iden-)393 2696 y(ti\002cation)i Fs(should)e(be)h(a)g(string)e
(\(written)h(with)h(double)f(quotes\);)f(this)h(string)g(will)i(be)e
(part)393 2809 y(of)g(the)f(gr)n(eeting)f(message)g(as)i(the)f(image)h
(starts)e(up.)211 3008 y Fo(,build)52 b Fr(exp)k(\002lename)393
3121 y Fs(Like)19 b Fo(,dump)p Fs(,)f(except)g(that)h(the)g(image)g
(\002le)h(contains)f(the)g(value)h(of)g Fr(exp)p Fs(,)h(which)f(should)
e(be)393 3234 y(a)23 b(pr)n(ocedur)n(e)d(of)i(one)f(ar)n(gument,)g
(instead)g(of)h(the)f(command)h(pr)n(ocessor)-7 b(.)26
b(When)21 b Fr(\002lename)393 3346 y Fs(is)29 b(r)n(esumed,)g(that)g
(pr)n(ocedur)n(e)f(will)i(be)f(invoked)f(on)h(the)f(VM's)h
Fo(-a)f Fs(ar)n(guments,)i(which)393 3459 y(ar)n(e)j(passed)e(as)h(a)h
(list)g(of)f(strings.)55 b(The)32 b(pr)n(ocedur)n(e)f(should)g(r)n
(eturn)h(an)h(integer)e(which)393 3572 y(is)d(r)n(eturned)f(to)g(the)g
(pr)n(ogram)h(that)g(invoked)f(the)g(VM.)h(The)f(command)i(pr)n
(ocessor)d(and)393 3685 y(debugging)h(system)f(ar)n(e)i(not)f(included)
h(in)g(the)f(image)i(\(unless)e(you)g(go)g(to)g(some)g(ef)n(fort)393
3798 y(to)22 b(pr)n(eserve)f(them,)h(such)h(as)f(r)n(etaining)h(a)g
(continuation\).)393 3954 y(Doing)k Fo(,flush)d Fs(befor)n(e)i
(building)i(an)f(image)g(will)h(r)n(educe)e(the)g(amount)g(of)h
(debugging)393 4067 y(information)34 b(in)g(the)e(image,)k(making)e
(for)f(a)g(smaller)h(image)g(\002le,)i(but)d(if)h(an)f(err)n(or)g(oc-)
393 4180 y(curs,)41 b(the)36 b(err)n(or)h(message)e(may)j(be)f(less)f
(helpful.)72 b(Doing)37 b Fo(,flush)52 b(source)g(maps)393
4292 y Fs(befor)n(e)31 b(loading)g(any)g(pr)n(ograms)f(used)g(in)h(the)
f(image)i(will)g(make)f(it)g(still)g(smaller)-7 b(.)54
b(See)393 4405 y(section)22 b(3.10)i(for)e(mor)n(e)h(information.)166
4721 y Fl(3.10)119 b(Resource)30 b(query)f(and)h(control)166
4937 y Fs(.)211 5163 y Fo(,time)53 b Fr(exp)393 5276
y Fs(Measur)n(e)22 b(execution)g(time.)211 5474 y Fo(,collect)393
5587 y Fs(Invoke)36 b(the)g(garbage)g(collector)-7 b(.)71
b(Or)n(dinarily)38 b(this)e(happens)g(automatically)-10
b(,)41 b(but)c(the)393 5700 y(command)23 b(tells)g(how)f(much)h(space)f
(is)h(available)j(befor)n(e)c(and)h(after)f(the)g(collection.)211
5898 y Fo(,keep)53 b Fr(kind)1831 6071 y Fs(14)p eop
%%Page: 15 21
15 20 bop 128 573 a Fo(,flush)52 b Fr(kind)310 686 y
Fs(These)34 b(contr)n(ol)h(the)g(amount)g(of)g(debugging)f(information)
h(r)n(etained)g(after)g(compiling)310 799 y(pr)n(ocedur)n(es.)26
b(This)21 b(information)i(can)f(consume)f(a)h(fair)h(amount)e(of)h
(space.)27 b Fr(kind)c Fs(is)e(one)g(of)310 912 y(the)h(following:)419
1144 y Fk(\017)46 b Fo(maps)21 b Fs(-)i(envir)n(onment)f(maps)h
(\(local)h(variable)h(names,)d(for)h(inspector\))419
1313 y Fk(\017)46 b Fo(source)20 b Fs(-)j(sour)n(ce)f(code)g(for)h
(continuations)f(\(displayed)f(by)i(inspector\))419 1481
y Fk(\017)46 b Fo(names)21 b Fs(-)i(pr)n(ocedur)n(e)e(names)i(\(as)g
(displayed)e(by)i Fo(write)d Fs(and)j(in)g(err)n(or)f(messages\))419
1650 y Fk(\017)46 b Fo(files)21 b Fs(-)i(sour)n(ce)f(\002le)g(names)310
1882 y(These)32 b(commands)h(r)n(efer)g(to)f(futur)n(e)h(compilations)h
(only)-10 b(,)35 b(not)d(to)h(pr)n(ocedur)n(es)e(that)i(al-)310
1995 y(r)n(eady)25 b(exist.)34 b(T)-8 b(o)25 b(have)g(any)g(ef)n(fect,)
h(they)e(must)g(be)h(done)f(befor)n(e)h(pr)n(ograms)g(ar)n(e)g(loaded.)
310 2108 y(The)d(default)h(is)f(to)g(keep)f(all)j(four)f(types.)128
2341 y Fo(,flush)310 2454 y Fs(The)28 b(\003ush)g(command)h(with)f(no)g
(ar)n(gument)g(deletes)e(the)h(database)i(of)f(names)g(of)g(initial)310
2566 y(pr)n(ocedur)n(es.)60 b(Doing)34 b Fo(,flush)e
Fs(befor)n(e)h(a)i Fo(,build)c Fs(or)j Fo(,dump)d Fs(will)36
b(make)d(the)g(r)n(esult-)310 2679 y(ing)24 b(image)g(signi\002cantly)g
(smaller)-7 b(,)24 b(but)g(will)h(compr)n(omise)e(the)g(information)h
(content)e(of)310 2792 y(many)h(err)n(or)f(messages.)83
3160 y Fl(3.1)l(1)118 b(Threads)83 3393 y Fs(Each)24
b(command)g(level)g(has)g(its)f(own)h(set)e(of)i(thr)n(eads.)30
b(These)22 b(thr)n(eads)g(ar)n(e)i(suspended)d(when)i(a)83
3506 y(new)j(level)h(is)g(enter)n(ed)e(and)i(r)n(esumed)e(when)h(the)g
(owning)g(level)h(again)h(becomes)e(the)g(curr)n(ent)83
3619 y(level.)i(A)21 b(thr)n(ead)h(that)f(raises)g(an)h(err)n(or)f(is)h
(not)f(r)n(esumed)f(unless)h(explicitly)h(r)n(estarted)e(using)h(the)83
3732 y Fo(,proceed)f Fs(command.)30 b(In)23 b(addition)g(to)f(any)i
(thr)n(eads)e(spawned)g(by)h(the)f(user)-7 b(,)23 b(each)g(level)h(has)
83 3845 y(a)i(thr)n(ead)f(that)h(r)o(uns)f(the)g(command)h(pr)n
(ocessor)e(on)i(that)f(level.)38 b(A)25 b(new)g(command-pr)n(ocessor)83
3958 y(thr)n(ead)k(is)h(started)e(if)j(the)e(curr)n(ent)g(one)g(dies)g
(or)h(is)g(terminated.)48 b(When)29 b(a)h(command)h(level)f(is)83
4071 y(abandoned)j(for)h(a)h(lower)e(level,)k(or)c(when)h(a)g(level)g
(is)g(r)n(estarted)f(using)g Fo(,reset)p Fs(,)h(all)h(of)f(the)83
4184 y(thr)n(eads)22 b(on)g(that)g(level)h(ar)n(e)g(terminated)f(and)h
(any)f Fo(dynamic-wind)c Fs(\223after)7 b(\224)23 b(thunks)e(ar)n(e)i
(r)o(un.)224 4308 y(The)f(following)h(commands)g(ar)n(e)g(useful)f
(when)g(debugging)f(multithr)n(eaded)g(pr)n(ograms:)128
4540 y Fo(,resume)52 b([)p Fr(number)p Fo(])310 4653
y Fs(Pops)24 b(out)g(to)g(a)h(given)g(level)g(and)g(r)n(esumes)e(r)o
(unning)h(all)j(thr)n(eads)c(at)i(that)g(level.)34 b
Fr(Number)310 4766 y Fs(defaults)22 b(to)g(zer)n(o.)128
4999 y Fo(,threads)310 5112 y Fs(Invokes)c(the)g(inspector)f(on)i(a)h
(list)f(of)g(the)f(thr)n(eads)g(r)o(unning)h(at)g(the)f(next)g(lower)h
(command)310 5225 y(level.)128 5457 y Fo(,exit-when-done)48
b([)p Fr(exp)p Fo(])310 5570 y Fs(W)-8 b(aits)26 b(until)h(all)h(user)d
(thr)n(eads)g(have)i(completed)e(and)i(then)e(exits)h(back)h(out)e(to)h
(shell)g(\(or)310 5683 y(executive)18 b(or)f(whatever)h(invoked)f
(Scheme)h(48)h(in)f(the)g(\002rst)f(place\).)27 b Fr(Exp)19
b Fs(should)e(evaluate)310 5796 y(to)22 b(an)h(integer)f(which)h(is)g
(then)e(r)n(eturned)g(to)h(the)g(calling)i(pr)n(ogram.)1748
6071 y(15)p eop
%%Page: 16 22
16 21 bop 166 573 a Fl(3.12)119 b(Quite)29 b(obscure)211
784 y Fo(,go)54 b Fr(exp)393 897 y Fs(This)33 b(is)h(like)g
Fo(,exit)52 b Fr(exp)35 b Fs(except)d(that)h(the)g(evaluation)h(of)f
Fr(exp)i Fs(is)f(tail-r)n(ecursive)g(with)393 1010 y(r)n(espect)h(to)g
(the)g(command)h(pr)n(ocessor)-7 b(.)65 b(This)36 b(means)f(that)h(the)
f(command)h(pr)n(ocessor)393 1123 y(itself)23 b(can)h(pr)n(obably)g(be)
f(GC'ed,)g(should)f(a)i(garbage)f(collection)g(occur)g(in)h(the)e
(execution)393 1235 y(of)h Fr(exp)p Fs(.)29 b(If)23 b(an)g(err)n(or)f
(occurs)g(Scheme)g(48)i(will)g(exit)e(with)h(a)g(non-zer)n(o)f(value.)
211 1423 y Fo(,translate)50 b Fr(fr)n(om)56 b(to)393
1536 y Fs(For)31 b Fo(load)g Fs(and)h(the)f Fo(,load)e
Fs(command)k(\(but)f(not)f(for)h Fo(open-)p Fk(f)p Fo(in|out)p
Fk(g)p Fo(put-f)o(il)o(e)p Fs(\),)393 1649 y(\002le)23
b(names)g(beginning)f(with)h(the)f(string)f Fr(fr)n(om)j
Fs(will)g(be)f(changed)f(so)g(that)g(the)g(initial)j
Fr(fr)n(om)393 1762 y Fs(is)e(r)n(eplaced)g(by)f(the)g(string)g
Fr(to)p Fs(.)28 b(E.g.)559 1949 y Fo(,translate)50 b(/usr/gjc/)g
(/zu/gjc/)393 2137 y Fs(will)32 b(cause)e Fo(\(load)52
b("/usr/gjc/foo.s)o(cm)o("\))24 b Fs(to)29 b(have)i(the)e(same)h(ef)n
(fect)g(as)g Fo(\(load)393 2250 y("/zu/gjc/foo.sc)o(m"\))o
Fs(.)211 2438 y Fo(,from-file)50 b Fr(\002lename)56 b(form)f
Fo(...)e(,end)393 2551 y Fs(This)24 b(is)g(used)e(by)i(the)f
Fo(cmuscheme48)18 b Fs(Emacs)24 b(library)h(to)e(indicate)i(the)d
(\002le)i(fr)n(om)h(which)393 2663 y(the)i Fr(form)p
Fs(s)h(came.)43 b Fr(Filename)28 b Fs(is)g(then)f(used)f(by)h(the)g
(command)h(pr)n(ocessor)e(to)h(determine)393 2776 y(the)22
b(package)g(in)h(which)h(the)d Fr(form)p Fs(s)i(ar)n(e)g(to)f(be)h
(evaluated.)1831 6071 y(16)p eop
%%Page: 17 23
17 22 bop 83 1196 a Fn(Chapter)44 b(4)83 1611 y Fq(Module)52
b(system)83 2073 y Fs(This)34 b(chapter)f(describes)g(Scheme)g(48's)i
(module)e(system.)60 b(The)33 b(module)g(system)g(is)h(unique)83
2186 y(in)g(the)e(extent)g(to)h(which)h(it)f(supports)e(both)i(static)h
(linking)g(and)f(rapid)g(turnar)n(ound)g(during)83 2298
y(pr)n(ogram)27 b(development.)42 b(The)26 b(design)h(was)g
(in\003uenced)g(by)h(Standar)n(d)f(ML)h(modules[7)o(])g(and)83
2411 y(by)g(the)f(module)g(system)f(for)i(Scheme)f(Xer)n(ox[4].)44
b(It)27 b(has)h(also)g(been)f(shaped)f(by)i(the)f(needs)f(of)83
2524 y(Scheme)18 b(48,)i(which)f(is)f(designed)e(to)i(r)o(un)g(both)g
(on)g(workstations)e(and)j(on)f(r)n(elatively)h(small)h(\(less)83
2637 y(than)j(1)g(Mbyte\))f(embedded)e(contr)n(ollers.)224
2750 y(Except)h(wher)n(e)h(noted,)e(everything)h(described)g(her)n(e)g
(is)i(implemented)e(in)h(Scheme)g(48,)h(and)83 2863 y(exer)n(cised)e
(by)i(the)f(Scheme)g(48)i(implementation)e(and)h(some)e(application)j
(pr)n(ograms.)224 2976 y(Unlike)e(the)f(Common)h(Lisp)f(package)g
(system,)f(the)h(module)g(system)f(described)h(her)n(e)g(con-)83
3089 y(tr)n(ols)h(the)g(mapping)h(of)f(names)h(to)f(denotations,)e(not)
i(the)g(mapping)h(of)f(strings)f(to)h(symbols.)83 3389
y Fl(4.1)119 b(Introduction)83 3600 y Fs(The)26 b(module)f(system)f
(supports)g(the)h(str)o(uctur)n(ed)g(division)i(of)f(a)h(corpus)e(of)h
(Scheme)g(softwar)n(e)83 3713 y(into)d(a)h(set)f(of)g(modules.)30
b(Each)24 b(module)e(has)i(its)f(own)g(isolated)g(namespace,)g(with)h
(visibility)h(of)83 3826 y(bindings)c(contr)n(olled)f(by)h(module)f
(descriptions)g(written)f(in)j(a)f(special)h Fr(con\002guration)g
(language.)224 3939 y Fs(A)k(module)g(may)h(be)f(instantiated)g
(multiple)h(times,)f(pr)n(oducing)g(several)g Fr(packages)p
Fs(,)k(just)c(as)83 4052 y(a)31 b(lambda-expr)n(ession)e(can)i(be)f
(instantiated)f(multiple)i(times)e(to)g(pr)n(oduce)g(several)h(dif)n
(fer)n(ent)83 4165 y(pr)n(ocedur)n(es.)38 b(Since)27
b(single)f(instantiation)h(is)g(the)e(normal)j(case,)f(we)f(will)i
(defer)e(discussion)f(of)83 4277 y(multiple)33 b(instantiation)h(until)
f(a)h(later)f(section.)58 b(For)32 b(now)h(you)f(can)i(think)f(of)g(a)g
(package)g(as)83 4390 y(simply)23 b(a)g(module's)f(internal)h(envir)n
(onment)f(mapping)g(names)h(to)f(denotations.)224 4503
y(A)17 b(module)g(exports)e(bindings)i(by)g(pr)n(oviding)h(views)f
(onto)f(the)g(underlying)h(package.)25 b(Such)83 4616
y(a)19 b(view)f(is)h(called)g(a)g Fr(structur)n(e)h Fs(\(terminology)d
(fr)n(om)i(Standar)n(d)f(ML\).)g(One)g(module)g(may)h(pr)n(ovide)83
4729 y(several)32 b(dif)n(fer)n(ent)f(views.)55 b(A)32
b(str)o(uctur)n(e)f(is)g(just)h(a)g(subset)e(of)i(the)f(package's)g
(bindings.)55 b(The)83 4842 y(particular)24 b(set)d(of)i(names)f(whose)
g(bindings)g(ar)n(e)h(exported)d(is)j(the)f(str)o(uctur)n(e's)f
Fr(interface)p Fs(.)224 4955 y(A)c(module)g(imports)g(bindings)g(fr)n
(om)g(other)g(modules)f(by)h(either)f Fr(opening)j Fs(or)e
Fr(accessing)i Fs(some)83 5068 y(str)o(uctur)n(es)34
b(that)i(ar)n(e)g(built)h(on)e(other)g(packages.)67 b(When)35
b(a)i(str)o(uctur)n(e)d(is)i(opened,)h(all)g(of)f(its)83
5181 y(exported)20 b(bindings)i(ar)n(e)h(visible)h(in)f(the)f(client)h
(package.)224 5294 y(For)f(example:)248 5482 y Fo(\(define-structur)o
(e)48 b(foo)53 b(\(export)f(a)i(c)g(cons\))357 5595 y(\(open)f
(scheme\))357 5708 y(\(begin)f(\(define)g(a)i(1\))739
5822 y(\(define)e(\(b)h(x\))h(\(+)g(a)g(x\)\))1748 6071
y Fs(17)p eop
%%Page: 18 24
18 23 bop 822 573 a Fo(\(define)52 b(\(c)h(y\))h(\(*)g(\(b)f(a\))h
(y\)\)\)\))331 801 y(\(define-structur)o(e)48 b(bar)53
b(\(export)f(d\))440 915 y(\(open)h(scheme)f(foo\))440
1029 y(\(begin)g(\(define)g(\(d)h(w\))h(\(+)g(a)g(\(c)f(w\)\)\)\)\))166
1221 y Fs(This)19 b(con\002guration)g(de\002nes)f(two)h(str)o(uctur)n
(es,)f Fo(foo)h Fs(and)g Fo(bar)p Fs(.)26 b Fo(foo)18
b Fs(is)i(a)g(view)g(on)f(a)h(package)g(in)166 1334 y(which)g(the)e
Fo(scheme)f Fs(str)o(uctur)n(e's)h(bindings)h(\(including)h
Fo(define)c Fs(and)j Fo(+)p Fs(\))g(ar)n(e)h(visible,)h(together)166
1447 y(with)35 b(bindings)g(for)g Fo(a)p Fs(,)i Fo(b)p
Fs(,)g(and)e Fo(c)p Fs(.)65 b Fo(foo)p Fs('s)33 b(interface)j(is)f
Fo(\(export)51 b(a)j(c)g(cons\))p Fs(,)36 b(so)e(of)h(the)166
1559 y(bindings)23 b(in)h(its)g(underlying)e(package,)h
Fo(foo)f Fs(only)h(exports)f(those)g(thr)n(ee.)29 b(Similarly)-10
b(,)25 b(str)o(uctur)n(e)166 1672 y Fo(bar)j Fs(consists)f(of)i(the)f
(binding)h(of)g Fo(d)f Fs(fr)n(om)h(a)h(package)e(in)h(which)h(both)e
Fo(scheme)p Fs('s)e(and)j Fo(foo)p Fs('s)166 1785 y(bindings)h(ar)n(e)h
(visible.)52 b Fo(foo)p Fs('s)29 b(binding)h(of)h Fo(cons)d
Fs(is)j(imported)e(fr)n(om)i(the)e(Scheme)h(str)o(uctur)n(e)166
1898 y(and)23 b(then)e(r)n(e-exported.)307 2012 y(A)32
b(module's)g(body)-10 b(,)33 b(the)e(part)h(following)h
Fo(begin)d Fs(in)j(the)e(above)i(example,)h(is)e(evaluated)166
2125 y(in)38 b(an)f(isolated)g(lexical)i(scope)d(completely)g
(speci\002ed)g(by)h(the)g(package)g(de\002nition's)f
Fo(open)166 2238 y Fs(and)e Fo(access)d Fs(clauses.)62
b(In)34 b(particular)-7 b(,)38 b(the)33 b(binding)h(of)g(the)g
(syntactic)g(operator)e Fo(define-)166 2351 y(structure)h
Fs(is)j(not)g(visible)i(unless)e(it)g(comes)h(fr)n(om)g(some)e(opened)g
(str)o(uctur)n(e.)69 b(Similarly)-10 b(,)166 2464 y(bindings)25
b(fr)n(om)h(the)f Fo(scheme)e Fs(str)o(uctur)n(e)i(ar)n(en't)g(visible)
i(unless)e(they)f(become)h(so)g(by)h Fo(scheme)166 2577
y Fs(\(or)d(an)g(equivalent)f(str)o(uctur)n(e\))g(being)h(opened.)166
2882 y Fl(4.2)119 b(The)29 b(con\002guration)i(language)166
3095 y Fs(The)c(con\002guration)g(language)g(consists)g(of)g(top-level)
h(de\002ning)e(forms)i(for)f(modules)g(and)g(in-)166
3208 y(terfaces.)g(Its)22 b(syntax)f(is)i(given)g(in)g(\002gur)n(e)f
(4.2.)307 3322 y(A)33 b Fo(define-structur)o(e)27 b Fs(form)34
b(intr)n(oduces)e(a)i(binding)f(of)g(a)h(name)f(to)g(a)h(str)o(uctur)n
(e.)58 b(A)166 3435 y(str)o(uctur)n(e)19 b(is)g(a)h(view)g(on)g(an)g
(underlying)e(package)h(which)h(is)g(cr)n(eated)f(accor)n(ding)i(to)e
(the)f(clauses)166 3548 y(of)j(the)f Fo(define-structur)o(e)15
b Fs(form.)27 b(Each)21 b(str)o(uctur)n(e)f(has)h(an)g(interface)g
(that)g(speci\002es)f(which)166 3661 y(bindings)k(in)g(the)f(str)o
(uctur)n(e's)g(underlying)g(package)g(can)i(be)f(seen)e(via)k(that)d
(str)o(uctur)n(e)g(in)h(other)166 3774 y(packages.)307
3888 y(An)32 b Fo(open)e Fs(clause)j(speci\002es)e(which)h(str)o(uctur)
n(es)f(will)i(be)f(opened)e(up)i(for)g(use)f(inside)h(the)166
4001 y(new)25 b(package.)35 b(At)25 b(least)g(one)g(str)o(uctur)n(e)f
(must)g(be)i(speci\002ed)e(or)h(else)f(it)i(will)g(be)g(impossible)f
(to)166 4113 y(write)c(any)h(useful)g(pr)n(ograms)f(inside)h(the)f
(package,)g(since)h Fo(define)p Fs(,)d Fo(lambda)p Fs(,)g
Fo(cons)p Fs(,)i(etc.)g(will)166 4226 y(be)31 b(unavailable.)56
b(Packages)30 b(typically)i(include)f Fo(scheme)p Fs(,)f(which)i
(exports)c(all)33 b(bindings)e(ap-)166 4339 y(pr)n(opriate)24
b(to)h(Revised)991 4306 y Fm(5)1054 4339 y Fs(Scheme,)g(in)g(an)h
Fo(open)d Fs(clause.)35 b(For)24 b(building)i(str)o(uctur)n(es)d(that)i
(export)166 4452 y(str)o(uctur)n(es,)f(ther)n(e)g(is)h(a)h
Fo(defpackage)20 b Fs(package)25 b(that)g(exports)e(the)h(operators)f
(of)i(the)g(con\002gu-)166 4565 y(ration)k(language.)47
b(Many)29 b(other)f(str)o(uctur)n(es,)h(such)g(as)g(r)n(ecor)n(d)g(and)
g(hash)g(table)h(facilities,)i(ar)n(e)166 4678 y(also)23
b(available)i(in)f(the)d(Scheme)h(48)i(implementation.)307
4792 y(The)k Fo(modify)p Fs(,)g Fo(subset)p Fs(,)g(and)h
Fo(prefix)d Fs(forms)j(pr)n(oduce)f(new)h(views)f(on)h(existing)f(str)o
(uc-)166 4905 y(tur)n(es)h(by)h(r)n(enaming)h(or)f(hiding)g(exported)e
(names.)51 b Fo(Subset)28 b Fs(r)n(eturns)h(a)i(new)e(str)o(uctur)n(e)g
(that)166 5018 y(exports)e(only)i(the)f(listed)g(names)h(fr)n(om)h(its)
f Fk(h)p Fs(str)o(uctur)n(e)p Fk(i)f Fs(ar)n(gument.)47
b Fo(With-prefix)24 b Fs(r)n(eturns)166 5131 y(a)32 b(new)e(str)o
(uctur)n(e)g(that)h(adds)g Fk(h)p Fs(pr)n(e\002x)p Fk(i)g
Fs(to)f(each)i(of)f(the)f(names)h(exported)e(by)i(the)g
Fk(h)p Fs(str)o(uctur)n(e)p Fk(i)166 5244 y Fs(ar)n(gument.)c(For)22
b(example,)g(if)i(str)o(uctur)n(e)d Fo(s)i Fs(exports)d
Fo(a)j Fs(and)f Fo(b)p Fs(,)g(then)331 5437 y Fo(\(subset)52
b(s)i(\(a\)\))166 5629 y Fs(exports)21 b(only)h Fo(a)g
Fs(and)331 5822 y Fo(\(with-prefix)49 b(s)55 b(p/\))1831
6071 y Fs(18)p eop
%%Page: 19 25
19 24 bop 83 561 a Fk(h)p Fs(con\002guration)p Fk(i)23
b(\000)-16 b(!)23 b(h)p Fs(de\002nition)p Fk(i)1352 528
y Fi(\003)83 673 y Fk(h)p Fs(de\002nition)p Fk(i)g(\000)-16
b(!)45 b Fo(\(define-structur)o(e)j Fk(h)p Fs(name)p
Fk(i)56 b(h)p Fs(interface)p Fk(i)f(h)p Fs(clause)p Fk(i)2883
640 y Fi(\003)2922 673 y Fo(\))690 786 y Fk(j)45 b Fo
(\(define-structur)o(es)j(\(\()p Fk(h)p Fs(name)p Fk(i)54
b(h)p Fs(interface)p Fk(i)q Fo(\))2727 753 y Fi(\003)2766
786 y Fo(\))g Fk(h)p Fs(clause)p Fk(i)3195 753 y Fi(\003)3235
786 y Fo(\))690 899 y Fk(j)45 b Fo(\(define-interfac)o(e)j
Fk(h)p Fs(name)p Fk(i)56 b(h)p Fs(interface)p Fk(i)q
Fo(\))690 1012 y Fk(j)45 b Fo(\(define-syntax)k Fk(h)p
Fs(name)p Fk(i)55 b(h)p Fs(transformer)n(-spec)p Fk(i)p
Fo(\))83 1125 y Fk(h)p Fs(clause)p Fk(i)24 b(\000)-16
b(!)46 b Fo(\(open)52 b Fk(h)p Fs(str)o(uctur)n(e)p Fk(i)1376
1092 y Fi(\003)1416 1125 y Fo(\))547 1238 y Fk(j)46 b
Fo(\(access)51 b Fk(h)p Fs(name)p Fk(i)1347 1205 y Fi(\003)1386
1238 y Fo(\))547 1351 y Fk(j)46 b Fo(\(begin)51 b Fk(h)p
Fs(pr)n(ogram)p Fk(i)q Fo(\))547 1464 y Fk(j)46 b Fo(\(files)51
b Fk(h)p Fs(\002lespec)p Fk(i)1372 1431 y Fi(\003)1412
1464 y Fo(\))547 1577 y Fk(j)46 b Fo(\(optimize)k Fk(h)p
Fs(optimize-spec)p Fk(i)1797 1544 y Fi(\003)1837 1577
y Fo(\))547 1690 y Fk(j)c Fo(\(for-syntax)j Fk(h)p Fs(clause)p
Fk(i)1592 1657 y Fi(\003)1631 1690 y Fo(\))83 1803 y
Fk(h)p Fs(interface)p Fk(i)24 b(\000)-16 b(!)45 b Fo(\(export)52
b Fk(h)p Fs(item)p Fk(i)1403 1770 y Fi(\003)1443 1803
y Fo(\))646 1915 y Fk(j)45 b(h)p Fs(name)p Fk(i)646 2028
y(j)g Fo(\(compound-interf)o(ac)o(e)j Fk(h)p Fs(interface)p
Fk(i)2226 1995 y Fi(\003)2266 2028 y Fo(\))83 2141 y
Fk(h)p Fs(item)p Fk(i)23 b(\000)-15 b(!)45 b(h)p Fs(name)p
Fk(i)478 2254 y(j)g Fo(\()p Fk(h)p Fs(name)p Fk(i)55
b(h)p Fs(type)p Fk(i)o Fo(\))478 2367 y Fk(j)45 b Fo(\(\()p
Fk(h)p Fs(name)p Fk(i)950 2334 y Fi(\003)990 2367 y Fo(\))54
b Fk(h)p Fs(type)p Fk(i)o Fo(\))83 2480 y Fk(h)p Fs(str)o(uctur)n(e)p
Fk(i)22 b(\000)-15 b(!)45 b(h)p Fs(name)p Fk(i)658 2593
y(j)h Fo(\(modify)52 b Fk(h)p Fs(str)o(uctur)n(e)p Fk(i)i(h)p
Fs(modi\002er)p Fk(i)2069 2560 y Fi(\003)2108 2593 y
Fo(\))658 2706 y Fk(j)46 b Fo(\(subset)52 b Fk(h)p Fs(str)o(uctur)n(e)p
Fk(i)i Fo(\()p Fk(h)p Fs(name)p Fk(i)1999 2673 y Fi(\003)2038
2706 y Fo(\)\))658 2819 y Fk(j)46 b Fo(\(with-prefix)j
Fk(h)p Fs(str)o(uctur)n(e)p Fk(i)54 b(h)p Fs(name)p Fk(i)q
Fo(\))83 2932 y Fk(h)p Fs(modi\002er)p Fk(i)23 b(\000)-16
b(!)46 b Fo(\(expose)51 b Fk(h)p Fs(name)p Fk(i)1444
2899 y Fi(\003)1483 2932 y Fo(\))644 3045 y Fk(j)46 b
Fo(\(hide)52 b Fk(h)p Fs(name)p Fk(i)1335 3012 y Fi(\003)1374
3045 y Fo(\))644 3157 y Fk(j)46 b Fo(\(rename)51 b(\()p
Fk(h)p Fs(name)p Fk(i)1499 3171 y Fm(0)1593 3157 y Fk(h)p
Fs(name)p Fk(i)1885 3171 y Fm(1)1925 3157 y Fo(\))1980
3125 y Fi(\003)2019 3157 y Fo(\))644 3270 y Fk(j)46 b
Fo(\(alias)52 b(\()p Fk(h)p Fs(name)p Fk(i)1444 3284
y Fm(0)1538 3270 y Fk(h)p Fs(name)p Fk(i)1831 3284 y
Fm(1)1870 3270 y Fo(\))1925 3237 y Fi(\003)1964 3270
y Fo(\))644 3383 y Fk(j)46 b Fo(\(prefix)51 b Fk(h)p
Fs(name)p Fk(i)q Fo(\))1003 3792 y Fs(Figur)n(e)22 b(4.1:)28
b(The)22 b(con\002guration)g(language.)83 4077 y(exports)f
Fo(a)h Fs(as)h Fo(p/a)e Fs(and)i Fo(b)f Fs(as)h Fo(p/b)p
Fs(.)224 4192 y(Both)40 b Fo(subset)f Fs(and)j Fo(with-prefix)36
b Fs(ar)n(e)42 b(simple)g(macr)n(os)g(that)f(expand)g(into)g(uses)f(of)
83 4304 y Fo(modify)p Fs(,)g(a)f(mor)n(e)f(general)g(r)n(enaming)h
(form.)76 b(In)39 b(a)g Fo(modify)d Fs(str)o(uctur)n(e)h
(speci\002cation)i(the)83 4417 y Fk(h)p Fs(command)p
Fk(i)q Fs(s)29 b(ar)n(e)g(applied)g(to)f(the)g(names)h(exported)d(by)j
Fk(h)p Fs(str)o(uctur)n(e)p Fk(i)f Fs(to)h(pr)n(oduce)f(a)h(new)f(set)
83 4530 y(of)d(names)f(for)h(the)f Fk(h)p Fs(str)o(uctur)n(e)p
Fk(i)o Fs('s)h(bindings.)34 b Fo(Expose)22 b Fs(makes)i(only)h(the)f
(listed)g(names)g(visible.)83 4643 y Fo(Hide)i Fs(makes)g(all)j(but)e
(the)f(listed)h(names)g(visible.)43 b Fo(Rename)25 b
Fs(makes)h(each)i Fk(h)p Fs(name)p Fk(i)3062 4657 y Fm(0)3129
4643 y Fs(visible)g(as)83 4756 y Fk(h)p Fs(name)p Fk(i)376
4770 y Fm(1)442 4756 y Fs(name)e(and)g(not)g(visible)h(as)g
Fk(h)p Fs(name)p Fk(i)1722 4770 y Fm(0)1787 4756 y Fs(,)g(while)g
Fo(alias)d Fs(makes)i(each)g Fk(h)p Fs(name)p Fk(i)3174
4770 y Fm(0)3240 4756 y Fs(visible)83 4869 y(as)20 b(both)f
Fk(h)p Fs(name)p Fk(i)682 4883 y Fm(0)741 4869 y Fs(and)h
Fk(h)p Fs(name)p Fk(i)1207 4883 y Fm(1)1247 4869 y Fs(.)27
b Fo(Prefix)17 b Fs(adds)h Fk(h)p Fs(name)p Fk(i)j Fs(to)e(the)g
(beginning)g(of)h(each)g(exported)83 4982 y(name.)28
b(The)22 b(modi\002ers)g(ar)n(e)h(applied)f(fr)n(om)h(right)f(to)g
(left.)28 b(Thus)248 5176 y Fo(\(modify)52 b(scheme)g(\(prefix)f
(foo/\))h(\(rename)g(\(car)g(bus\)\)\)\))83 5369 y Fs(makes)22
b Fo(car)f Fs(available)26 b(as)d Fo(foo/bus)p Fs(..)224
5483 y(The)35 b(package's)g(body)g(is)h(speci\002ed)e(by)i
Fo(begin)e Fs(and/or)h Fo(files)f Fs(clauses.)67 b Fo(begin)33
b Fs(and)83 5596 y Fo(files)c Fs(have)j(the)f(same)g(semantics,)j
(except)c(that)h(for)h Fo(begin)d Fs(the)i(text)f(is)i(given)f(dir)n
(ectly)h(in)83 5709 y(the)27 b(package)h(de\002nition,)g(while)g(for)f
Fo(files)f Fs(the)h(text)g(is)h(stor)n(ed)e(somewher)n(e)g(in)i(the)f
(\002le)h(sys-)83 5822 y(tem.)49 b(The)29 b(body)f(consists)h(of)h(a)g
(Scheme)f(pr)n(ogram,)i(that)e(is,)j(a)e(sequence)e(of)i(de\002nitions)
e(and)1748 6071 y(19)p eop
%%Page: 20 26
20 25 bop 166 573 a Fs(expr)n(essions)23 b(to)h(be)h(evaluated)f(in)i
(or)n(der)-7 b(.)34 b(In)24 b(practice,)i(we)e(always)h(use)f
Fo(files)f Fs(in)i(pr)n(efer)n(ence)166 686 y(to)d Fo(begin)p
Fs(;)e Fo(begin)h Fs(exists)g(mainly)j(for)e(expository)f(purposes.)307
802 y(A)27 b(name's)h(imported)e(binding)h(may)h(be)f(lexically)i
(overridden)d(or)h Fr(shadowed)j Fs(by)d(de\002ning)166
915 y(the)21 b(name)h(using)f(a)h(de\002ning)f(form)h(such)f(as)h
Fo(define)d Fs(or)i Fo(define-syntax)p Fs(.)h(This)f(will)i(cr)n(eate)
166 1028 y(a)k(new)f(binding)h(without)e(having)i(any)g(ef)n(fect)f(on)
h(the)e(binding)i(in)g(the)f(opened)e(package.)39 b(For)166
1141 y(example,)33 b(one)e(can)h(do)e Fo(\(define)52
b(car)h('chevy\))28 b Fs(without)i(af)n(fecting)j(the)d(binding)i(of)f
(the)166 1254 y(name)23 b Fo(car)e Fs(in)i(the)f Fo(scheme)e
Fs(package.)307 1371 y(Assignments)25 b(\(using)h Fo(set!)p
Fs(\))f(to)h(imported)f(and)i(unde\002ned)d(variables)29
b(ar)n(e)e(not)e(allowed.)166 1484 y(In)f(or)n(der)f(to)g
Fo(set!)g Fs(a)h(top-level)g(variable,)i(the)e(package)g(body)f(must)g
(contain)i(a)f Fo(define)e Fs(form)166 1597 y(de\002ning)d(that)g
(variable.)29 b(Applied)19 b(to)g(bindings)h(fr)n(om)g(the)f
Fo(scheme)e Fs(str)o(uctur)n(e,)i(this)h(r)n(estriction)166
1710 y(is)j(compatible)g(with)g(the)f(r)n(equir)n(ements)f(of)i(the)e
(Revised)2207 1677 y Fm(5)2268 1710 y Fs(Scheme)h(r)n(eport.)307
1826 y(It)e(is)h(an)g(err)n(or)f(for)h(two)e(of)i(a)g(package's)f
(opened)f(str)o(uctur)n(es)g(to)h(export)f(two)h(dif)n(fer)n(ent)h
(bind-)166 1939 y(ings)h(for)g(the)f(same)h(name.)28
b(However)-7 b(,)21 b(the)h(curr)n(ent)f(implementation)h(does)f(not)g
(check)h(for)g(this)166 2052 y(situation;)e(a)h(name's)f(binding)g(is)g
(always)g(taken)f(fr)n(om)h(the)f(str)o(uctur)n(e)g(that)h(is)g(listed)
f(\002rst)g(within)166 2165 y(the)j Fo(open)f Fs(clause.)28
b(This)22 b(may)h(be)g(\002xed)e(in)j(the)d(futur)n(e.)307
2282 y(File)43 b(names)g(in)h(a)f Fo(files)e Fs(clause)i(can)h(be)f
(symbols,)k(strings,)g(or)42 b(lists)h(\(Maclisp-style)166
2395 y(\223namelists\224\).)64 b(A)34 b(\223)p Fo(.scm)p
Fs(\224)f(\002le)i(type)d(suf)n(\002x)i(is)h(assumed.)61
b(Symbols)34 b(ar)n(e)h(converted)d(to)i(\002le)166 2508
y(names)h(by)g(converting)g(to)f(upper)g(or)h(lower)f(case)h(as)h(appr)
n(opriate)e(for)h(the)f(host)g(operating)166 2621 y(system.)74
b(A)38 b(namelist)h(is)f(an)h(operating-system-independent)33
b(way)39 b(to)e(specify)h(a)h(\002le)g(ob-)166 2733 y(tained)29
b(fr)n(om)h(a)g(subdir)n(ectory)-10 b(.)46 b(For)28 b(example,)j(the)d
(namelist)i Fo(\(rts)53 b(record\))26 b Fs(speci\002es)i(the)166
2846 y(\002le)23 b Fo(record.scm)18 b Fs(in)23 b(the)f
Fo(rts)f Fs(subdir)n(ectory)-10 b(.)307 2963 y(If)30
b(the)f Fo(define-structur)o(e)24 b Fs(form)30 b(was)g(itself)g
(obtained)g(fr)n(om)g(a)h(\002le,)g(then)e(\002le)h(names)166
3076 y(in)c Fo(files)d Fs(clauses)i(ar)n(e)g(interpr)n(eted)e(r)n
(elative)j(to)f(the)f(dir)n(ectory)h(in)g(which)h(the)e(\002le)i
(containing)166 3189 y(the)f Fo(define-structu)o(re)19
b Fs(form)26 b(was)f(found.)36 b(Y)-8 b(ou)24 b(can't)i(at)g(pr)n
(esent)e(put)g(an)i(absolute)f(path)166 3302 y(name)e(in)g(the)f
Fo(files)e Fs(list.)166 3624 y Fl(4.3)119 b(Interfaces)166
3843 y Fs(An)27 b(interface)g(can)h(be)f(thought)f(of)h(as)g(the)f
(type)g(of)h(a)h(str)o(uctur)n(e.)40 b(In)27 b(its)g(basic)h(form)f(it)
h(is)f(just)g(a)166 3956 y(list)k(of)f(variable)i(names,)g(written)d
Fo(\(export)52 b Fr(name)i Fo(...\))p Fs(.)49 b(However)-7
b(,)31 b(in)g(place)g(of)f(a)h(name)166 4068 y(one)c(may)h(write)g
Fo(\()p Fr(name)54 b(type)p Fo(\))p Fs(,)30 b(indicating)e(the)f(type)g
(of)h Fr(name)p Fs('s)f(binding.)44 b(The)27 b(type)g(\002eld)g(is)166
4181 y(optional,)22 b(except)g(that)g(exported)e(macr)n(os)j(must)f(be)
h(indicated)g(with)f(type)f Fo(:syntax)p Fs(.)307 4298
y(Interfaces)e(may)i(be)f(either)g(anonymous,)f(as)h(in)h(the)e
(example)i(in)f(the)g(intr)n(oduction,)g(or)f(they)166
4411 y(may)k(be)g(given)f(names)h(by)f(a)h Fo(define-interfac)o(e)17
b Fs(form,)22 b(for)h(example)331 4618 y Fo(\(define-interfac)o(e)48
b(foo-interface)h(\(export)i(a)j(c)g(cons\)\))331 4734
y(\(define-structur)o(e)48 b(foo)53 b(foo-interface)c(...\))166
4937 y Fs(In)27 b(principle,)i(interfaces)f(needn't)e(ever)h(be)h
(named.)43 b(If)27 b(an)h(interface)g(had)g(to)f(be)h(given)f(at)h(the)
166 5050 y(point)g(of)g(a)i(str)o(uctur)n(e's)d(use)g(as)i(well)g(as)f
(at)h(the)f(point)g(of)g(its)h(de\002nition,)f(it)h(would)f(be)g(impor)
n(-)166 5163 y(tant)d(to)f(name)i(interfaces)e(in)i(or)n(der)e(to)g
(avoid)i(having)g(to)e(write)h(them)f(out)g(twice,)i(with)f(risk)f(of)
166 5276 y(mismatch)g(should)d(the)h(interface)h(ever)f(change.)28
b(But)21 b(they)h(don't.)307 5393 y(Still,)h(ther)n(e)f(ar)n(e)h
(several)g(r)n(easons)e(to)h(use)g Fo(define-interfa)o(ce)p
Fs(:)280 5596 y(1.)45 b(It)27 b(is)g(important)g(to)f(separate)g(the)g
(interface)i(de\002nition)e(fr)n(om)h(the)g(package)f(de\002nitions)393
5709 y(when)g(ther)n(e)f(ar)n(e)i(multiple)g(distinct)f(str)o(uctur)n
(es)f(that)h(have)h(the)e(same)h(interface)h(\227)f(that)393
5822 y(is,)d(multiple)g(implementations)f(of)g(the)g(same)h
(abstraction.)1831 6071 y(20)p eop
%%Page: 21 27
21 26 bop 197 573 a Fs(2.)45 b(It)24 b(is)h(conceptually)g(cleaner)-7
b(,)25 b(and)g(often)f(useful)g(for)h(documentation)f(purposes,)e(to)i
(sep-)310 686 y(arate)f(a)g(module's)f(speci\002cation)h(\(interface\))
g(fr)n(om)g(its)g(implementation)f(\(package\).)197 869
y(3.)45 b(Our)19 b(experience)e(is)h(that)g(con\002gurations)f(that)h
(ar)n(e)h(separated)e(into)h(interface)g(de\002nitions)310
982 y(and)g(package)g(de\002nitions)f(ar)n(e)h(easier)g(to)f(r)n(ead;)j
(the)d(long)h(lists)f(of)h(exported)e(bindings)i(just)310
1095 y(get)k(in)h(the)f(way)g(most)g(of)h(the)e(time.)224
1271 y(The)27 b Fo(compound-inter)o(fa)o(ce)21 b Fs(operator)k(forms)i
(an)g(interface)h(that)e(is)i(the)e(union)h(of)g(two)83
1384 y(or)22 b(mor)n(e)h(component)e(interfaces.)28 b(For)21
b(example,)248 1561 y Fo(\(define-interfac)o(e)48 b(bar-interface)357
1674 y(\(compound-interf)o(ac)o(e)g(foo-interface)h(\(export)i
(mumble\)\)\))83 1850 y Fs(de\002nes)21 b Fo(bar-interface)c
Fs(to)22 b(be)g Fo(foo-interface)17 b Fs(with)23 b(the)e(name)i
Fo(mumble)d Fs(added.)83 2147 y Fl(4.4)119 b(Macros)83
2358 y Fs(Hygienic)38 b(macr)n(os,)k(as)c(described)f(in)i([2,)f(3)q
(],)k(ar)n(e)c(implemented.)74 b(Str)o(uctur)n(es)36
b(may)j(export)83 2471 y(macr)n(os;)c(auxiliary)c(names)f(intr)n
(oduced)g(into)g(the)f(expansion)g(ar)n(e)i(r)n(esolved)e(in)i(the)f
(envir)n(on-)83 2583 y(ment)22 b(of)h(the)f(macr)n(o's)h(de\002nition.)
224 2696 y(For)f(example,)g(the)g Fo(scheme)e Fs(str)o(uctur)n(e's)h
Fo(delay)g Fs(macr)n(o)j(is)e(de\002ned)f(by)i(the)e(r)n(ewrite)h(r)o
(ule)248 2873 y Fo(\(delay)52 b Fr(exp)p Fo(\))110 b
Fh(=)-15 b Fk(\))109 b Fo(\(make-promise)48 b(\(lambda)k(\(\))h
Fr(exp)p Fo(\)\).)83 3049 y Fs(The)28 b(variable)j Fo(make-promise)23
b Fs(is)29 b(de\002ned)e(in)j(the)e Fo(scheme)e Fs(str)o(uctur)n(e's)h
(underlying)h(pack-)83 3162 y(age,)34 b(but)d(is)h(not)f(exported.)53
b(A)32 b(use)f(of)h(the)f Fo(delay)f Fs(macr)n(o,)35
b(however)-7 b(,)33 b(always)f(accesses)f(the)83 3275
y(corr)n(ect)h(de\002nition)g(of)g Fo(make-promise)p
Fs(.)52 b(Similarly)-10 b(,)36 b(the)c Fo(case)f Fs(macr)n(o)i(expands)
e(into)i(uses)83 3388 y(of)e Fo(cond)p Fs(,)g Fo(eqv?)p
Fs(,)h(and)f(so)f(on.)53 b(These)29 b(names)i(ar)n(e)h(exported)c(by)j
Fo(scheme)p Fs(,)g(but)g(their)f(corr)n(ect)83 3501 y(bindings)21
b(will)i(be)e(found)f(even)h(if)h(they)e(ar)n(e)i(shadowed)d(by)j
(de\002nitions)e(in)h(the)g(client)h(package.)83 3798
y Fl(4.5)119 b(Higher)n(-order)28 b(modules)83 4009 y
Fs(Ther)n(e)17 b(ar)n(e)i Fo(define-module)12 b Fs(and)18
b Fo(define)d Fs(forms)j(for)g(de\002ning)f(modules)g(that)h(ar)n(e)g
(intended)83 4121 y(to)27 b(be)g(instantiated)f(multiple)i(times.)41
b(But)26 b(these)g(ar)n(e)h(pr)n(etty)f(kludgey)f(\227)i(for)g
(example,)h(com-)83 4234 y(piled)f(code)f(isn't)h(shar)n(ed)f(between)g
(the)g(instantiations)h(\227)g(so)f(we)g(won't)h(describe)f(them)h
(yet.)83 4347 y(If)c(you)e(must)h(know)-8 b(,)21 b(\002gur)n(e)h(it)h
(out)f(fr)n(om)h(the)f(following)h(grammar)-7 b(.)265
4524 y Fk(h)p Fs(de\002nition)p Fk(i)22 b(\000)-15 b(!)45
b Fo(\(define-module)j(\()p Fk(h)p Fs(name)p Fk(i)55
b Fo(\()p Fk(h)p Fs(name)p Fk(i)g(h)p Fs(interface)p
Fk(i)q Fo(\))3038 4491 y Fi(\003)3077 4524 y Fo(\))1051
4637 y Fk(h)p Fs(de\002nition)p Fk(i)1514 4604 y Fi(\003)1051
4750 y Fk(h)p Fs(name)p Fk(i)q Fo(\))872 4863 y Fk(j)45
b Fo(\(define)52 b Fk(h)p Fs(name)p Fk(i)j Fo(\()p Fk(h)p
Fs(name)p Fk(i)g(h)p Fs(name)p Fk(i)2421 4830 y Fi(\003)2460
4863 y Fo(\)\))83 5159 y Fl(4.6)119 b(Compiling)31 b(and)f(linking)83
5370 y Fs(Scheme)21 b(48)h(has)f(a)h(static)g(linker)f(that)g(pr)n
(oduces)e(stand-alone)i(heap)g(images)g(fr)n(om)h(module)f(de-)83
5483 y(scriptions.)36 b(The)25 b(pr)n(ogrammer)g(speci\002es)g(a)h
(particular)h(pr)n(ocedur)n(e)d(in)i(a)g(particular)h(str)o(uctur)n(e)
83 5596 y(to)i(be)h(the)f(image's)h(startup)e(pr)n(ocedur)n(e)h
(\(entry)f(point\),)j(and)f(the)f(linker)h(traces)f(dependency)83
5709 y(links)22 b(as)g(given)g(by)g Fo(open)f Fs(and)h
Fo(access)d Fs(clauses)j(to)g(determine)e(the)i(composition)f(of)h(the)
f(heap)83 5822 y(image.)1748 6071 y(21)p eop
%%Page: 22 28
22 27 bop 307 573 a Fs(Ther)n(e)19 b(is)i(not)e(curr)n(ently)h(any)g
(pr)n(ovision)g(for)g(separate)f(compilation;)j(the)d(only)h(input)f
(to)h(the)166 686 y(static)32 b(linker)f(is)h(sour)n(ce)f(code.)53
b(However)-7 b(,)33 b(it)e(will)i(not)e(be)h(dif)n(\002cult)g(to)f
(implement)g(separate)166 799 y(compilation.)i(The)23
b(unit)h(of)g(compilation)h(is)f(one)g(module)f(\(not)h(one)f
(\002le\).)32 b(Any)23 b(opened)f(or)i(ac-)166 912 y(cessed)f(str)o
(uctur)n(es)h(fr)n(om)h(which)g(macr)n(os)h(ar)n(e)f(obtained)g(must)f
(be)h(pr)n(ocessed)e(to)h(the)g(extent)f(of)166 1024
y(extracting)g(its)h(macr)n(o)h(de\002nitions.)31 b(The)23
b(compiler)h(knows)f(fr)n(om)h(the)g(interface)g(of)g(an)g(opened)166
1137 y(or)30 b(accessed)f(str)o(uctur)n(e)h(which)g(of)h(its)f(exports)
e(ar)n(e)j(macr)n(os.)51 b(Except)29 b(for)h(macr)n(os,)j(a)e(module)
166 1250 y(may)21 b(be)f(compiled)g(without)f(any)i(knowledge)c(of)k
(the)e(implementation)h(of)h(its)f(opened)e(and)i(ac-)166
1363 y(cessed)e(str)o(uctur)n(es.)25 b(However)-7 b(,)18
b(inter)n(-module)h(optimization)h(may)g(be)g(available)i(as)e(an)f
(option.)307 1479 y(The)28 b(main)i(dif)n(\002culty)f(with)g(separate)e
(compilation)j(is)f(r)n(esolution)e(of)i(auxiliary)h(bindings)166
1592 y(intr)n(oduced)23 b(into)h(macr)n(o)h(expansions.)30
b(The)23 b(module)h(compiler)g(must)f(transmit)h(to)f(the)g(loader)166
1705 y(or)g(linker)g(the)f(sear)n(ch)h(path)g(by)g(which)h(such)e
(bindings)h(ar)n(e)g(to)g(be)g(r)n(esolved.)28 b(In)23
b(the)f(case)h(of)g(the)166 1818 y Fo(delay)30 b Fs(macr)n(o's)j
(auxiliary)h Fo(make-promise)27 b Fs(\(see)32 b(example)g(above\),)j
(the)c(loader)h(or)g(linker)166 1930 y(needs)i(to)i(know)f(that)h(the)f
(desir)n(ed)f(binding)j(of)f Fo(make-promise)30 b Fs(is)37
b(the)e(one)g(appar)n(ent)h(in)166 2043 y Fo(delay)p
Fs('s)20 b(de\002ning)i(package,)g(not)g(in)h(the)f(package)g(being)g
(loaded)g(or)h(linked.)166 2359 y Fl(4.7)119 b(Semantics)30
b(of)f(con\002guration)i(mutation)166 2575 y Fs(During)c(pr)n(ogram)h
(development)d(it)j(is)f(often)f(desirable)h(to)g(make)g(changes)g(to)g
(packages)f(and)166 2688 y(interfaces.)i(In)22 b(static)h(languages)e
(it)i(may)g(be)g(necessary)e(to)h(r)n(ecompile)g(and)h(r)n(e-link)g(a)g
(pr)n(ogram)166 2801 y(in)c(or)n(der)f(for)g(such)h(changes)f(to)g(be)g
(r)n(e\003ected)g(in)h(a)g(r)o(unning)g(system.)24 b(Even)18
b(in)h(interactive)g(Com-)166 2914 y(mon)26 b(Lisp)g(implementations,)h
(a)g(change)f(to)g(a)h(package's)e(exports)g(often)g(r)n(equir)n(es)h
(r)n(eloading)166 3027 y(clients)31 b(that)f(have)h(alr)n(eady)f
(mentioned)g(names)g(whose)f(bindings)h(change.)51 b(Once)31
b Fo(read)e Fs(r)n(e-)166 3140 y(solves)20 b(a)h(use)e(of)i(a)g(name)g
(to)f(a)h(symbol,)f(that)g(r)n(esolution)g(is)g(\002xed,)g(so)g(a)h
(change)f(in)h(the)f(way)g(that)166 3252 y(a)j(name)g(r)n(esolves)f(to)
g(a)h(symbol)f(can)i(only)e(be)h(r)n(e\003ected)e(by)i(r)n(e-)p
Fo(read)p Fs(ing)e(all)j(such)e(r)n(efer)n(ences.)307
3368 y(The)31 b(Scheme)h(48)h(development)d(envir)n(onment)i(supports)d
(rapid)j(turnar)n(ound)f(in)h(modu-)166 3481 y(lar)g(pr)n(ogram)e
(development)f(by)h(allowing)i(mutations)e(to)g(a)h(pr)n(ogram's)f
(con\002guration,)i(and)166 3594 y(giving)21 b(a)h(clear)f(semantics)g
(to)f(such)h(mutations.)27 b(The)20 b(r)o(ule)h(is)g(that)g(variable)h
(bindings)f(in)g(a)h(r)o(un-)166 3707 y(ning)27 b(pr)n(ogram)f(ar)n(e)h
(always)g(r)n(esolved)e(accor)n(ding)j(to)e(curr)n(ent)g(str)o(uctur)n
(e)f(and)i(interface)g(bind-)166 3820 y(ings,)j(even)e(when)h(these)e
(bindings)i(change)f(as)h(a)h(r)n(esult)e(of)h(edits)f(to)h(the)f
(con\002guration.)46 b(For)166 3933 y(example,)22 b(consider)g(the)g
(following:)331 4134 y Fo(\(define-interfac)o(e)48 b(foo-interface)h
(\(export)i(a)j(c\)\))331 4249 y(\(define-structur)o(e)48
b(foo)53 b(foo-interface)440 4365 y(\(open)g(scheme\))440
4481 y(\(begin)f(\(define)g(a)i(1\))822 4596 y(\(define)e(\(b)h(x\))h
(\(+)g(a)g(x\)\))822 4712 y(\(define)e(\(c)h(y\))h(\(*)g(\(b)f(a\))h
(y\)\)\)\))331 4827 y(\(define-structur)o(e)48 b(bar)53
b(\(export)f(d\))440 4943 y(\(open)h(scheme)f(foo\))440
5059 y(\(begin)g(\(define)g(\(d)h(w\))h(\(+)g(\(b)f(w\))h(a\)\)\)\))166
5257 y Fs(This)29 b(pr)n(ogram)g(has)g(a)h(bug.)48 b(The)28
b(variable)k Fo(b)p Fs(,)e(which)g(is)f(fr)n(ee)g(in)h(the)e
(de\002nition)h(of)g Fo(d)p Fs(,)h(has)f(no)166 5370
y(binding)e(in)g Fo(bar)p Fs('s)d(package.)39 b(Suppose)24
b(that)i Fo(b)g Fs(was)h(supposed)c(to)j(be)g(exported)e(by)j
Fo(foo)p Fs(,)e(but)166 5483 y(was)g(omitted)e(fr)n(om)i
Fo(foo-interface)19 b Fs(by)25 b(mistake.)33 b(It)24
b(is)h(not)f(necessary)f(to)h(r)n(e-pr)n(ocess)f Fo(bar)166
5596 y Fs(or)30 b(any)g(of)g Fo(foo)p Fs('s)e(other)h(clients)h(at)h
(this)e(point.)50 b(One)30 b(need)e(only)i(change)g Fo(foo-interface)
166 5709 y Fs(and)23 b(inform)g(the)f(development)f(system)f(of)j(that)
f(change)h(\(using,)f(say)-10 b(,)22 b(an)h(appr)n(opriate)f(Emacs)166
5822 y(command\),)h(and)g Fo(foo)p Fs('s)e(binding)i(of)f
Fo(b)h Fs(will)h(be)e(found)g(when)g(pr)n(ocedur)n(e)f
Fo(d)i Fs(is)f(called.)1831 6071 y(22)p eop
%%Page: 23 29
23 28 bop 224 573 a Fs(Similarly)-10 b(,)30 b(it)d(is)g(also)g
(possible)g(to)f(r)n(eplace)h(a)h(str)o(uctur)n(e;)g(clients)f(of)g
(the)f(old)h(str)o(uctur)n(e)f(will)83 686 y(be)21 b(modi\002ed)e(so)h
(that)h(they)e(see)h(bindings)g(fr)n(om)h(the)f(new)g(one.)27
b(Shadowing)19 b(is)i(also)g(supported)83 799 y(in)26
b(the)e(same)h(way)-10 b(.)35 b(Suppose)23 b(that)i(a)g(client)h
(package)f Fg(C)31 b Fs(opens)24 b(a)h(str)o(uctur)n(e)g
Fo(foo)e Fs(that)i(exports)83 912 y(a)d(name)f Fo(x)p
Fs(,)g(and)g Fo(foo)p Fs('s)f(implementation)g(obtains)i(the)e(binding)
h(of)g Fo(x)g Fs(as)g(an)h(import)e(fr)n(om)i(some)83
1024 y(other)i(str)o(uctur)n(e)g Fo(bar)p Fs(.)34 b(Then)24
b Fg(C)32 b Fs(will)26 b(see)e(the)h(binding)g(fr)n(om)h
Fo(bar)p Fs(.)34 b(If)25 b(one)f(then)g(alters)h Fo(foo)f
Fs(so)83 1137 y(that)g(it)h(shadows)e Fo(bar)p Fs('s)g(binding)i(of)g
Fo(x)f Fs(with)h(a)g(de\002nition)f(of)g(its)h(own,)f(then)g(pr)n
(ocedur)n(es)e(in)k Fg(C)83 1250 y Fs(that)k(r)n(efer)n(ence)f
Fo(x)g Fs(will)i(automatically)h(see)c Fo(foo)p Fs('s)g(de\002nition)h
(instead)g(of)h(the)f(one)g(fr)n(om)h Fo(bar)83 1363
y Fs(that)22 b(they)g(saw)g(earlier)-7 b(.)224 1479 y(This)37
b(semantics)f(might)h(appear)g(to)f(r)n(equir)n(e)h(a)g(lar)n(ge)g
(amount)g(of)g(computation)f(on)h(ev-)83 1591 y(ery)26
b(variable)i(r)n(efer)n(ence:)35 b(The)26 b(speci\002ed)g(behavior)h(r)
n(equir)n(es)f(scanning)h(the)e(package's)h(list)h(of)83
1704 y(opened)c(str)o(uctur)n(es,)h(examining)i(their)f(interfaces,)h
(on)f(every)f(variable)j(r)n(efer)n(ence,)f(not)e(just)h(at)83
1817 y(compile)20 b(time.)27 b(However)-7 b(,)19 b(the)f(development)g
(envir)n(onment)h(uses)g(caching)h(with)g(cache)g(inval-)83
1930 y(idation)j(to)f(make)g(variable)j(r)n(efer)n(ences)d(fast.)83
2244 y Fl(4.8)119 b(Command)31 b(processor)f(support)83
2459 y Fs(While)j(it)h(is)f(possible)f(to)g(use)h(the)f(Scheme)g(48)i
(static)g(linker)f(for)f(pr)n(ogram)h(development,)h(it)83
2572 y(is)e(far)h(mor)n(e)f(convenient)f(to)h(use)f(the)g(development)f
(envir)n(onment,)k(which)f(supports)c(rapid)83 2685 y(turnar)n(ound)g
(for)h(pr)n(ogram)g(changes.)50 b(The)30 b(pr)n(ogrammer)g(interacts)f
(with)i(the)e(development)83 2798 y(envir)n(onment)e(thr)n(ough)f(a)i
Fr(command)f(pr)n(ocessor)p Fs(.)46 b(The)26 b(command)i(pr)n(ocessor)e
(is)h(like)g(the)g(usual)83 2911 y(Lisp)j(r)n(ead-eval-print)i(loop)f
(in)g(that)g(it)g(accepts)g(Scheme)f(forms)h(to)g(evaluate.)53
b(However)-7 b(,)32 b(all)83 3024 y(meta-level)22 b(operations,)e(such)
i(as)g(exiting)f(the)g(Scheme)g(system)f(or)h(r)n(equests)f(for)h
(trace)h(output,)83 3137 y(ar)n(e)h(handled)g(by)g Fr(commands,)g
Fs(which)h(ar)n(e)f(lexically)i(distinguished)c(fr)n(om)i(Scheme)g
(forms.)28 b(This)83 3250 y(arrangement)17 b(is)h(borr)n(owed)f(fr)n
(om)h(the)f(Symbolics)i(Lisp)e(Machine)h(system,)f(and)h(is)g(r)n
(eminiscent)83 3363 y(of)27 b(non-Lisp)f(debuggers.)39
b(Commands)27 b(ar)n(e)g(a)h(little)f(easier)g(to)f(type)g(than)h
(Scheme)f(forms)h(\(no)83 3476 y(par)n(entheses,)d(so)h(you)g(don't)f
(have)i(to)f(shift\),)i(but)e(mor)n(e)h(importantly)-10
b(,)25 b(making)h(them)f(distinct)83 3588 y(fr)n(om)34
b(Scheme)f(forms)h(ensur)n(es)e(that)h(pr)n(ograms')g(namespaces)g(ar)n
(en't)h(clutter)n(ed)f(with)g(inap-)83 3701 y(pr)n(opriate)28
b(bindings.)44 b(Equivalently)-10 b(,)30 b(the)d(command)i(set)f(is)g
(available)j(for)e(use)e(r)n(egar)n(dless)g(of)83 3814
y(what)e(bindings)g(happen)g(to)g(be)g(visible)h(in)g(the)f(curr)n(ent)
g(pr)n(ogram.)35 b(This)26 b(is)f(especially)g(impor)n(-)83
3927 y(tant)e(in)h(conjunction)f(with)g(the)g(module)f(system,)g(which)
h(puts)f(strict)h(contr)n(ols)g(on)g(visibility)i(of)83
4040 y(bindings.)224 4155 y(The)d(Scheme)g(48)h(command)g(pr)n(ocessor)
e(supports)f(the)i(module)g(system)e(with)j(a)g(variety)f(of)83
4268 y(special)27 b(commands.)40 b(For)26 b(commands)h(that)g(r)n
(equir)n(e)f(str)o(uctur)n(e)g(names,)h(these)e(names)i(ar)n(e)g(r)n
(e-)83 4381 y(solved)20 b(in)h(a)g(designated)e(con\002guration)h
(package)g(that)h(is)g(distinct)f(fr)n(om)h(the)f(curr)n(ent)g(package)
83 4494 y(for)i(evaluating)h(Scheme)f(forms)g(given)g(to)f(the)h
(command)g(pr)n(ocessor)-7 b(.)27 b(The)21 b(command)i(pr)n(oces-)83
4607 y(sor)f(interpr)n(ets)f(Scheme)h(forms)h(in)g(a)h(particular)g
(curr)n(ent)e(package,)g(and)h(ther)n(e)f(ar)n(e)h(commands)83
4720 y(that)f(move)h(the)f(command)h(pr)n(ocessor)e(between)g(dif)n
(fer)n(ent)h(packages.)224 4835 y(Commands)28 b(ar)n(e)f(intr)n(oduced)
f(by)h(a)h(comma)g(\()p Fo(,)p Fs(\))h(and)e(end)f(at)h(the)g(end)f(of)
h(line.)42 b(The)26 b(com-)83 4948 y(mand)h(pr)n(ocessor)7
b('s)25 b(pr)n(ompt)h(consists)g(of)h(the)f(name)i(of)f(the)f(curr)n
(ent)g(package)h(followed)g(by)g(a)83 5061 y(gr)n(eater)n(-than)22
b(\()p Fo(>)p Fs(\).)128 5286 y Fo(,open)53 b Fr(struct-name)901
5253 y Fi(\003)310 5398 y Fs(The)32 b Fo(,open)f Fs(command)i(opens)e
(a)i(new)f(str)o(uctur)n(e)g(in)h(the)f(curr)n(ent)g(package,)j(as)d
(if)i(the)310 5511 y(package's)22 b(de\002nition's)g
Fo(open)f Fs(clause)i(had)f(listed)g Fr(struct-name)p
Fs(.)128 5709 y Fo(,config)310 5822 y Fs(The)32 b Fo(,config)d
Fs(command)k(sets)d(the)h(command)i(pr)n(ocessor)7 b('s)30
b(curr)n(ent)i(package)g(to)f(be)1748 6071 y(23)p eop
%%Page: 24 30
24 29 bop 393 573 a Fs(the)19 b(curr)n(ent)h(con\002guration)f
(package.)27 b(Forms)19 b(enter)n(ed)f(at)i(this)g(point)f(ar)n(e)h
(interpr)n(eted)e(as)393 686 y(being)23 b(con\002guration)f(language)g
(forms,)g(not)g(Scheme)g(forms.)211 887 y Fo(,config)52
b Fr(command)393 1000 y Fs(This)25 b(form)h(of)f(the)f
Fo(,config)e Fs(command)k(executes)d(another)i(command)h(in)f(the)g
(curr)n(ent)393 1113 y(con\002guration)d(package.)28
b(For)22 b(example,)559 1317 y Fo(,config)51 b(,load)h(foo.scm)393
1518 y Fs(interpr)n(ets)32 b(con\002guration)g(language)h(forms)g(fr)n
(om)g(the)g(\002le)g Fo(foo.scm)d Fs(in)j(the)g(curr)n(ent)393
1631 y(con\002guration)22 b(package.)211 1832 y Fo(,config-package-)o
(is)48 b Fr(struct-name)393 1945 y Fs(The)19 b Fo(,config-package)o(-i)
o(s)14 b Fs(command)20 b(designates)d(a)k(new)e(con\002guration)g
(package)393 2058 y(for)k(use)f(by)g(the)g Fo(,config)e
Fs(command)j(and)g(r)n(esolution)f(of)h Fr(struct-name)p
Fs(s)g(for)g(other)e(com-)393 2170 y(mands)j(such)g(as)g
Fo(,in)f Fs(and)h Fo(,open)p Fs(.)29 b(See)23 b(Section)h(4.9)g(for)g
(information)h(on)f(making)g(new)393 2283 y(con\002guration)e
(packages.)211 2484 y Fo(,in)54 b Fr(struct-name)393
2597 y Fs(The)22 b Fo(,in)f Fs(command)i(moves)f(the)g(command)h(pr)n
(ocessor)e(to)h(a)h(speci\002ed)e(str)o(uctur)n(e's)g(un-)393
2710 y(derlying)h(package.)27 b(For)22 b(example:)559
2914 y Fo(user>)52 b(,config)559 3031 y(config>)f(\(define-structu)o
(re)d(foo)53 b(\(export)e(a\))1104 3147 y(\(open)h(scheme\)\))559
3263 y(config>)f(,in)i(foo)559 3379 y(foo>)f(\(define)g(a)i(13\))559
3496 y(foo>)e(a)559 3612 y(13)393 3813 y Fs(In)35 b(this)f(example)g
(the)g(command)h(pr)n(ocessor)e(starts)g(in)i(a)g(package)f(called)i
Fo(user)p Fs(,)f(but)393 3926 y(the)24 b Fo(,config)d
Fs(command)k(moves)e(it)i(into)f(the)f(con\002guration)h(package,)g
(which)h(has)f(the)393 4039 y(name)d Fo(config)p Fs(.)j(The)c
Fo(define-structu)o(re)14 b Fs(form)20 b(binds,)h(in)g
Fo(config)p Fs(,)c(the)j(name)g Fo(foo)393 4152 y Fs(to)29
b(a)i(str)o(uctur)n(e)d(that)i(exports)e Fo(a)p Fs(.)48
b(Finally)-10 b(,)32 b(the)d(command)i Fo(,in)53 b(foo)28
b Fs(moves)i(the)e(com-)393 4265 y(mand)23 b(pr)n(ocessor)e(into)h(str)
o(uctur)n(e)g Fo(foo)p Fs('s)f(underlying)g(package.)393
4422 y(A)g(package's)g(body)f(isn't)h(executed)e(\(evaluated\))i(until)
h(the)e(package)h(is)g Fr(loaded)p Fs(,)i(which)f(is)393
4534 y(accomplished)h(by)g(the)f Fo(,load-package)16
b Fs(command.)211 4735 y Fo(,in)54 b Fr(struct-name)h(command)393
4848 y Fs(This)18 b(form)g(of)g(the)f Fo(,in)g Fs(command)i(executes)d
(a)i(single)g(command)g(in)h(the)e(speci\002ed)g(pack-)393
4961 y(age)23 b(without)e(moving)i(the)f(command)h(pr)n(ocessor)e(into)
h(that)h(package.)k(Example:)559 5166 y Fo(,in)53 b(mumble)f(\(cons)g
(1)i(2\))559 5282 y(,in)f(mumble)f(,trace)f(foo)211 5483
y(,user)i([)p Fr(command)p Fo(])393 5596 y Fs(This)29
b(is)h(similar)g(to)f(the)g Fo(,config)d Fs(and)j Fo(,in)f
Fs(commands.)48 b(It)28 b(moves)h(to)f(or)h(executes)f(a)393
5709 y(command)19 b(in)g(the)f(user)g(package)g(\(which)h(is)g(the)f
(default)g(package)g(when)g(the)g(Scheme)g(48)393 5822
y(command)23 b(pr)n(ocessor)e(starts\).)1831 6071 y(24)p
eop
%%Page: 25 31
25 30 bop 128 573 a Fo(,user-package-is)48 b Fr(name)310
686 y Fs(The)26 b Fo(,user-package-i)o(s)20 b Fs(command)27
b(designates)d(a)j(new)f(user)f(package)h(for)g(use)f(by)310
799 y(the)d Fo(,user)f Fs(command.)128 986 y Fo(,load-package)49
b Fr(struct-name)310 1099 y Fs(The)25 b Fo(,load-package)20
b Fs(command)26 b(ensur)n(es)e(that)h(the)g(speci\002ed)f(str)o(uctur)n
(e's)g(underly-)310 1212 y(ing)k(package's)f(pr)n(ogram)g(has)g(been)g
(loaded.)41 b(This)27 b(consists)f(of)i(\(1\))g(r)n(ecursively)g(ensur)
n(-)310 1325 y(ing)23 b(that)f(the)g(packages)f(of)i(any)f(opened)f(or)
h(accessed)f(str)o(uctur)n(es)g(ar)n(e)i(loaded,)f(followed)310
1438 y(by)29 b(\(2\))i(executing)d(the)g(package's)h(body)f(as)h
(speci\002ed)f(by)h(its)g(de\002nition's)f Fo(begin)f
Fs(and)310 1551 y Fo(files)21 b Fs(forms.)128 1739 y
Fo(,reload-package)48 b Fr(struct-name)310 1852 y Fs(This)33
b(command)g(r)n(e-executes)f(the)g(str)o(uctur)n(e's)f(package's)i(pr)n
(ogram.)58 b(It)33 b(is)g(most)f(use-)310 1965 y(ful)d(if)f(the)f(pr)n
(ogram)h(comes)f(fr)n(om)h(a)g(\002le)g(or)f(\002les,)i(when)e(it)g
(will)i(update)e(the)g(package's)310 2078 y(bindings)c(after)f
(mutations)g(to)g(its)h(sour)n(ce)f(\002le.)128 2265
y Fo(,load)53 b Fr(\002lespec)j Fo(...)310 2378 y Fs(The)18
b Fo(,load)e Fs(command)j(executes)d(forms)i(fr)n(om)h(the)e
(speci\002ed)g(\002le)i(or)e(\002les)h(in)h(the)f(curr)n(ent)310
2491 y(package.)55 b Fo(,load)d Fr(\002lespec)34 b Fs(is)d(similar)j
(to)d Fo(\(load)52 b(")p Fr(\002lespec)p Fo("\))32 b
Fs(except)f(that)g(the)g(name)310 2604 y Fo(load)21 b
Fs(needn't)g(be)i(bound)f(in)h(the)f(curr)n(ent)g(package)g(to)g
(Scheme's)g Fo(load)f Fs(pr)n(ocedur)n(e.)128 2792 y
Fo(,for-syntax)50 b([)p Fr(command)p Fo(])310 2905 y
Fs(This)29 b(is)h(similar)g(to)f(the)f Fo(,config)f Fs(and)i
Fo(,in)f Fs(commands.)48 b(It)28 b(moves)h(to)f(or)h(executes)f(a)310
3018 y(command)g(in)g(the)e(curr)n(ent)h(package's)g(\223package)h(for)
f(syntax,\224)h(which)g(is)f(the)f(package)310 3131 y(in)d(which)h(the)
d(forms)i Fg(f)32 b Fs(in)23 b Fo(\(define-syntax)48
b Fr(name)55 b(f)p Fo(\))22 b Fs(ar)n(e)h(evaluated.)128
3318 y Fo(,new-package)310 3431 y Fs(The)k Fo(,new-package)22
b Fs(command)28 b(cr)n(eates)f(a)h(new)f(package,)h(in)g(which)g(only)g
(the)e(stan-)310 3544 y(dar)n(d)d(Scheme)f(bindings)g(ar)n(e)h
(visible,)h(and)e(moves)h(the)e(command)j(pr)n(ocessor)c(to)i(it.)128
3732 y Fo(,structure)50 b Fr(name)55 b(interface)310
3845 y Fs(The)27 b Fo(,structure)d Fs(command)k(de\002nes)e
Fr(name)i Fs(in)g(the)f(con\002guration)g(package)h(to)f(be)h(a)310
3958 y(str)o(uctur)n(e)22 b(with)g(interface)h Fr(interface)i
Fs(based)d(on)g(the)g(curr)n(ent)g(package.)83 4257 y
Fl(4.9)119 b(Con\002guration)31 b(packages)83 4468 y
Fs(It)j(is)g(possible)g(to)f(set)h(up)f(multiple)i(con\002guration)f
(packages.)62 b(The)34 b(default)g(con\002guration)83
4581 y(package)22 b(opens)f(the)h(following)h(str)o(uctur)n(es:)219
4768 y Fk(\017)46 b Fo(module-system)p Fs(,)14 b(which)19
b(exports)e Fo(define-structure)12 b Fs(and)19 b(the)f(other)g
(con\002gura-)310 4881 y(tion)g(language)g(keywor)n(ds,)e(as)i(well)g
(as)g(standar)n(d)f(types)f(and)i(type)e(constr)o(uctors)g(\()p
Fo(:syn-)310 4994 y(tax)p Fs(,)21 b Fo(:value)p Fs(,)f
Fo(proc)p Fs(,)h(etc.\).)219 5182 y Fk(\017)46 b Fo(built-in-struct)o
(ure)o(s)p Fs(,)16 b(which)22 b(exports)e(str)o(uctur)n(es)h(that)h(ar)
n(e)g(built)h(into)f(the)f(initial)310 5295 y(Scheme)h(48)i(image;)f
(these)e(include)h Fo(scheme)p Fs(,)e Fo(threads)p Fs(,)f
Fo(tables)p Fs(,)h(and)j Fo(records)p Fs(.)219 5483 y
Fk(\017)46 b Fo(more-structures)o Fs(,)30 b(which)k(exports)e
(additional)i(str)o(uctur)n(es)d(that)j(ar)n(e)f(available)k(in)310
5596 y(the)30 b(development)f(envir)n(onment.)52 b(A)30
b(complete)g(listing)h(can)h(be)e(found)g(in)h(the)f(de\002ni-)310
5709 y(tion)e(of)g Fo(more-structure)o(s-i)o(nt)o(er)o(fa)o(ce)21
b Fs(at)28 b(the)g(end)f(of)g(the)g(\002le)h Fo(scheme/more-)310
5822 y(packages.scm)p Fs(.)1748 6071 y(25)p eop
%%Page: 26 32
26 31 bop 166 573 a Fs(Note)21 b(that)h(it)h(does)e(not)h(open)g
Fo(scheme)p Fs(.)307 686 y(Y)-8 b(ou)20 b(can)h(de\002ne)e(additional)i
(con\002guration)f(packages)g(by)g(making)h(a)g(package)f(that)h(opens)
166 799 y Fo(module-system)e Fs(and,)24 b(optionally)-10
b(,)25 b Fo(built-in-struc)o(tu)o(re)o(s)p Fs(,)19 b
Fo(more-structure)o(s)p Fs(,)f(or)166 912 y(other)j(str)o(uctur)n(es)g
(that)i(export)e(str)o(uctur)n(es)g(and)i(interfaces.)307
1024 y(For)f(example:)331 1180 y Fo(>)54 b(,config)e(\(define-struct)o
(ure)c(foo)53 b(\(export\))986 1292 y(\(open)f(module-system)1313
1405 y(built-in-struct)o(ur)o(es)1313 1518 y(more-structures)o(\)\))331
1631 y(>)i(,in)g(foo)331 1744 y(foo>)f(\(define-structu)o(re)48
b(x)54 b(\(export)d(a)j(b\))713 1857 y(\(open)e(scheme\))713
1970 y(\(files)g(x\)\))331 2083 y(foo>)307 2238 y Fs(Unfortunately)-10
b(,)29 b(the)f(above)h(example)g(does)e(not)h(work.)46
b(The)28 b(pr)n(oblem)h(is)g(that)f(every)g(en-)166 2351
y(vir)n(onment)g(in)h(which)f Fo(define-structur)o(e)22
b Fs(is)28 b(de\002ned)e(must)i(also)g(have)g(a)h(way)f(to)f(cr)n(eate)
166 2464 y(\223r)n(e\003ective)f(towers\224)d(\(a)j(misnomer;)f(a)h
(better)d(name)j(would)e(be)h(\223syntactic)g(towers\224\).)34
b(A)25 b(new)166 2577 y(r)n(e\003ective)d(tower)f(is)h(r)n(equir)n(ed)g
(whenever)f(a)i(new)e(envir)n(onment)h(is)g(cr)n(eated)g(for)g
(compiling)h(the)166 2690 y(sour)n(ce)e(code)g(in)h(the)f(package)g
(associated)g(with)g(a)h(new)f(str)o(uctur)n(e.)27 b(The)21
b(envir)n(onment's)g(tower)166 2803 y(is)i(used)e(at)i(compile)g(time)f
(for)h(evaluating)g(the)f Fr(macr)n(o-sour)n(ce)k Fs(in)331
2958 y Fo(\(define-syntax)49 b Fr(name)54 b(macr)n(o-sour)n(ce)p
Fo(\))331 3071 y(\(let-syntax)c(\(\()p Fr(name)k(macr)n(o-sour)n(ce)p
Fo(\))i Fr(...)p Fo(\))e Fr(body)p Fo(\))166 3226 y Fs(and)25
b(so)e(forth.)34 b(It)24 b(is)g(a)h(\223tower)7 b(\224)24
b(because)g(that)h(envir)n(onment,)f(in)h(turn,)f(has)h(to)f(say)g
(what)h(envi-)166 3339 y(r)n(onment)d(to)g(use)g(if)h
Fo(macro-source)17 b Fs(itself)23 b(contains)g(a)g(use)e(of)i
Fo(let-syntax)p Fs(.)307 3451 y(The)k(simplest)h(way)g(to)f(pr)n(ovide)
h(a)g(tower)f(maker)h(is)g(to)f(pass)g(on)h(the)f(one)g(used)g(by)h(an)
g(ex-)166 3564 y(isting)34 b(con\002guration)g(package.)64
b(The)33 b(special)j(form)e Fo(export-reflectiv)o(e-)o(to)o(we)o(r)29
b Fs(cr)n(e-)166 3677 y(ates)f(an)i(interface)f(that)g(exports)e(a)j
(con\002guration)e(package's)h(tower)-7 b(.)46 b(The)28
b(following)i(exam-)166 3790 y(ple)e(uses)f Fo(export-reflecti)o(ve)o
(-t)o(owe)o(r)22 b Fs(and)29 b(the)e Fo(,structure)d
Fs(command)29 b(to)f(obtain)h(a)166 3903 y(tower)21 b(maker)i(and)f(cr)
n(eate)h(a)g(new)f(con\002guration)g(envir)n(onment.)331
4077 y Fo(>)54 b(,config)e(,structure)e(t)k(\(export-reflect)o(iv)o(e-)
o(to)o(we)o(r-m)o(ak)o(er)o(\))331 4189 y(>)g(,config)e
(\(define-struct)o(ure)c(foo)53 b(\(export\))986 4302
y(\(open)f(module-system)1313 4415 y(t)1313 4528 y(built-in-struct)o
(ur)o(es)1313 4641 y(more-structures)o(\)\))166 4933
y Fl(4.10)119 b(Discussion)166 5144 y Fs(This)33 b(module)f(system)f
(was)i(not)g(designed)d(as)k(the)e(be-all)i(and)f(end-all)h(of)f
(Scheme)g(module)166 5257 y(systems;)g(it)e(was)f(only)h(intended)e(to)
h(help)h(us)f(or)n(ganize)i(the)e(Scheme)g(48)i(system.)51
b(Not)29 b(only)166 5370 y(does)23 b(the)g(module)g(system)g(help)g
(avoid)i(name)g(clashes)f(by)g(keeping)e(dif)n(fer)n(ent)i(subsystems)e
(in)166 5483 y(dif)n(fer)n(ent)k(namespaces,)g(it)g(has)g(also)h
(helped)d(us)i(to)f(tighten)g(up)h(and)g(generalize)g(Scheme)f(48's)166
5596 y(internal)j(interfaces.)43 b(Scheme)27 b(48)i(is)f(unusual)g
(among)g(Lisp)f(implementations)g(in)h(admitting)166
5709 y(many)33 b(dif)n(fer)n(ent)f(possible)g(modes)f(of)h(operation.)
56 b(Examples)32 b(of)g(such)h(multiple)f(modes)f(in-)166
5822 y(clude)22 b(the)g(following:)1831 6071 y(26)p eop
%%Page: 27 33
27 32 bop 219 573 a Fk(\017)46 b Fs(Linking)22 b(can)i(be)e(either)g
(static)h(or)f(dynamic.)219 760 y Fk(\017)46 b Fs(The)30
b(development)e(envir)n(onment)h(\(compiler)-7 b(,)33
b(debugger)-7 b(,)29 b(and)h(command)h(pr)n(ocessor\))310
873 y(can)c(r)o(un)e(either)g(in)h(the)e(same)i(addr)n(ess)e(space)h
(as)h(the)e(pr)n(ogram)i(being)f(developed)f(or)h(in)310
986 y(a)f(dif)n(fer)n(ent)f(addr)n(ess)f(space.)29 b(The)22
b(envir)n(onment)h(and)g(user)f(pr)n(ogram)h(may)h(even)e(r)o(un)h(on)
310 1099 y(dif)n(fer)n(ent)g(pr)n(ocessors)d(under)i(dif)n(fer)n(ent)g
(operating)g(systems[8)n(].)219 1287 y Fk(\017)46 b Fs(The)29
b(virtual)i(machine)g(can)f(be)g(supported)c(by)k(either)e(of)i(two)f
(implementations)g(of)g(its)310 1400 y(implementation)23
b(language,)f(Pr)n(escheme.)83 1587 y(The)j(module)f(system)g(has)h
(been)g(helpful)g(in)h(or)n(ganizing)g(these)d(multiple)j(modes.)34
b(By)25 b(for)n(cing)83 1700 y(us)20 b(to)g(write)h(down)e(interfaces)i
(and)g(module)f(dependencies,)e(the)i(module)g(system)f(helps)h(us)g
(to)83 1813 y(keep)h(the)h(system)f(clean,)i(or)f(at)h(least)f(to)g
(keep)f(us)h(honest)f(about)i(how)f(clean)h(or)g(not)f(it)g(is.)224
1926 y(The)30 b(need)e(to)i(make)g(str)o(uctur)n(es)f(and)h(interfaces)
g(second-class)f(instead)h(of)g(\002rst-class)g(r)n(e-)83
2039 y(sults)k(fr)n(om)h(the)e(r)n(equir)n(ements)h(of)g(static)h(pr)n
(ogram)g(analysis:)52 b(it)34 b(must)g(be)h(possible)e(for)i(the)83
2152 y(compiler)29 b(and)f(linker)g(to)g(expand)f(macr)n(os)i(and)f(r)n
(esolve)g(variable)i(bindings)e(befor)n(e)g(the)f(pr)n(o-)83
2265 y(gram)i(is)h(executed.)45 b(Str)o(uctur)n(es)27
b(could)i(be)g(made)g(\002rst-class)g(\(as)h(in)f(FX[9]\))h(if)g(a)f
(type)f(system)83 2378 y(wer)n(e)d(added)g(to)h(Scheme)g(and)g(the)f
(de\002nitions)g(of)h(exported)e(macr)n(os)j(wer)n(e)e(de\002ned)f(in)j
(inter)n(-)83 2491 y(faces)j(instead)f(of)h(in)h(module)e(bodies,)i
(but)f(even)f(in)h(that)g(case)g(types)e(and)i(interfaces)g(would)83
2604 y(r)n(emain)24 b(second-class.)224 2716 y(The)31
b(pr)n(ohibition)g(on)g(assignment)f(to)h(imported)f(bindings)h(makes)f
(substitution)g(a)i(valid)83 2829 y(optimization)20 b(when)f(a)h
(module)f(is)h(compiled)g(as)f(a)i(block.)27 b(The)19
b(block)h(compiler)g(\002rst)e(scans)i(the)83 2942 y(entir)n(e)26
b(module)g(body)-10 b(,)26 b(noting)g(which)i(variables)g(ar)n(e)f
(assigned.)38 b(Those)25 b(that)i(ar)n(en't)f(assigned)83
3055 y(\(only)g Fo(define)p Fs(d\))d(may)j(be)g(assumed)f(never)g
(assigned,)h(even)f(if)i(they)e(ar)n(e)h(exported.)35
b(The)25 b(op-)83 3168 y(timizer)j(can)h(then)e(perform)g(a)h(very)f
(simple-minded)g(analysis)h(to)f(determine)f(automatically)83
3281 y(that)c(some)g(pr)n(ocedur)n(es)f(can)i(and)g(should)f(have)h
(their)f(calls)i(compiled)f(in)g(line.)224 3394 y(The)k(pr)n(ogramming)
h(style)f(encouraged)f(by)i(the)f(module)h(system)e(is)i(consistent)e
(with)i(the)83 3507 y(unextended)36 b(Scheme)j(language.)78
b(Because)38 b(module)h(system)f(featur)n(es)g(do)h(not)g(generally)83
3620 y(show)26 b(up)g(within)h(module)f(bodies,)h(an)g(individual)h
(module)f(may)g(be)f(understood)e(by)j(some-)83 3733
y(one)h(who)g(is)g(not)g(familiar)k(with)c(the)g(module)g(system.)43
b(This)29 b(is)f(a)h(gr)n(eat)g(aid)g(to)f(code)f(pr)n(esen-)83
3846 y(tation)e(and)h(portability)-10 b(.)36 b(If)25
b(a)h(few)f(simple)h(conditions)e(ar)n(e)i(met)f(\(no)g(name)h
(con\003icts)g(between)83 3958 y(packages,)j(and)f(use)g(of)g
Fo(files)f Fs(in)i(pr)n(efer)n(ence)e(to)h Fo(begin)p
Fs(\),)g(then)f(a)j(multi-module)e(pr)n(ogram)83 4071
y(can)h(be)f(loaded)g(into)g(a)g(Scheme)g(implementation)g(that)g(does)
f(not)g(support)f(the)i(module)f(sys-)83 4184 y(tem.)47
b(The)29 b(Scheme)f(48)i(static)g(linker)f(satis\002es)f(these)g
(conditions,)h(and)g(can)i(ther)n(efor)n(e)c(r)o(un)j(in)83
4297 y(other)j(Scheme)h(implementations.)63 b(Scheme)34
b(48's)i(bootstrap)d(pr)n(ocess,)j(which)f(is)f(based)g(on)83
4410 y(the)22 b(static)h(linker)-7 b(,)22 b(is)h(ther)n(efor)n(e)e
(nonincestuous.)26 b(This)d(contrasts)e(with)i(most)e(other)h
(integrated)83 4523 y(pr)n(ogramming)f(envir)n(onments,)f(such)g(as)h
(Smalltalk-80,)j(wher)n(e)c(the)g(system)f(can)i(only)g(be)f(built)83
4636 y(using)i(an)h(existing)f(version)g(of)h(the)e(system)g(itself.)
224 4749 y(Like)i(ML)g(modules,)f(but)h(unlike)g(Scheme)g(Xer)n(ox)f
(modules,)g(this)h(module)g(system)e(is)i(com-)83 4862
y(positional.)43 b(That)28 b(is,)h(str)o(uctur)n(es)d(ar)n(e)i(constr)o
(ucted)e(by)i(single)f(syntactic)h(units)f(that)g(compose)83
4975 y(existing)c(str)o(uctur)n(es)f(with)i(a)g(body)f(of)g(code.)31
b(In)23 b(Scheme)g(Xer)n(ox,)g(the)g(set)f(of)i(modules)f(that)g(can)83
5088 y(contribute)18 b(to)h(an)h(interface)f(is)g(open-ended)d(\227)k
(any)f(module)f(can)i(contribute)f(bindings)g(to)f(any)83
5201 y(interface)27 b(whose)e(name)i(is)g(in)h(scope.)39
b(The)26 b(module)g(system)f(implementation)i(is)f(a)i(cr)n(oss-bar)83
5313 y(that)h(channels)h(de\002nitions)e(fr)n(om)i(modules)e(to)h
(interfaces.)47 b(The)29 b(module)g(system)e(described)83
5426 y(her)n(e)c(has)h(simpler)f(semantics)g(and)h(makes)f
(dependencies)e(easier)i(to)g(trace.)30 b(It)23 b(also)h(allows)g(for)
83 5539 y(higher)n(-or)n(der)e(modules,)f(which)i(Scheme)f(Xer)n(ox)g
(considers)f(unimportant.)1748 6071 y(27)p eop
%%Page: 28 34
28 33 bop 166 1196 a Fn(Chapter)44 b(5)166 1611 y Fq(Libraries)166
2056 y Fs(Use)27 b(the)f Fo(,open)g Fs(command)i(\(section)f(3.4\))i
(or)e(the)g(module)g(language)g(\(chapter)h(2.6\))g(to)f(open)166
2169 y(the)22 b(str)o(uctur)n(es)f(described)g(below)-8
b(.)166 2465 y Fl(5.1)119 b(ASCII)29 b(character)g(encoding)166
2676 y Fs(These)21 b(ar)n(e)i(in)g(the)f(str)o(uctur)n(e)f
Fo(ascii)p Fs(.)184 2836 y Fk(\017)46 b Fo(\(char->ascii)40
b Fr(char)p Fo(\))46 b Fk(!)g Fr(integer)184 2949 y Fk(\017)g
Fo(\(ascii->char)40 b Fr(integer)p Fo(\))47 b Fk(!)e
Fr(char)166 3110 y Fs(These)17 b(ar)n(e)i(identical)h(to)e
Fo(char->integer)13 b Fs(and)19 b Fo(integer->char)13
b Fs(except)18 b(that)h(they)e(use)h(the)166 3223 y(ASCII)k
(encodingASCII)f(encoding)g(\(appendix)h(A\).)184 3383
y Fk(\017)46 b Fo(ascii-limit)2424 b Fs(integer)184 3496
y Fk(\017)46 b Fo(ascii-whitespac)o(es)1810 b Fs(list)22
b(of)h(integers)166 3656 y Fo(Ascii-limit)31 b Fs(is)36
b(one)f(mor)n(e)h(than)g(the)f(lar)n(gest)h(value)g(that)g
Fo(char->ascii)31 b Fs(may)36 b(r)n(eturn.)166 3769 y
Fo(Ascii-whitespac)o(es)24 b Fs(is)30 b(a)i(list)e(of)h(the)e(ASCII)h
(values)h(of)f(whitespace)g(characters)h(\(space,)166
3882 y(horizontal)23 b(tab,)g(line)g(feed)f(\(=)h(newline\),)f
(vertical)i(tab,)f(form)g(feed,)e(and)i(carriage)g(r)n(eturn\).)166
4179 y Fl(5.2)119 b(Bitwise)29 b(integer)g(operations)166
4390 y Fs(These)j(functions)h(use)f(the)g(two's-complement)g(r)n(epr)n
(esentation)g(for)h(integers.)58 b(Ther)n(e)32 b(is)h(no)166
4502 y(limit)i(to)f(the)f(number)h(of)g(bits)g(in)g(an)h(integer)-7
b(.)61 b(They)33 b(ar)n(e)h(in)h(the)e(str)o(uctur)n(es)f
Fo(bitwise)f Fs(and)166 4615 y Fo(big-scheme)p Fs(.)184
4776 y Fk(\017)46 b Fo(\(bitwise-and)40 b Fr(integer)47
b(integer)p Fo(\))g Fk(!)e Fr(integer)184 4889 y Fk(\017)h
Fo(\(bitwise-ior)40 b Fr(integer)47 b(integer)p Fo(\))g
Fk(!)e Fr(integer)184 5002 y Fk(\017)h Fo(\(bitwise-xor)40
b Fr(integer)47 b(integer)p Fo(\))g Fk(!)e Fr(integer)184
5115 y Fk(\017)h Fo(\(bitwise-not)40 b Fr(integer)p Fo(\))47
b Fk(!)e Fr(integer)166 5275 y Fs(These)31 b(perform)g(various)i
(logical)h(operations)d(on)h(integers)e(on)i(a)h(bit-by-bit)h(basis.)57
b(`)p Fo(ior)p Fs(')32 b(is)166 5388 y(inclusive)24 b(OR)f(and)f(`)p
Fo(xor)p Fs(')g(is)h(exclusive)g(OR.)184 5548 y Fk(\017)46
b Fo(\(arithmetic-shi)o(ft)39 b Fr(integer)47 b(bit-count)p
Fo(\))f Fk(!)f Fr(integer)166 5709 y Fs(Shifts)31 b(the)g(integer)g(by)
g(the)g(given)h(bit)g(count,)h(which)f(must)g(be)f(an)h(integer)-7
b(,)33 b(shifting)f(left)f(for)166 5822 y(positive)22
b(counts)g(and)g(right)g(for)h(negative)f(ones.)27 b(Shifting)22
b(pr)n(eserves)f(the)h(integer)7 b('s)21 b(sign.)1831
6071 y(28)p eop
%%Page: 29 35
29 34 bop 101 573 a Fk(\017)46 b Fo(\(bit-count)41 b
Fr(integer)p Fo(\))47 b Fk(!)e Fr(integer)83 704 y Fs(Counts)19
b(the)f(number)h(of)h(bits)f(set)f(in)i(the)f(integer)-7
b(.)26 b(If)19 b(the)g(ar)n(gument)g(is)g(negative)g(a)h(bitwise)f(NOT)
83 817 y(operation)j(is)g(performed)f(befor)n(e)i(counting.)83
1108 y Fl(5.3)119 b(Byte)30 b(vectors)83 1319 y Fs(These)e(ar)n(e)i
(homogeneous)c(vectors)j(of)g(small)i(integers)d(\()p
Fh(0)38 b Fk(\024)g Fg(i)g Fk(\024)g Fh(255)p Fs(\).)50
b(The)28 b(functions)h(that)83 1432 y(operate)c(on)h(them)g(ar)n(e)h
(analogous)f(to)g(those)f(for)h(vectors.)39 b(They)25
b(ar)n(e)i(in)g(the)f(str)o(uctur)n(e)f Fo(byte-)83 1545
y(vectors)p Fs(.)101 1676 y Fk(\017)46 b Fo(\(byte-vector?)f
Fr(value)p Fo(\))h Fk(!)f Fr(boolean)101 1789 y Fk(\017)h
Fo(\(make-byte-vect)o(or)39 b Fr(k)46 b(\002ll)p Fo(\))f
Fk(!)h Fr(byte-vector)101 1902 y Fk(\017)g Fo(\(byte-vector)40
b Fr(i)46 b(.)14 b(.)g(.)g Fo(\))48 b Fk(!)e Fr(byte-vector)101
2015 y Fk(\017)g Fo(\(byte-vector-le)o(ng)o(th)39 b Fr(byte-vector)p
Fo(\))48 b Fk(!)e Fr(integer)101 2128 y Fk(\017)g Fo(\(byte-vector-re)o
(f)39 b Fr(byte-vector)49 b(k)p Fo(\))d Fk(!)f Fr(integer)101
2241 y Fk(\017)h Fo(\(byte-vector-se)o(t!)39 b Fr(byte-vector)49
b(k)c(i)p Fo(\))83 2531 y Fl(5.4)119 b(Cells)83 2742
y Fs(These)26 b(hold)i(a)g(single)g(value)g(and)g(ar)n(e)h(useful)e
(when)g(a)i(simple)f(indir)n(ection)g(is)g(r)n(equir)n(ed.)43
b(The)83 2855 y(system)21 b(uses)g(these)g(to)h(hold)g(the)g(values)h
(of)g(lexical)h(variables)g(that)e(may)h(be)g Fo(set!)p
Fs(.)101 2987 y Fk(\017)46 b Fo(\(cell?)i Fr(value)p
Fo(\))e Fk(!)g Fr(boolean)101 3100 y Fk(\017)g Fo(\(make-cell)41
b Fr(value)p Fo(\))46 b Fk(!)f Fr(cell)101 3213 y Fk(\017)h
Fo(\(cell-ref)41 b Fr(cell)p Fo(\))46 b Fk(!)g Fr(value)101
3326 y Fk(\017)g Fo(\(cell-set!)41 b Fr(cell)46 b(value)p
Fo(\))83 3616 y Fl(5.5)119 b(Queues)83 3827 y Fs(These)21
b(ar)n(e)i(or)n(dinary)f(\002rst-in,)h(\002rst-out)e(queues.)26
b(The)c(pr)n(ocedur)n(es)f(ar)n(e)i(in)g(str)o(uctur)n(e)e
Fo(queues)p Fs(.)101 3959 y Fk(\017)46 b Fo(\(make-queue\))40
b Fk(!)45 b Fr(queue)101 4072 y Fk(\017)h Fo(\(queue?)i
Fr(value)p Fo(\))e Fk(!)f Fr(boolean)101 4185 y Fk(\017)h
Fo(\(queue-empty?)f Fr(queue)p Fo(\))g Fk(!)g Fr(boolean)101
4298 y Fk(\017)h Fo(\(enqueue!)41 b Fr(queue)46 b(value)p
Fo(\))101 4410 y Fk(\017)g Fo(\(dequeue!)h Fr(queue)p
Fo(\))e Fk(!)g Fr(value)83 4542 y Fo(Make-queue)21 b
Fs(cr)n(eates)k(an)g(empty)f(queue,)h Fo(queue?)33 b
Fs(is)26 b(a)f(pr)n(edicate)g(for)g(identifying)g(queues,)83
4655 y Fo(queue-empty?)45 b Fs(tells)29 b(you)g(if)i(a)g(queue)d(is)i
(empty)-10 b(,)31 b Fo(enqueue!)46 b Fs(and)30 b Fo(dequeue!)47
b Fs(add)29 b(and)83 4768 y(r)n(emove)22 b(values.)101
4900 y Fk(\017)46 b Fo(\(queue-length)40 b Fr(queue)p
Fo(\))45 b Fk(!)g Fr(integer)101 5012 y Fk(\017)h Fo(\(queue->list)40
b Fr(queue)p Fo(\))45 b Fk(!)g Fr(values)101 5125 y Fk(\017)h
Fo(\(list->queue)40 b Fr(values)p Fo(\))46 b Fk(!)g Fr(queue)101
5238 y Fk(\017)g Fo(\(delete-from-qu)o(eu)o(e!)e Fr(queue)i(value)p
Fo(\))g Fk(!)f Fr(boolean)83 5370 y Fo(Queue-length)28
b Fs(r)n(eturns)k(the)g(number)h(of)h(values)f(in)h Fr(queue)p
Fs(.)60 b Fo(Queue->list)28 b Fs(r)n(eturns)k(the)83
5483 y(values)25 b(in)g Fr(queue)f Fs(as)h(a)g(list,)g(in)g(the)f(or)n
(der)f(in)i(which)g(the)f(values)h(wer)n(e)f(added.)32
b Fo(List->queue)83 5596 y Fs(r)n(eturns)26 b(a)i(queue)e(containing)i
Fr(values)r Fs(,)g(pr)n(eserving)e(their)h(or)n(der)-7
b(.)42 b Fo(Delete-from-que)o(ue)21 b Fs(r)n(e-)83 5709
y(moves)27 b(the)f(\002rst)g(instance)h(of)g Fr(value)h
Fs(fr)n(om)g Fo(queue)p Fs(,)d(using)i Fo(eq?)40 b Fs(for)27
b(comparisons.)40 b Fo(Delete-)83 5822 y(from-queue)18
b Fs(r)n(eturns)k Fo(#t)f Fs(if)j Fr(value)g Fs(is)e(found)g(and)h
Fo(#f)f Fs(if)h(it)g(is)g(not.)1748 6071 y(29)p eop
%%Page: 30 36
30 35 bop 166 573 a Fl(5.6)119 b(Arrays)166 784 y Fs(These)17
b(pr)n(ovide)g(N-dimensional,)i(zer)n(o-based)f(arrays)g(and)g(ar)n(e)g
(in)h(the)e(str)o(uctur)n(e)g Fo(arrays)p Fs(.)24 b(The)166
897 y(array)f(interface)g(is)g(derived)e(fr)n(om)i(one)f(invented)g(by)
g(Alan)i(Bawden.)184 1070 y Fk(\017)46 b Fo(\(make-array)41
b Fr(value)46 b(dimension)1541 1084 y Fm(0)1627 1070
y Fr(.)14 b(.)g(.)g Fo(\))48 b Fk(!)e Fr(array)184 1183
y Fk(\017)g Fo(\(array)d Fr(dimensions)k(element)1390
1197 y Fm(0)1475 1183 y Fr(.)14 b(.)g(.)g Fo(\))49 b
Fk(!)c Fr(array)184 1296 y Fk(\017)h Fo(\(copy-array)41
b Fr(array)p Fo(\))46 b Fk(!)g Fr(array)166 1468 y Fo(Make-array)23
b Fs(makes)j(a)i(new)e(array)i(with)f(the)f(given)h(dimensions,)g(each)
g(of)g(which)h(must)e(be)166 1581 y(a)j(non-negative)e(integer)-7
b(.)42 b(Every)27 b(element)g(is)h(initially)i(set)d(to)g
Fr(value)p Fs(.)45 b Fo(Array)26 b Fs(Returns)g(a)j(new)166
1694 y(array)36 b(with)g(the)g(given)g(dimensions)f(and)h(elements.)66
b Fr(Dimensions)37 b Fs(must)e(be)h(a)h(list)f(of)g(non-)166
1807 y(negative)26 b(integers,)g(The)g(number)g(of)h(elements)e(should)
h(be)g(the)g(equal)h(to)f(the)g(pr)n(oduct)f(of)i(the)166
1920 y(dimensions.)g(The)22 b(elements)f(ar)n(e)i(stor)n(ed)e(in)i(r)n
(ow-major)g(or)n(der)-7 b(.)331 2109 y Fo(\(make-array)50
b('a)k(2)g(3\))f Fk(!)i(f)p Fo(Array)d(2)j(3)p Fk(g)331
2335 y Fo(\(array)d('\(2)h(3\))h('a)g('b)f('c)h('d)g('e)f('f\))550
2449 y Fk(!)h(f)p Fo(Array)f(2)h(3)p Fk(g)307 2638 y
Fo(Copy-array)24 b Fs(r)n(eturns)k(a)h(copy)f(of)h Fr(array)p
Fs(.)48 b(The)27 b(copy)h(is)h(identical)h(to)e(the)g
Fr(array)i Fs(but)f(does)166 2750 y(not)22 b(shar)n(e)g(storage)f(with)
i(it.)184 2923 y Fk(\017)46 b Fo(\(array?)i Fr(value)p
Fo(\))e Fk(!)f Fr(boolean)166 3095 y Fs(Returns)21 b
Fo(#t)h Fs(if)h Fr(value)h Fs(is)f(an)g(array)-10 b(.)184
3267 y Fk(\017)46 b Fo(\(array-ref)41 b Fr(array)47 b(index)1309
3281 y Fm(0)1395 3267 y Fr(.)14 b(.)g(.)g Fo(\))49 b
Fk(!)c Fr(value)184 3380 y Fk(\017)h Fo(\(array-set!)41
b Fr(array)47 b(value)f(index)1606 3394 y Fm(0)1692 3380
y Fr(.)14 b(.)g(.)g Fo(\))184 3493 y Fk(\017)46 b Fo(\(array->vector)39
b Fr(array)p Fo(\))47 b Fk(!)e Fr(vector)184 3606 y Fk(\017)h
Fo(\(array-dimensio)o(ns)39 b Fr(array)p Fo(\))47 b Fk(!)e
Fr(list)166 3779 y Fo(Array-ref)26 b Fs(r)n(eturns)k(the)f(speci\002ed)
g(array)i(element)f(and)g Fo(array-set!)47 b Fs(r)n(eplaces)31
b(the)e(ele-)166 3891 y(ment)22 b(with)h Fr(value)p Fs(.)331
4081 y Fo(\(let)53 b(\(\(a)g(\(array)f('\(2)h(3\))h('a)g('b)f('c)h('d)f
('e)h('f\)\)\))440 4194 y(\(let)f(\(\(x)g(\(array-ref)d(a)k(0)h
(1\)\)\))550 4307 y(\(array-set!)49 b(a)54 b('g)g(0)g(1\))550
4420 y(\(list)e(x)i(\(array-ref)c(a)k(0)g(1\)\)\)\))550
4534 y Fk(!)g Fo('\(b)f(g\))307 4723 y(Array->vector)24
b Fs(r)n(eturns)k(a)h(vector)g(containing)h(the)e(elements)g(of)h
Fr(array)j Fs(in)e(r)n(ow-major)166 4836 y(or)n(der)-7
b(.)27 b Fo(Array-dimension)o(s)17 b Fs(r)n(eturns)k(the)h(dimensions)f
(of)i(the)f(array)h(as)f(a)i(list.)184 5008 y Fk(\017)46
b Fo(\(make-shared-ar)o(ra)o(y)39 b Fr(array)48 b(linear-map)f
(dimension)2367 5022 y Fm(0)2453 5008 y Fr(.)14 b(.)g(.)g
Fo(\))49 b Fk(!)c Fr(array)166 5180 y Fo(Make-shared-arr)o(ay)29
b Fs(makes)34 b(a)i(new)f(array)g(that)g(shar)n(es)g(storage)e(with)i
Fr(array)i Fs(and)f(uses)166 5293 y Fr(linear-map)25
b Fs(to)e(map)g(indexes)f(to)g(elements.)28 b Fr(Linear-map)d
Fs(must)d(accept)h(as)g(many)h(ar)n(guments)e(as)166
5406 y(the)29 b(number)h(of)g Fr(dimension)p Fs(s)h(given)f(and)g(must)
f(r)n(eturn)g(a)i(list)f(of)g(non-negative)f(integers)f(that)166
5519 y(ar)n(e)23 b(valid)h(indexes)d(into)i Fr(array)p
Fs(.)29 b(\241)331 5708 y Fo(\(array-ref)50 b(\(make-shared-arr)o(ay)e
(a)54 b(f)g(i0)g(i1)f(...\))931 5822 y(j0)h(j1)g(...\))1831
6071 y Fs(30)p eop
%%Page: 31 37
31 36 bop 83 573 a Fs(is)23 b(equivalent)g(to)248 788
y Fo(\(apply)52 b(array-ref)f(a)j(\(f)f(j0)h(j1)g(...\)\))224
997 y Fs(As)24 b(an)i(example,)f(the)e(following)j(function)e(makes)h
(the)f(transpose)e(of)j(a)g(two-dimensional)83 1110 y(array:)248
1325 y Fo(\(define)52 b(\(transpose)e(array\))357 1444
y(\(let)j(\(\(dimensions)c(\(array-dimensio)o(ns)f(array\)\)\))467
1562 y(\(make-shared-a)o(rr)o(ay)g(array)1503 1681 y(\(lambda)j(\(x)j
(y\))1612 1799 y(\(list)e(y)i(x\)\))1503 1917 y(\(cadr)e(dimensions\))
1503 2036 y(\(car)h(dimensions\)\)\)\))248 2273 y(\(array->vector)357
2391 y(\(transpose)467 2509 y(\(array)e('\(2)j(3\))f('a)h('b)f('c)h('d)
g('e)f('f\)\)\))576 2628 y Fk(!)h Fo('\(a)f(d)h(b)g(e)h(c)f(f\))83
2960 y Fl(5.7)119 b(Records)83 3182 y Fs(New)39 b(types)g(can)i(be)f
(constr)o(ucted)e(using)i(the)g Fo(define-record-)o(ty)o(pe)34
b Fs(macr)n(o)41 b(fr)n(om)g(the)83 3295 y Fo(define-record-t)o(yp)o
(es)16 b Fs(str)o(uctur)n(e)22 b(The)g(general)g(syntax)f(is:)248
3510 y Fo(\(define-record-t)o(yp)o(e)48 b Fr(tag)56 b(type-name)357
3629 y Fo(\()p Fr(constructor-name)g(\002eld-tag)h Fo(...\))357
3747 y Fr(pr)n(edicate-name)357 3865 y Fo(\()p Fr(\002eld-tag)g
(accessor-name)g Fo([)p Fr(modi\002er-name)p Fo(]\))357
3984 y(...\))83 4193 y Fs(This)22 b(makes)g(the)g(following)h
(de\002nitions:)101 4403 y Fk(\017)46 b Fr(type-name)2751
b Fs(type)101 4516 y Fk(\017)46 b Fo(\()p Fr(constructor-name)h
(\002eld-init)g(.)14 b(.)g(.)g Fo(\))49 b Fk(!)c Fr(type-name)101
4629 y Fk(\017)h Fo(\()p Fr(pr)n(edicate-name)j(value)p
Fo(\))d Fk(!)f Fr(boolean)101 4742 y Fk(\017)h Fo(\()p
Fr(accessor-name)i(type-name)p Fo(\))e Fk(!)g Fr(value)101
4854 y Fk(\017)g Fo(\()p Fr(modi\002er-name)h(type-name)g(value)p
Fo(\))83 5064 y Fr(T)-8 b(ype-name)35 b Fs(is)g(the)e(r)n(ecor)n(d)h
(type)f(itself,)k(and)d(can)i(be)e(used)f(to)g(specify)h(a)h(print)f
(method)f(\(see)83 5177 y(below\).)c Fr(Constructor-name)c
Fs(is)e(a)h(constr)o(uctor)e(that)g(accepts)h(values)h(for)f(the)f
(\002elds)g(whose)g(tags)83 5290 y(ar)n(e)33 b(speci\002ed.)57
b Fr(Pr)n(edicate-name)35 b Fs(is)e(a)g(pr)n(edicate)g(that)f(r)n
(eturns)f Fo(#t)h Fs(for)h(elements)e(of)i(the)f(type)83
5403 y(and)e Fo(#f)g Fs(for)g(everything)f(else.)50 b(The)30
b Fr(accessor-name)p Fs(s)i(r)n(etrieve)e(the)f(values)i(of)f
(\002elds,)i(and)e(the)83 5516 y Fr(modi\002er-name)p
Fs('s)e(update)d(them.)38 b Fr(T)-10 b(ag)26 b Fs(is)g(used)f(in)i
(printing)e(instances)h(of)g(the)g(r)n(ecor)n(d)f(type)g(and)83
5629 y(the)20 b Fr(\002eld-tag)p Fs(s)i(ar)n(e)f(used)e(in)i(the)f
(inspector)f(and)h(to)g(match)h(constr)o(uctor)e(ar)n(guments)h(with)g
(\002elds.)101 5822 y Fk(\017)46 b Fo(\(define-record-)o(di)o(sc)o(los)
o(er)39 b Fr(type)47 b(discloser)p Fo(\))1748 6071 y
Fs(31)p eop
%%Page: 32 38
32 37 bop 166 573 a Fo(Define-record-d)o(is)o(cl)o(os)o(er)17
b Fs(determines)22 b(how)h(r)n(ecor)n(ds)g(of)g(type)f
Fr(type)j Fs(ar)n(e)f(printed.)29 b Fr(Dis-)166 686 y(closer)g
Fs(should)d(be)h(pr)n(ocedur)n(e)e(which)j(takes)e(a)h(single)g(r)n
(ecor)n(d)g(of)g(type)e Fr(type)k Fs(and)e(r)n(eturns)e(a)j(list)166
799 y(whose)g(car)h(is)g(a)h(symbol.)47 b(The)28 b(r)n(ecor)n(d)g(will)
j(be)e(printed)e(as)i(the)f(value)i(r)n(eturned)d(by)i
Fr(discloser)166 912 y Fs(with)23 b(curly)f(braces)h(used)e(instead)h
(of)h(the)f(usual)g(par)n(enthesis.)307 1024 y(For)g(example)331
1197 y Fo(\(define-record-t)o(yp)o(e)48 b(pare)53 b(:pare)440
1310 y(\(kons)g(x)h(y\))440 1423 y(pare?)440 1536 y(\(x)g(kar)f
(set-kar!\))440 1649 y(\(y)h(kdr\)\))166 1822 y Fs(de\002nes)31
b Fo(kons)f Fs(to)i(be)h(a)g(constr)o(uctor)-7 b(,)33
b Fo(kar)f Fs(and)g Fo(kdr)f Fs(to)h(be)h(accessors,)g
Fo(set-kar!)54 b Fs(to)32 b(be)h(a)166 1935 y(modi\002er)-7
b(,)36 b(and)e Fo(pare?)59 b Fs(to)33 b(be)h(a)g(pr)n(edicate)f(for)h
(a)g(new)f(type)f(of)i(object.)61 b(The)33 b(type)f(itself)i(is)166
2048 y(named)22 b Fo(:pare)p Fs(.)k Fo(Pare)21 b Fs(is)i(a)g(tag)f
(used)f(in)j(printing)e(the)g(new)g(objects.)307 2161
y(By)k(default,)h(the)f(new)g(objects)g(print)g(as)h
Fo(#)p Fk(f)p Fo(Pare)p Fk(g)p Fs(.)38 b(The)26 b(print)g(method)f(can)
j(be)e(modi\002ed)166 2274 y(using)c Fo(define-record-d)o(is)o(cl)o(os)
o(er)p Fs(:)331 2446 y Fo(\(define-record-d)o(is)o(cl)o(os)o(er)48
b(:pare)440 2559 y(\(lambda)k(\(p\))h(`\(pare)f(,\(kar)g(p\))i(,\(kdr)e
(p\)\)\)\))166 2732 y Fs(will)24 b(cause)e(the)g(r)n(esult)g(of)h
Fo(\(kons)52 b(1)i(2\))22 b Fs(to)g(print)g(as)h Fo(#)p
Fk(f)p Fo(Pare)53 b(1)h(2)p Fk(g)p Fs(.)307 2845 y Fo(Define-record-r)o
(es)o(ume)o(r)16 b Fs(\(section)22 b(6.9.3\))i(can)f(be)f(used)f(to)h
(contr)n(ol)g(how)g(r)n(ecor)n(ds)g(ar)n(e)166 2958 y(stor)n(ed)f(in)i
(heap)f(images.)166 3210 y Ff(5.7.1)99 b(Low-level)26
b(access)f(to)h(records)166 3387 y Fs(Recor)n(ds)c(ar)n(e)i
(implemented)e(using)h(primitive)h(objects)f(exactly)g(analogous)g(to)g
(vectors.)29 b(Every)166 3500 y(r)n(ecor)n(d)h(has)f(a)i(r)n(ecor)n(d)e
(type)f(\(which)j(is)f(another)f(r)n(ecor)n(d\))h(in)g(the)f(\002rst)g
(slot.)49 b(Note)28 b(that)h(use)g(of)166 3612 y(these)f(pr)n(ocedur)n
(es,)h(especially)h Fo(record-set!)p Fs(,)c(br)n(eaks)j(the)g(r)n(ecor)
n(d)g(abstraction)h(described)166 3725 y(above;)23 b(caution)g(is)f
(advised.)307 3838 y(These)f(pr)n(ocedur)n(es)g(ar)n(e)i(in)g(the)f
(str)o(uctur)n(e)g Fo(records)p Fs(.)184 3995 y Fk(\017)46
b Fo(\(make-record)40 b Fr(n)45 b(value)p Fo(\))h Fk(!)f
Fr(r)n(ecord)184 4108 y Fk(\017)h Fo(\(record)c Fr(value)47
b(.)14 b(.)g(.)g Fo(\))48 b Fk(!)e Fr(r)n(ecord-vector)184
4220 y Fk(\017)g Fo(\(record?)h Fr(value)p Fo(\))f Fk(!)g
Fr(boolean)184 4333 y Fk(\017)g Fo(\(record-length)39
b Fr(r)n(ecord)p Fo(\))47 b Fk(!)f Fr(integer)184 4446
y Fk(\017)g Fo(\(record-type)40 b Fr(r)n(ecord)p Fo(\))47
b Fk(!)f Fr(value)184 4559 y Fk(\017)g Fo(\(record-ref)41
b Fr(r)n(ecord)47 b(i)p Fo(\))f Fk(!)f Fr(value)184 4672
y Fk(\017)h Fo(\(record-set!)40 b Fr(r)n(ecord)48 b(i)e(value)p
Fo(\))166 4828 y Fs(These)36 b(the)h(same)h(as)g(the)f(standar)n(d)g
Fo(vector-)e Fs(pr)n(ocedur)n(es)h(except)h(that)h(they)e(operate)g(on)
166 4941 y(r)n(ecor)n(ds.)98 b(The)46 b(value)h(r)n(eturned)e(by)h
Fo(record-length)41 b Fs(includes)46 b(the)f(slot)h(holding)g(the)166
5054 y(r)n(ecor)n(d's)22 b(type.)k Fo(\(record-type)50
b Fr(x)p Fo(\))22 b Fs(is)h(equivalent)g(to)f Fo(\(record-ref)49
b Fr(x)55 b Fo(0\))p Fs(.)166 5306 y Ff(5.7.2)99 b(Record)25
b(types)166 5483 y Fs(Recor)n(d)j(types)f(ar)n(e)i(themselves)e(r)n
(ecor)n(ds)i(of)f(a)i(particular)g(type)d(\(the)i(\002rst)f(slot)g(of)h
Fo(:record-)166 5596 y(type)18 b Fs(points)h(to)g(itself\).)27
b(A)20 b(r)n(ecor)n(d)g(type)e(contains)i(four)f(values:)27
b(the)19 b(name)h(of)g(the)f(r)n(ecor)n(d)h(type,)166
5709 y(a)30 b(list)g(of)f(the)g(names)g(its)g(\002elds,)h(and)f(pr)n
(ocedur)n(es)f(for)h(disclosing)g(and)h(r)n(esuming)e(r)n(ecor)n(ds)h
(of)166 5822 y(that)22 b(type.)27 b(Pr)n(ocedur)n(es)21
b(for)h(manipulating)i(them)e(ar)n(e)h(in)g(the)f(str)o(uctur)n(e)g
Fo(record-types)p Fs(.)1831 6071 y(32)p eop
%%Page: 33 39
33 38 bop 101 573 a Fk(\017)46 b Fo(\(make-record-ty)o(pe)39
b Fr(name)45 b(\002eld-names)p Fo(\))i Fk(!)e Fr(r)n(ecord-type)101
686 y Fk(\017)h Fo(\(record-type?)f Fr(value)p Fo(\))h
Fk(!)f Fr(boolean)101 799 y Fk(\017)h Fo(\(record-type-na)o(me)39
b Fr(r)n(ecord-type)p Fo(\))49 b Fk(!)c Fr(symbol)101
912 y Fk(\017)h Fo(\(record-type-fi)o(el)o(d-)o(nam)o(es)39
b Fr(r)n(ecord-type)p Fo(\))49 b Fk(!)c Fr(symbols)101
1109 y Fk(\017)h Fo(\(record-constru)o(ct)o(or)39 b Fr(r)n(ecord-type)
49 b(\002eld-names)p Fo(\))e Fk(!)f Fr(pr)n(ocedur)n(e)101
1222 y Fk(\017)g Fo(\(record-predica)o(te)39 b Fr(r)n(ecord-type)p
Fo(\))49 b Fk(!)c Fr(pr)n(ocedur)n(e)101 1335 y Fk(\017)h
Fo(\(record-accesso)o(r)39 b Fr(r)n(ecord-type)50 b(\002eld-name)p
Fo(\))c Fk(!)g Fr(pr)n(ocedur)n(e)101 1448 y Fk(\017)g
Fo(\(record-modifie)o(r)39 b Fr(r)n(ecord-type)50 b(\002eld-name)p
Fo(\))c Fk(!)g Fr(pr)n(ocedur)n(e)83 1603 y Fs(These)40
b(pr)n(ocedur)n(es)f(constr)o(uct)h(the)h(usual)g(r)n(ecor)n
(d-manipulating)h(pr)n(ocedur)n(es.)82 b Fo(Record-)83
1716 y(constructor)14 b Fs(r)n(eturns)j(a)i(constr)o(uctor)e(that)h(is)
h(passed)d(the)i(initial)i(values)f(for)f(the)g(\002elds)g(spec-)83
1829 y(i\002ed)26 b(and)h(r)n(eturns)e(a)j(new)e(r)n(ecor)n(d.)39
b Fo(Record-predicat)o(e)21 b Fs(r)n(eturns)k(a)i(pr)n(edicate)g(that)f
(r)n(eturn)83 1942 y(tr)o(ue)17 b(when)g(passed)f(a)i(r)n(ecor)n(d)g
(of)g(type)e Fr(r)n(ecord-type)22 b Fs(and)17 b(false)i(otherwise.)24
b Fo(Record-accesso)o(r)83 2055 y Fs(and)32 b Fo(record-modifie)o(r)25
b Fs(r)n(eturn)31 b(pr)n(ocedur)n(es)f(that)h(r)n(efer)n(ence)g(and)g
(set)f(the)h(given)h(\002eld)f(in)83 2168 y(r)n(ecor)n(ds)22
b(of)h(the)e(appr)n(oriate)i(type.)101 2323 y Fk(\017)46
b Fo(\(define-record-)o(di)o(sc)o(los)o(er)39 b Fr(r)n(ecord-type)49
b(discloser)p Fo(\))101 2436 y Fk(\017)d Fo(\(define-record-)o(re)o(su)
o(mer)39 b Fr(r)n(ecord-type)49 b(r)n(esumer)p Fo(\))83
2591 y(Record-types)19 b Fs(is)24 b(the)f(initial)j(exporter)c(of)i
Fo(define-record-)o(di)o(sc)o(los)o(er)17 b Fs(\(r)n(e-exported)83
2704 y(by)43 b Fo(define-record-)o(ty)o(pe)o(s)37 b Fs(described)k
(above\))j(and)e Fo(define-record-di)o(sc)o(lo)o(se)o(r)83
2817 y Fs(\(r)n(e-exported)20 b(by)j Fo(external-calls)16
b Fs(\(section)22 b(6.9.3\)\).)224 2930 y(The)29 b(pr)n(ocedur)n(es)f
(described)g(in)i(this)g(section)e(can)j(be)e(used)f(to)h(de\002ne)g
(new)f(r)n(ecor)n(d-type-)83 3043 y(de\002ning)22 b(macr)n(os.)248
3215 y Fo(\(define-record-t)o(yp)o(e)48 b(pare)53 b(:pare)357
3328 y(\(kons)g(x)h(y\))357 3440 y(pare?)357 3553 y(\(x)g(kar)f
(set-kar!\))357 3666 y(\(y)h(kdr\)\))83 3838 y Fs(is)23
b(\(sematically\))h(equivalent)f(to)248 4010 y Fo(\(define)52
b(:pare)g(\(make-record-ty)o(pe)c('pare)k('\(x)h(y\)\)\))248
4123 y(\(define)f(kons)g(\(record-construc)o(to)o(r)c(:pare)53
b('\(x)g(y\)\)\))248 4236 y(\(define)f(kar)h(\(record-accesso)o(r)48
b(:pare)k('x\)\))248 4349 y(\(define)g(set-kar!)f(\(record-modifi)o(er)
d(:pare)k('x\)\))248 4462 y(\(define)g(kdr)h(\(record-accesso)o(r)48
b(:pare)k('y\)\))224 4633 y Fs(The)22 b(\223\(semantically\)\224)j
(above)e(is)f(because)g Fo(define-record-ty)o(pe)16 b
Fs(adds)21 b(declarations,)83 4746 y(which)29 b(allows)g(the)f(type)f
(checker)h(to)g(detect)f(some)h(misuses)f(of)i(r)n(ecor)n(ds,)g(and)f
(uses)g(mor)n(e)g(ef-)83 4859 y(\002cient)k(de\002nitions)f(for)i(the)e
(constr)o(uctor)-7 b(,)34 b(accessors,)f(and)g(modi\002ers.)56
b(Ignoring)31 b(the)g(decla-)83 4972 y(rations,)i(which)g(will)g(have)f
(to)f(wait)h(for)g(another)f(edition)g(of)h(the)f(manual,)k(what)d(the)
f(above)83 5085 y(example)23 b(actually)g(expands)f(into)g(is:)248
5257 y Fo(\(define)52 b(:pare)g(\(make-record-ty)o(pe)c('pare)k('\(x)h
(y\)\)\))248 5370 y(\(define)f(\(kons)g(x)i(y\))g(\(record)d(:pare)h(x)
i(y\)\))248 5483 y(\(define)e(\(kar)g(r\))i(\(checked-record)o(-r)o(ef)
48 b(r)54 b(:pare)e(1\)\))248 5596 y(\(define)g(\(set-kar!)e(r)k(new\))
357 5709 y(\(checked-record-)o(se)o(t!)48 b(r)54 b(:pare)e(1)i(new\)\))
248 5822 y(\(define)e(\(kdr)g(r\))i(\(checked-record)o(-r)o(ef)48
b(r)54 b(:pare)e(2\)\))1748 6071 y Fs(33)p eop
%%Page: 34 40
34 39 bop 166 573 a Fo(Checked-record-)o(re)o(f)17 b
Fs(and)23 b Fo(Checked-record)o(-se)o(t!)f Fs(ar)n(e)i(low-level)f(pr)n
(ocedur)n(es)e(that)166 686 y(check)h(the)g(type)f(of)i(the)f(r)n(ecor)
n(d)g(and)h(access)f(or)h(modify)f(it)h(using)f(a)h(single)f(VM)h
(instr)o(uction.)166 981 y Fl(5.8)119 b(Finite)30 b(record)f(types)166
1192 y Fs(The)19 b(str)o(uctur)n(e)g Fo(finite-types)c
Fs(has)20 b(two)g(macr)n(os)g(for)g(de\002ning)g(`\002nite')g(r)n(ecor)
n(d)g(types.)25 b(These)166 1305 y(ar)n(e)g(r)n(ecor)n(d)g(types)d(for)
j(which)g(ther)n(e)f(ar)n(e)h(a)g(\002xed)f(number)g(of)h(instances,)f
(all)j(of)d(which)i(ar)n(e)f(cr)n(e-)166 1418 y(ated)d(at)g(the)f(same)
i(time)f(as)g(the)g(r)n(ecor)n(d)g(type)e(itself.)28
b(The)21 b(syntax)h(for)g(de\002ning)f(an)i(enumerated)166
1531 y(type)e(is:)331 1703 y Fo(\(define-enumerat)o(ed)o(-t)o(yp)o(e)48
b Fr(tag)56 b(type-name)440 1816 y(pr)n(edicate-name)440
1929 y(vector-of-instances-name)440 2042 y(name-accessor)440
2155 y(index-accessor)440 2267 y Fo(\()p Fr(instance-name)g
Fo(...\)\))166 2439 y Fs(This)27 b(de\002nes)d(a)k(new)e(r)n(ecor)n(d)g
(type,)g(bound)g(to)g Fr(type-name)p Fs(,)k(with)c(as)h(many)g
(instances)f(as)h(ther)n(e)166 2552 y(ar)n(e)36 b Fr(instance-name)p
Fs('s.)66 b Fr(V)-8 b(ector-of-instances-name)38 b Fs(is)d(bound)g(to)f
(a)i(vector)f(containing)g(the)f(in-)166 2665 y(stances)22
b(of)h(the)f(type)f(in)i(the)f(same)h(or)n(der)e(as)i(the)f
Fr(instance-name)i Fs(list.)29 b Fr(T)-10 b(ag)23 b Fs(is)g(bound)f(to)
g(a)h(macr)n(o)166 2778 y(that)d(when)g(given)g(an)h
Fr(instance-name)h Fs(expands)d(into)h(an)h(expr)n(ession)d(that)j(r)n
(eturns)e(corr)n(espond-)166 2891 y(ing)28 b(instance.)44
b(The)27 b(name)h(lookup)f(is)h(done)e(at)i(macr)n(o)h(expansion)e
(time.)44 b Fr(Pr)n(edicate-name)31 b Fs(is)d(a)166 3004
y(pr)n(edicate)19 b(for)h(the)f(new)h(type.)25 b Fr(Name-accessor)e
Fs(and)c Fr(index-accessor)24 b Fs(ar)n(e)c(accessors)f(for)h(the)f
(name)166 3117 y(and)k(index)f(\(in)h Fr(vector-of-instances)p
Fs(\))k(of)c(instances)f(of)h(the)e(type.)331 3311 y
Fo(\(define-enumerat)o(ed)o(-t)o(yp)o(e)48 b(color)53
b(:color)440 3423 y(color?)440 3536 y(colors)440 3649
y(color-name)440 3762 y(color-index)440 3875 y(\(black)f(white)h
(purple)e(maroon\)\))331 4101 y(\(color-name)f(\(vector-ref)f(colors)j
(0\)\))h Fk(!)i Fo(black)331 4214 y(\(color-name)50 b(\(color)i
(white\)\))487 b Fk(!)55 b Fo(white)331 4327 y(\(color-index)49
b(\(color)j(purple\)\))378 b Fk(!)55 b Fo(2)307 4520
y Fs(Finite)31 b(types)d(ar)n(e)j(enumerations)f(that)g(allow)i(the)e
(user)g(to)g(add)g(additional)i(\002elds)e(in)h(the)166
4633 y(type.)26 b(The)c(syntax)g(for)g(de\002ning)g(a)h(\002nite)g
(type)e(is:)331 4805 y Fo(\(define-finite-t)o(yp)o(e)48
b Fr(tag)56 b(type-name)440 4918 y Fo(\()p Fr(\002eld-tag)h
Fo(...\))440 5031 y Fr(pr)n(edicate-name)440 5144 y
(vector-of-instances-name)440 5257 y(name-accessor)440
5370 y(index-accessor)440 5483 y Fo(\()p Fr(\002eld-tag)g
(accessor-name)g Fo([)p Fr(modi\002er-name)p Fo(]\))440
5596 y(...)440 5709 y(\(\()p Fr(instance-name)e(\002eld-value)i
Fo(...\))495 5822 y(...\)\))1831 6071 y Fs(34)p eop
%%Page: 35 41
35 40 bop 83 573 a Fs(The)25 b(additional)h(\002elds)e(ar)n(e)i
(speci\002ed)e(exactly)h(as)h(with)f Fo(define-record-t)o(yp)o(e)p
Fs(.)30 b(The)24 b(\002eld)83 686 y(ar)n(guments)29 b(to)h(the)f
(constr)o(uctor)g(ar)n(e)h(listed)f(after)h(the)f Fr(type-name)p
Fs(;)36 b(these)28 b(do)h(not)h(include)g(the)83 799
y(name)c(and)f(index)g(\002elds.)36 b(The)25 b(form)h(ends)e(with)h
(the)g(names)g(and)h(the)f(initial)i(\002eld)e(values)h(for)83
912 y(the)i(instances)h(of)g(the)g(type.)46 b(The)28
b(instances)h(ar)n(e)g(constr)o(ucted)f(by)h(applying)g(the)f
(\(unnamed\))83 1024 y(constr)o(uctor)k(to)g(these)f(initial)k(\002eld)
e(values.)59 b(The)32 b(name)h(must)f(be)h(\002rst)f(and)h(the)f(r)n
(emaining)83 1137 y(values)23 b(must)f(match)h(the)f
Fr(\002eld-tag)p Fs(s)j(in)e(the)f(constr)o(uctor)7 b('s)21
b(ar)n(gument)h(list.)248 1368 y Fo(\(define-finite-t)o(yp)o(e)48
b(color)53 b(:color)357 1484 y(\(red)g(green)f(blue\))357
1600 y(color?)357 1715 y(colors)357 1831 y(color-name)357
1947 y(color-index)357 2063 y(\(red)162 b(color-red\))357
2179 y(\(green)52 b(color-green\))357 2295 y(\(blue)107
b(color-blue\))357 2411 y(\(\(black)215 b(0)164 b(0)f(0\))412
2527 y(\(white)106 b(255)54 b(255)f(255\))412 2643 y(\(purple)e(160)108
b(32)54 b(240\))412 2758 y(\(maroon)d(176)108 b(48)g(96\)\)\))248
2990 y(\(color-name)50 b(\(color)i(black\)\))487 b Fk(!)55
b Fo(black)248 3106 y(\(color-name)50 b(\(vector-ref)f(colors)j(1\)\))h
Fk(!)i Fo(white)248 3222 y(\(color-index)49 b(\(color)j(purple\)\))378
b Fk(!)55 b Fo(2)248 3338 y(\(color-red)50 b(\(color)i(maroon\)\))487
b Fk(!)55 b Fo(176)83 3655 y Fl(5.9)119 b(Hash)29 b(tables)83
3872 y Fs(These)21 b(ar)n(e)i(generic)f(hash)h(tables,)g(and)g(ar)n(e)g
(in)g(the)f(str)o(uctur)n(e)g Fo(tables)p Fs(.)j(Strictly)e(speaking)e
(they)83 3985 y(ar)n(e)26 b(mor)n(e)f(maps)g(than)g(tables,)h(as)g
(every)e(table)i(has)f(a)h(value)g(for)f(every)f(possible)h(key)f
(\(for)h(that)83 4098 y(type)c(of)i(table\).)28 b(All)c(but)e(a)h
(\002nite)g(number)f(of)h(those)e(values)i(ar)n(e)g Fo(#f)p
Fs(.)101 4281 y Fk(\017)46 b Fo(\(make-table\))40 b Fk(!)45
b Fr(table)101 4394 y Fk(\017)h Fo(\(make-symbol-ta)o(bl)o(e\))39
b Fk(!)45 b Fr(symbol-table)101 4506 y Fk(\017)h Fo(\(make-string-ta)o
(bl)o(e\))39 b Fk(!)45 b Fr(string-table)101 4619 y Fk(\017)h
Fo(\(make-integer-t)o(ab)o(le)o(\))39 b Fk(!)46 b Fr(integer-table)101
4732 y Fk(\017)g Fo(\(make-table-mak)o(er)39 b Fr(compar)n(e-pr)n(oc)49
b(hash-pr)n(oc)p Fo(\))g Fk(!)c Fr(pr)n(ocedur)n(e)101
4845 y Fk(\017)h Fo(\(make-table-imm)o(ut)o(ab)o(le!)39
b Fr(table)p Fo(\))83 5028 y Fs(The)c(\002rst)g(four)g(functions)g
(listed)g(make)h(various)g(kinds)f(of)g(tables.)67 b
Fo(Make-table)31 b Fs(r)n(eturns)83 5141 y(a)g(table)g(whose)f(keys)f
(may)i(be)f(symbols,)i(integer)-7 b(,)32 b(characters,)g(booleans,)g
(or)f(the)e(empty)h(list)83 5254 y(\(these)35 b(ar)n(e)h(also)g(the)g
(values)g(that)g(may)g(be)g(used)f(in)h Fo(case)f Fs(expr)n(essions\).)
66 b(As)35 b(with)h Fo(case)p Fs(,)83 5367 y(comparison)25
b(is)h(done)e(using)h Fo(eqv?)p Fs(.)35 b(The)24 b(comparison)i(pr)n
(ocedur)n(es)e(used)g(in)i(symbol,)f(string,)83 5480
y(and)e(integer)e(tables)i(ar)n(e)g Fo(eq?)p Fs(,)e Fo(string=?)p
Fs(,)d(and)23 b Fo(=)p Fs(.)224 5596 y Fo(Make-table-make)o(r)k
Fs(takes)32 b(two)g(pr)n(ocedur)n(es)g(as)h(ar)n(guments)f(and)h(r)n
(eturns)f(a)h(nullary)83 5709 y(table-making)42 b(pr)n(ocedur)n(e.)83
b Fr(Compar)n(e-pr)n(oc)45 b Fs(should)40 b(be)i(a)g(two-ar)n(gument)e
(equality)h(pr)n(edi-)83 5822 y(cate.)52 b Fr(Hash-pr)n(oc)33
b Fs(should)c(be)i(a)g(one)f(ar)n(gument)g(pr)n(ocedur)n(e)f(that)h
(takes)f(a)j(key)d(and)h(r)n(eturns)g(a)1748 6071 y(35)p
eop
%%Page: 36 42
36 41 bop 166 573 a Fs(non-negative)25 b(integer)f(hash)i(value.)38
b(If)26 b Fo(\()p Fr(compar)n(e-pr)n(oc)57 b(x)e(y)p
Fo(\))26 b Fs(r)n(eturns)f(tr)o(ue,)g(then)g Fo(\(=)54
b(\()p Fr(hash-)166 686 y(pr)n(oc)i(x)p Fo(\))f(\()p
Fr(hash-pr)n(oc)i(y)p Fo(\)\))21 b Fs(must)g(also)g(r)n(eturn)f(tr)o
(ue.)27 b(For)20 b(example,)h Fo(make-integer-ta)o(bl)o(e)166
799 y Fs(could)i(be)f(de\002ned)f(as)i Fo(\(make-table-ma)o(ke)o(r)48
b(=)55 b(abs\))p Fs(.)307 912 y Fo(Make-table-immu)o(ta)o(ble)o(!)22
b Fs(pr)n(ohibits)g(futur)n(e)g(modi\002cation)i(to)e(its)g(ar)n
(gument.)184 1083 y Fk(\017)46 b Fo(\(table?)i Fr(value)p
Fo(\))e Fk(!)f Fr(boolean)184 1196 y Fk(\017)h Fo(\(table-ref)41
b Fr(table)47 b(key)p Fo(\))f Fk(!)f Fr(value)i(or)f
Fo(#f)184 1309 y Fk(\017)g Fo(\(table-set!)41 b Fr(table)46
b(key)h(value)p Fo(\))184 1422 y Fk(\017)f Fo(\(table-walk)41
b Fr(pr)n(ocedur)n(e)48 b(table)p Fo(\))166 1594 y(Table?)40
b Fs(is)28 b(the)e(pr)n(edicate)h(for)h(tables.)42 b
Fo(Table-ref)24 b Fs(and)j Fo(table-set!)38 b Fs(access)28
b(and)f(mod-)166 1707 y(ify)j(the)g(value)g(of)g Fr(key)h
Fs(in)g Fr(table)p Fs(.)51 b Fo(Table-walk)26 b Fs(applies)j
Fr(pr)n(ocedur)n(e)p Fs(,)35 b(which)c(must)e(accept)h(two)166
1820 y(ar)n(guments,)21 b(to)h(every)g(associated)g(key)f(and)i(non-)p
Fo(#f)f Fs(value)h(in)g Fo(table)p Fs(.)184 1991 y Fk(\017)46
b Fo(\(default-hash-f)o(un)o(ct)o(ion)39 b Fr(value)p
Fo(\))46 b Fk(!)f Fr(integer)184 2104 y Fk(\017)h Fo(\(string-hash)40
b Fr(string)p Fo(\))46 b Fk(!)g Fr(integer)166 2276 y
Fo(Default-hash-fu)o(nc)o(ti)o(on)12 b Fs(is)18 b(the)f(hash)i
(function)f(used)f(in)h(the)g(tables)g(r)n(eturned)e(by)i
Fo(make-)166 2389 y(table)p Fs(,)i(and)j Fo(string-hash)18
b Fs(it)k(the)g(one)g(used)f(by)i Fo(make-string-ta)o(bl)o(e)p
Fs(.)166 2689 y Fl(5.10)119 b(Port)30 b(extensions)166
2900 y Fs(These)21 b(pr)n(ocedur)n(es)g(ar)n(e)i(in)g(str)o(uctur)n(e)f
Fo(extended-ports)o Fs(.)184 3072 y Fk(\017)46 b Fo(\(make-string-in)o
(pu)o(t-)o(por)o(t)39 b Fr(string)p Fo(\))46 b Fk(!)g
Fr(input-port)184 3185 y Fk(\017)g Fo(\(make-string-ou)o(tp)o(ut)o(-po)
o(rt)o(\))39 b Fk(!)46 b Fr(output-port)184 3298 y Fk(\017)g
Fo(\(string-output-)o(po)o(rt)o(-ou)o(tp)o(ut)39 b Fr
(string-output-port)p Fo(\))48 b Fk(!)e Fr(string)166
3469 y Fo(Make-string-inp)o(ut)o(-p)o(or)o(t)12 b Fs(r)n(eturns)17
b(an)i(input)e(port)h(that)f(that)h(r)n(eads)g(characters)g(fr)n(om)h
(the)166 3582 y(supplied)24 b(string.)35 b(An)25 b(end-of-\002le)g
(object)g(is)h(r)n(eturned)d(if)j(the)f(user)f(r)n(eads)h(past)g(the)f
(end)h(of)g(the)166 3695 y(string.)g Fo(Make-string-out)o(put)o(-p)o
(or)o(t)12 b Fs(r)n(eturns)k(an)i(output)e(port)h(that)g(saves)g(the)g
(characters)166 3808 y(written)i(to)h(it.)27 b(These)19
b(ar)n(e)h(then)g(r)n(eturned)e(as)i(a)h(string)f(by)g
Fo(string-output-)o(po)o(rt)o(-ou)o(tp)o(ut)o Fs(.)331
4022 y Fo(\(read)53 b(\(make-string-i)o(np)o(ut)o(-po)o(rt)48
b("\(a)53 b(b\)"\)\))550 4135 y Fk(!)h Fo('\(a)f(b\))331
4361 y(\(let)g(\(\(p)g(\(make-string-ou)o(tpu)o(t-)o(po)o(rt)o(\)\))o
(\))440 4474 y(\(write)f('\(a)h(b\))h(p\))440 4587 y(\(let)f(\(\(s)g
(\(string-output-p)o(or)o(t-)o(ou)o(tp)o(ut)48 b(p\)\)\))550
4700 y(\(display)i("c")k(p\))550 4813 y(\(list)e(s)i(\(string-output-)o
(po)o(rt)o(-o)o(ut)o(put)48 b(p\)\)\)\))550 4926 y Fk(!)54
b Fo('\("\(a)e(b\)")h("\(a)h(b\)c"\))184 5139 y Fk(\017)46
b Fo(\(limit-output)40 b Fr(output-port)47 b(n)e(pr)n(ocedur)n(e)p
Fo(\))166 5311 y Fr(Pr)n(ocedur)n(e)i Fs(is)d(called)i(on)e(an)h
(output)e(port.)92 b(Output)43 b(written)h(to)g(that)g(port)f(is)i
(copied)f(to)166 5424 y Fr(output-port)33 b Fs(until)e
Fr(n)g Fs(characters)g(have)g(been)f(written,)i(at)f(which)g(point)f
Fo(limit-output)c Fs(r)n(e-)166 5537 y(turns.)47 b(If)30
b Fr(pr)n(ocedur)n(e)i Fs(r)n(eturns)c(befor)n(e)h(writing)h
Fr(n)f Fs(characters,)i(then)d Fo(limit-output)c Fs(also)30
b(r)n(e-)166 5650 y(turns)22 b(at)g(that)h(time,)f(r)n(egar)n(dless)g
(of)g(how)g(many)h(characters)g(have)g(been)f(written.)184
5822 y Fk(\017)46 b Fo(\(make-tracking-)o(in)o(pu)o(t-p)o(or)o(t)39
b Fr(input-port)p Fo(\))47 b Fk(!)e Fr(input-port)1831
6071 y Fs(36)p eop
%%Page: 37 43
37 42 bop 101 573 a Fk(\017)46 b Fo(\(make-tracking-)o(ou)o(tp)o(ut-)o
(po)o(rt)39 b Fr(output-port)p Fo(\))47 b Fk(!)e Fr(output-port)101
686 y Fk(\017)h Fo(\(current-row)40 b Fr(port)p Fo(\))47
b Fk(!)e Fr(integer)i(or)f Fo(#f)101 799 y Fk(\017)g
Fo(\(current-column)39 b Fr(port)p Fo(\))46 b Fk(!)g
Fr(integer)h(or)f Fo(#f)101 912 y Fk(\017)g Fo(\(fresh-line)41
b Fr(output-port)p Fo(\))83 1076 y(Make-tracking-i)o(np)o(ut)o(-p)o
(ort)27 b Fs(and)33 b Fo(make-tracking-o)o(ut)o(pu)o(t-)o(por)o(t)27
b Fs(r)n(eturn)33 b(ports)83 1189 y(that)g(keep)e(track)i(of)h(the)e
(curr)n(ent)h(r)n(ow)f(and)i(column)f(and)g(ar)n(e)h(otherwise)d
(identical)j(to)f(their)83 1302 y(ar)n(guments.)52 b(Closing)32
b(a)f(tracking)g(port)f(does)g(not)g(close)h(the)g(underlying)e(port.)
53 b Fo(Current-)83 1415 y(row)25 b Fs(and)i Fo(current-column)21
b Fs(r)n(eturn)k Fr(port)r Fs('s)h(curr)n(ent)h(r)n(ead)f(or)h(write)f
(location.)40 b(They)26 b(r)n(eturn)83 1527 y Fo(#f)d
Fs(if)h Fr(port)h Fs(does)d(not)h(keep)f(track)i(of)f(its)h(location.)
31 b Fo(Fresh-line)19 b Fs(writes)k(a)h(newline)f(character)83
1640 y(to)f Fr(output-port)j Fs(if)e Fo(\(current-row)49
b Fr(port)p Fo(\))24 b Fs(is)f(not)f(0.)248 1845 y Fo(\(define)52
b(p)i(\(open-output-p)o(ort)48 b("/tmp/temp"\)\))248
1958 y(\(list)53 b(\(current-row)c(p\))k(\(current-column)48
b(p\)\))467 2071 y Fk(!)54 b Fo('\(0)f(0\))248 2183 y(\(display)e
("012")i(p\))248 2296 y(\(list)g(\(current-row)c(p\))k
(\(current-column)48 b(p\)\))467 2409 y Fk(!)54 b Fo('\(0)f(3\))248
2522 y(\(fresh-line)d(p\))248 2635 y(\(list)j(\(current-row)c(p\))k
(\(current-column)48 b(p\)\))467 2748 y Fk(!)54 b Fo('\(1)f(0\))248
2861 y(\(fresh-line)d(p\))248 2974 y(\(list)j(\(current-row)c(p\))k
(\(current-column)48 b(p\)\))467 3087 y Fk(!)54 b Fo('\(1)f(0\))83
3384 y Fl(5.1)l(1)118 b(Fluid)30 b(bindings)83 3595 y
Fs(These)19 b(pr)n(ocedur)n(es)g(implement)i(dynamic)h(binding)f(and)g
(ar)n(e)g(in)g(str)o(uctur)n(e)f Fo(fluids)p Fs(.)25
b(A)20 b Fr(\003uid)h Fs(is)83 3708 y(a)k(cell)h(whose)d(value)i(can)g
(be)g(bound)e(dynamically)-10 b(.)35 b(Each)25 b(\003uid)g(has)f(a)h
(top-level)g(value)g(that)f(is)83 3821 y(used)d(when)h(the)g(\003uid)h
(is)f(unbound)g(in)h(the)f(curr)n(ent)g(dynamic)h(envir)n(onment.)101
3985 y Fk(\017)46 b Fo(\(make-fluid)41 b Fr(value)p Fo(\))46
b Fk(!)f Fr(\003uid)101 4098 y Fk(\017)h Fo(\(fluid)d
Fr(\003uid)p Fo(\))i Fk(!)g Fr(value)101 4211 y Fk(\017)h
Fo(\(let-fluid)41 b Fr(\003uid)k(value)i(thunk)p Fo(\))e
Fk(!)h Fr(value\(s\))101 4324 y Fk(\017)g Fo(\(let-fluids)41
b Fr(\003uid)1009 4338 y Fm(0)1093 4324 y Fr(value)1289
4338 y Fm(0)1375 4324 y Fr(\003uid)1546 4338 y Fm(1)1631
4324 y Fr(value)1827 4338 y Fm(1)1913 4324 y Fr(.)14
b(.)g(.)g(thunk)p Fo(\))43 b Fk(!)j Fr(value\(s\))83
4488 y Fo(Make-fluid)25 b Fs(r)n(eturns)j(a)i(new)e(\003uid)i(with)f
Fr(value)h Fs(as)f(its)g(initial)j(top-level)c(value.)49
b Fo(Fluid)27 b Fs(r)n(e-)83 4601 y(turns)22 b Fo(fluid)p
Fs('s)f(curr)n(ent)i(value.)30 b Fo(Let-fluid)19 b Fs(calls)25
b Fo(thunk)p Fs(,)c(with)i Fr(\003uid)g Fs(bound)g(to)f
Fr(value)j Fs(until)83 4714 y Fo(thunk)k Fs(r)n(eturns.)51
b(Using)30 b(a)h(continuation)g(to)f(thr)n(ow)h(out)f(of)g(the)g(call)j
(to)d Fo(thunk)f Fs(causes)h Fr(\003uid)83 4827 y Fs(to)h(r)n(evert)g
(to)h(its)f(original)i(value,)i(while)d(thr)n(owing)f(back)i(in)f
(causes)f Fr(\003uid)h Fs(to)f(be)h(r)n(ebound)f(to)83
4940 y Fr(value)p Fs(.)d Fo(Let-fluid)17 b Fs(r)n(eturns)j(the)g
(value\(s\))i(r)n(eturned)e(by)h Fr(thunk)p Fs(.)27 b
Fo(Let-fluids)17 b Fs(is)k(identical)h(to)83 5053 y Fo(let-fluid)d
Fs(except)i(that)h(it)h(binds)g(an)g(arbitrary)g(number)f(of)h
(\003uids)f(to)g(new)g(values.)248 5257 y Fo(\(let*)53
b(\(\(f)g(\(make-fluid)c('a\)\))630 5370 y(\(v0)k(\(fluid)f(f\)\))630
5483 y(\(v1)h(\(let-fluid)d(f)k('b)957 5596 y(\(lambda)e(\(\))1067
5709 y(\(fluid)f(f\)\)\)\))630 5822 y(\(v2)i(\(fluid)f(f\)\)\))1748
6071 y Fs(37)p eop
%%Page: 38 44
38 43 bop 440 573 a Fo(\(list)53 b(v0)g(v1)h(v2\)\))440
687 y Fk(!)h Fo('\(a)e(b)h(a\))331 903 y(\(let)f(\(\(f)g(\(make-fluid)d
('a\)\))659 1017 y(\(path)i('\(\)\))659 1130 y(\(c)h(#f\)\))440
1244 y(\(let)g(\(\(add)f(\(lambda)g(\(\))1150 1358 y(\(set!)g(path)h
(\(cons)f(\(fluid)g(f\))h(path\)\)\)\)\))550 1471 y(\(add\))550
1585 y(\(let-fluid)d(f)k('b)659 1699 y(\(lambda)d(\(\))768
1813 y(\(call-with-cur)o(re)o(nt-)o(co)o(nt)o(in)o(ua)o(tio)o(n)877
1926 y(\(lambda)g(\(c0\))986 2040 y(\(set!)h(c)i(c0\)\)\))768
2154 y(\(add\)\)\))550 2267 y(\(add\))550 2381 y(\(if)f(\(<)g(\(length)
f(path\))g(5\))768 2495 y(\(c\))768 2608 y(\(reverse)f(path\)\)\)\))440
2722 y Fk(!)k Fo('\(a)e(b)h(a)g(b)g(a\))166 3026 y Fl(5.12)119
b(Sockets)166 3238 y Fs(Str)o(uctur)n(e)28 b Fo(sockets)d
Fs(pr)n(ovides)j(access)g(to)g(TCP/IP)g(sockets)f(for)h(interpr)n
(ocess)f(and)h(network)166 3351 y(communication.)184
3525 y Fk(\017)46 b Fo(\(open-socket\))40 b Fk(!)45 b
Fr(socket)184 3638 y Fk(\017)h Fo(\(open-socket)40 b
Fr(port-number)p Fo(\))46 b Fk(!)g Fr(socket)184 3751
y Fk(\017)g Fo(\(socket-port-nu)o(mb)o(er)39 b Fr(socket)p
Fo(\))47 b Fk(!)e Fr(integer)184 3864 y Fk(\017)h Fo(\(close-socket)40
b Fr(socket)p Fo(\))184 3977 y Fk(\017)46 b Fo(\(socket-accept)39
b Fr(socket)p Fo(\))47 b Fk(!)e Fr(input-port)j(output-port)184
4090 y Fk(\017)e Fo(\(get-host-name\))39 b Fk(!)45 b
Fr(string)166 4264 y Fo(Open-socket)13 b Fs(cr)n(eates)k(a)h(new)f
(socket.)24 b(If)18 b(no)f Fr(port-number)i Fs(is)f(supplied)e(the)h
(system)f(picks)h(one)166 4377 y(at)24 b(random.)33 b
Fo(Socket-port-nu)o(mb)o(er)18 b Fs(r)n(eturns)23 b(a)h(socket's)f
(port)g(number)-7 b(.)32 b Fo(Close-socket)166 4490 y
Fs(closes)19 b(a)h(socket,)e(pr)n(eventing)h(any)h(further)e
(connections.)26 b Fo(Socket-accept)14 b Fs(accepts)19
b(a)i(single)166 4603 y(connection)27 b(on)g Fr(socket)p
Fs(,)i(r)n(eturning)e(an)g(input)g(port)f(and)i(an)f(output)f(port)g
(for)h(communicating)166 4716 y(with)18 b(the)f(client.)27
b(If)18 b(no)f(client)i(is)f(waiting)g Fo(socket-accept)12
b Fs(blocks)18 b(until)g(one)f(appears.)26 b Fo(Get-)166
4828 y(host-name)19 b Fs(r)n(eturns)i(the)h(network)f(name)h(of)h(the)f
(machine.)184 5003 y Fk(\017)46 b Fo(\(socket-client)39
b Fr(host-name)47 b(port-number)p Fo(\))g Fk(!)e Fr(input-port)i
(output-port)166 5177 y Fo(Socket-client)25 b Fs(connects)k(to)h(the)g
(server)g(at)g Fr(port-number)i Fs(on)f(the)e(machine)j(named)e
Fr(host-)166 5290 y(name)p Fs(.)e Fo(Socket-client)17
b Fs(blocks)22 b(until)h(the)f(server)g(accepts)g(the)g(connection.)307
5403 y(The)35 b(following)h(simple)f(example)g(shows)f(a)i(server)f
(and)g(client)h(for)g(a)g(centralized)f(UID)166 5516
y(service.)331 5708 y Fo(\(define)52 b(\(id-server\))440
5822 y(\(let)h(\(\(socket)e(\(open-socket\)\)\))1831
6071 y Fs(38)p eop
%%Page: 39 45
39 44 bop 467 573 a Fo(\(display)50 b("Waiting)h(on)j(port)f("\))467
688 y(\(display)d(\(socket-port-num)o(be)o(r)e(socket\)\))467
802 y(\(newline\))467 917 y(\(let)k(loop)h(\(\(next-id)d(0\)\))576
1032 y(\(call-with-val)o(ue)o(s)685 1146 y(\(lambda)h(\(\))794
1261 y(\(socket-accept)d(socket\)\))685 1376 y(\(lambda)j(\(in)i(out\))
794 1490 y(\(display)e(next-id)g(out\))794 1605 y(\(close-input-p)o
(ort)d(in\))794 1720 y(\(close-output-)o(por)o(t)g(out\))794
1834 y(\(loop)k(\(+)i(next-id)d(1\)\)\)\)\)\)\))248 2064
y(\(define)h(\(get-id)f(machine)g(port-number\))357 2179
y(\(call-with-value)o(s)467 2293 y(\(lambda)g(\(\))576
2408 y(\(socket-client)d(machine)j(port-number\)\))467
2523 y(\(lambda)g(\(in)i(out\))576 2637 y(\(let)f(\(\(id)h(\(read)f
(in\)\)\))685 2752 y(\(close-input-p)o(or)o(t)d(in\))685
2867 y(\(close-output-)o(po)o(rt)f(out\))685 2981 y(id\)\)\)\))83
3291 y Fl(5.13)119 b(Macros)29 b(for)h(writing)e(loops)83
3506 y Fo(Iterate)17 b Fs(and)i Fo(reduce)e Fs(ar)n(e)j(extensions)e
(of)h(named-)p Fo(let)g Fs(for)g(writing)h(loops)f(that)g(walk)h(down)
83 3618 y(one)31 b(or)h(mor)n(e)f(sequences,)h(such)g(as)g(the)f
(elements)f(of)i(a)h(list)f(or)f(vector)-7 b(,)34 b(the)d(characters)h
(r)n(ead)83 3731 y(fr)n(om)24 b(a)h(port,)e(or)g(an)i(arithmetic)f
(series.)30 b(Additional)24 b(sequences)e(can)j(be)e(de\002ned)f(by)i
(the)f(user)-7 b(.)83 3844 y Fo(Iterate)20 b Fs(and)i
Fo(reduce)e Fs(ar)n(e)j(in)g(str)o(uctur)n(e)f Fo(reduce)p
Fs(.)83 4110 y Ff(5.13.1)99 b Fe(Iterate)83 4290 y Fs(The)22
b(syntax)g(of)g Fo(iterate)e Fs(is:)357 4487 y Fo(\(iterate)51
b Fr(loop-name)848 4602 y Fo(\(\()p Fr(sequence-type)56
b(element-variable)j(sequence-data)e Fo(...\))903 4716
y(...\))848 4831 y(\(\()p Fr(state-variable)h(initial-value)p
Fo(\))903 4946 y(...\))467 5060 y Fr(body-expr)n(ession)467
5175 y Fo([)p Fr(\002nal-expr)n(ession)p Fo(]\))224 5370
y(Iterate)22 b Fs(steps)h(the)i Fr(element-variable)p
Fs(s)j(in)e(parallel)h(thr)n(ough)d(the)g(sequences,)f(while)j(each)83
5483 y Fr(state-variable)37 b Fs(has)c(the)f(corr)n(esponding)f
Fr(initial-value)36 b Fs(for)c(the)g(\002rst)g(iteration)h(and)g(have)g
(later)83 5596 y(values)h(supplied)e(by)i Fr(body-expr)n(ession)p
Fs(.)66 b(If)34 b(any)g(sequence)e(has)h(r)n(eached)h(its)f(limit)i
(the)e(value)83 5709 y(of)g(the)f Fo(iterate)d Fs(expr)n(ession)i(is)i
(the)f(value)h(of)g Fr(\002nal-expr)n(ession)p Fs(,)39
b(if)33 b(pr)n(esent,)g(or)g(the)f(curr)n(ent)83 5822
y(values)c(of)h(the)e Fr(state-variable)p Fs(s,)34 b(r)n(eturned)26
b(as)i(multiple)h(values.)45 b(If)28 b(no)g(sequence)e(has)i(r)n
(eached)1748 6071 y(39)p eop
%%Page: 40 46
40 45 bop 166 573 a Fs(its)20 b(limit,)i Fr(body-expr)n(ession)j
Fs(is)c(evaluated)f(and)g(either)g(calls)h Fr(loop-name)h
Fs(with)f(new)e(values)i(for)f(the)166 686 y Fr(state-variable)p
Fs(s,)26 b(or)d(r)n(eturns)e(some)h(other)f(value\(s\).)307
805 y(The)i Fr(loop-name)h Fs(and)f(the)g Fr(state-variable)p
Fs(s)k(and)c Fr(initial-value)p Fs(s)i(behave)e(exactly)g(as)h(in)f
(named-)166 918 y Fo(let)p Fs(.)k(The)21 b(named-)p Fo(let)h
Fs(expr)n(ession)440 1135 y Fo(\(let)53 b(loop-name)e(\(\(state-variab)
o(le)d(initial-value\))g(...\))550 1254 y(body)k(...\))166
1466 y Fs(is)25 b(equivalent)g(to)f(an)h Fo(iterate)c
Fs(expr)n(ession)i(with)i(no)f(sequences)f(\(and)h(with)h(an)g
(explicit)g Fo(let)166 1579 y Fs(wrapped)c(ar)n(ound)i(the)e(body)h
(expr)n(essions)e(to)i(take)g(car)n(e)i(of)e(any)h(internal)g
Fo(define)p Fs(s\):)440 1797 y Fo(\(iterate)51 b(loop-name)931
1915 y(\(\))931 2034 y(\(\(state-variable)d(initial-value\))g(...\))550
2153 y(\(let)k(\(\))i(body)f(...\)\))307 2365 y Fs(The)19
b Fr(sequence-type)p Fs(s)j(ar)n(e)e(keywor)n(ds)e(\(they)h(ar)n(e)h
(actually)h(macr)n(os)f(of)g(a)g(particular)h(form;)g(it)f(is)166
2478 y(easy)26 b(to)f(add)h(additional)h(types)d(of)j(sequences\).)37
b(Examples)25 b(ar)n(e)i Fo(list*)d Fs(which)j(walks)f(down)166
2591 y(the)17 b(elements)f(of)i(a)g(list)g(and)g Fo(vector*)c
Fs(which)k(does)e(the)h(same)h(for)g(vectors.)25 b(For)17
b(each)h(iteration,)166 2704 y(each)28 b Fr(element-variable)k
Fs(is)c(bound)f(to)g(the)g(next)g(element)g(of)h(the)f(sequence.)42
b(The)27 b Fr(sequence-data)166 2817 y Fs(gives)22 b(the)g(actual)i
(list)f(or)f(vector)g(or)g(whatever)-7 b(.)307 2936 y(If)24
b(ther)n(e)f(is)h(a)g Fr(\002nal-expr)n(ession)p Fs(,)j(it)d(is)g
(evaluated)g(when)f(the)g(end)g(of)g(one)g(or)h(mor)n(e)f(sequences)166
3049 y(is)g(r)n(eached.)30 b(If)23 b(the)f Fr(body-expr)n(ession)29
b Fs(does)21 b(not)i(call)i Fr(loop-name)g Fs(the)d Fr(\002nal-expr)n
(ession)27 b Fs(is)c(not)g(eval-)166 3161 y(uated.)j(The)19
b Fr(state-variable)p Fs(s)24 b(ar)n(e)c(visible)g(in)h
Fr(\002nal-expr)n(ession)i Fs(but)d(the)e Fr(sequence-variable)p
Fs(s)23 b(ar)n(e)d(not.)307 3280 y(The)f Fr(body-expr)n(ession)25
b Fs(and)20 b(the)f Fr(\002nal-expr)n(ession)24 b Fs(ar)n(e)d(in)f
(tail-position)g(within)g(the)f Fo(iterate)p Fs(.)166
3393 y(Unlike)32 b(named-)p Fo(let)p Fs(,)h(the)f(behavior)h(of)f(a)h
(non-tail-r)n(ecursive)g(call)h(to)e Fr(loop-name)i Fs(is)e(unspec-)166
3506 y(i\002ed)h(\(because)h(iterating)f(down)f(a)i(sequence)e(may)i
(involve)g(side)f(ef)n(fects,)i(such)f(as)f(r)n(eading)166
3619 y(characters)23 b(fr)n(om)g(a)g(port\).)166 3911
y Ff(5.13.2)99 b Fe(Reduce)166 4100 y Fs(If)23 b(an)g
Fo(iterate)d Fs(expr)n(ession)h(is)i(not)f(meant)h(to)f(terminate)h
(befor)n(e)f(a)i(sequence)d(has)i(r)n(eached)f(its)166
4213 y(end,)28 b Fr(body-expr)n(ession)k Fs(will)d(always)f(end)f(with)
g(a)i(tail)f(call)i(to)d Fr(loop-name)p Fs(.)44 b Fo(Reduce)25
b Fs(is)j(a)g(macr)n(o)166 4326 y(that)i(makes)g(this)f(common)i(case)f
(explicit.)51 b(The)29 b(syntax)h(of)g Fo(reduce)d Fs(is)k(the)e(same)h
(as)g(that)g(of)166 4439 y Fo(iterate)p Fs(,)g(except)f(that)i(ther)n
(e)f(is)h(no)g Fr(loop-name)p Fs(.)55 b(The)30 b Fr(body-expr)n(ession)
36 b Fs(r)n(eturns)30 b(new)g(values)166 4552 y(of)e(the)f
Fr(state-variable)p Fs(s)33 b(instead)27 b(of)h(passing)f(them)h(to)f
Fr(loop-name)p Fs(.)46 b(Thus)28 b Fr(body-expr)n(ession)33
b Fs(must)166 4664 y(r)n(eturn)21 b(as)g(many)h(values)g(as)g(ther)n(e)
e(ar)n(e)i(state)e(variables.)29 b(By)21 b(special)h(dispensation,)e
(if)i(ther)n(e)f(ar)n(e)166 4777 y(no)j(state)f(variables)j(then)e
Fr(body-expr)n(ession)29 b Fs(may)c(r)n(eturn)f(any)g(number)g(of)h
(values,)f(all)i(of)f(which)166 4890 y(ar)n(e)e(ignor)n(ed.)307
5009 y(The)f(syntax)g(of)g Fo(reduce)e Fs(is:)440 5227
y Fo(\(reduce)52 b(\(\()p Fr(sequence-type)k(element-variable)i
(sequence-data)f Fo(...\))986 5346 y(...\))931 5465 y(\(\()p
Fr(state-variable)h(initial-value)p Fo(\))986 5584 y(...\))550
5703 y Fr(body-expr)n(ession)550 5822 y Fo([)p Fr(\002nal-expr)n
(ession)p Fo(]\))1831 6071 y Fs(40)p eop
%%Page: 41 47
41 46 bop 224 573 a Fs(The)32 b(value\(s\))i(r)n(eturned)e(by)h(an)g
(instance)g(of)g Fo(reduce)d Fs(is)k(the)e(value\(s\))i(r)n(eturned)d
(by)i(the)83 686 y Fr(\002nal-expr)n(ession)p Fs(,)f(if)d(pr)n(esent,)d
(or)h(the)g(curr)n(ent)g(value\(s\))h(of)g(the)e(state)h(variables)i
(when)d(the)h(end)83 799 y(of)c(one)e(or)i(mor)n(e)f(sequences)f(is)h
(r)n(eached.)224 912 y(A)30 b Fo(reduce)d Fs(expr)n(ession)h(can)i(be)g
(r)n(ewritten)f(as)g(an)i(equivalent)f Fo(iterate)c Fs(expr)n(ession)i
(by)83 1024 y(adding)22 b(a)h Fr(loop-var)j Fs(and)d(a)g(wrapper)e(for)
i(the)f Fr(body-expr)n(ession)27 b Fs(that)c(calls)h(the)e
Fr(loop-var)p Fs(.)248 1209 y Fo(\(iterate)51 b(loop)739
1321 y(\(\()p Fr(sequence-type)56 b(element-variable)j(sequence-data)e
Fo(...\))794 1434 y(...\))739 1547 y(\(\()p Fr(state-variable)h
(initial-value)p Fo(\))794 1660 y(...\))357 1773 y(\(call-with-value)o
(s)48 b(\(lambda)k(\(\))1448 1886 y Fr(body-expr)n(ession)p
Fo(\))1339 1999 y(loop\))357 2112 y([)p Fr(\002nal-expr)n(ession)p
Fo(]\))83 2366 y Ff(5.13.3)99 b(Sequence)24 b(types)83
2543 y Fs(The)e(pr)n(ede\002ned)e(sequence)h(types)g(ar)n(e:)101
2727 y Fk(\017)46 b Fo(\(list*)d Fr(elt-var)48 b(list)p
Fo(\))2216 b Fs(syntax)101 2840 y Fk(\017)46 b Fo(\(vector*)c
Fr(elt-var)48 b(vector)p Fo(\))2000 b Fs(syntax)101 2953
y Fk(\017)46 b Fo(\(string*)c Fr(elt-var)48 b(string)p
Fo(\))2001 b Fs(syntax)101 3065 y Fk(\017)46 b Fo(\(count*)c
Fr(elt-var)48 b(start)f Fo([)p Fr(end)f Fo([)p Fr(step)p
Fo(]]\))1518 b Fs(syntax)101 3178 y Fk(\017)46 b Fo(\(input*)c
Fr(elt-var)48 b(input-port)f(r)n(ead-pr)n(ocedur)n(e)p
Fo(\))1311 b Fs(syntax)101 3291 y Fk(\017)46 b Fo(\(stream*)c
Fr(elt-var)48 b(pr)n(ocedur)n(e)g(initial-data)p Fo(\))1414
b Fs(syntax)224 3475 y(For)27 b(lists,)g(vectors,)h(and)f(strings)f
(the)g(element)h(variable)i(is)e(bound)g(to)f(the)h(successive)f(ele-)
83 3588 y(ments)c(of)g(the)g(list)h(or)f(vector)-7 b(,)22
b(or)h(the)e(characters)i(in)g(the)f(string.)224 3701
y(For)g Fo(count*)e Fs(the)i(element)f(variable)k(is)e(bound)f(to)g
(the)f(elements)h(of)g(the)g(sequence)303 3885 y Fr(start)p
Fo(,)56 b Fr(start)g Fo(+)e Fr(step)p Fo(,)h Fr(start)i
Fo(+)d(2)p Fr(step)p Fo(,)h(...,)e Fr(end)83 4069 y Fs(inclusive)31
b(of)f Fr(start)i Fs(and)d(exclusive)h(of)g Fr(end)p
Fs(.)51 b(The)29 b(default)g Fr(step)j Fs(is)e(1.)50
b(The)29 b(sequence)g(does)f(not)83 4182 y(terminate)17
b(if)h(no)f Fr(end)h Fs(is)f(given)h(or)f(if)h(ther)n(e)e(is)i(no)f
Fg(N)35 b(>)25 b Fh(0)18 b Fs(such)f(that)g Fr(end)h
Fs(=)g Fr(start)h Fs(+)e(N)p Fr(step)i Fs(\()p Fo(=)e
Fs(is)h(used)83 4295 y(to)25 b(test)f(for)h(termination\).)36
b(For)25 b(example,)g Fo(\(count*)52 b(i)i(0)g(-1\))24
b Fs(doesn't)g(terminate)g(because)83 4408 y(it)34 b(begins)f(past)g
(the)g Fr(end)h Fs(value)h(and)f Fo(\(count*)51 b(i)j(0)g(1)g(2\))33
b Fs(doesn't)f(terminate)i(because)f(it)83 4521 y(skips)21
b(over)i(the)e Fr(end)j Fs(value.)224 4634 y(For)18 b
Fo(input*)e Fs(the)i(elements)f(ar)n(e)i(the)f(r)n(esults)g(of)h
(successive)f(applications)h(of)g Fr(r)n(ead-pr)n(ocedur)n(e)83
4747 y Fs(to)j Fr(input-port)p Fs(.)30 b(The)22 b(sequence)f(ends)g
(when)h Fr(r)n(ead-pr)n(ocedur)n(e)28 b Fs(r)n(eturns)21
b(an)i(end-of-\002le)f(object.)224 4860 y(For)d(a)i(str)n(eam,)e(the)g
Fr(pr)n(ocedur)n(e)k Fs(takes)c(the)g(curr)n(ent)g(data)h(value)h(as)f
(an)g(ar)n(gument)g(and)f(r)n(eturns)83 4972 y(two)h(values,)h(the)g
(next)f(value)h(of)g(the)f(sequence)g(and)g(a)i(new)e(data)h(value.)28
b(If)21 b(the)f(new)h(data)g(is)g Fo(#f)83 5085 y Fs(then)h(the)g(pr)n
(evious)g(element)f(was)i(the)f(last)g(one.)27 b(For)22
b(example,)357 5269 y Fo(\(list*)52 b(elt)h(my-list\))83
5453 y Fs(is)23 b(the)f(same)g(as)357 5637 y Fo(\(stream*)51
b(elt)j(list->stream)49 b(my-list\))83 5822 y Fs(wher)n(e)22
b Fo(list->stream)17 b Fs(is)1748 6071 y(41)p eop
%%Page: 42 48
42 47 bop 440 573 a Fo(\(lambda)52 b(\(list\))550 686
y(\(if)h(\(null?)f(list\))768 799 y(\(values)f('ignored)g(#f\))768
912 y(\(values)g(\(car)i(list\))f(\(cdr)h(list\)\)\)\))166
1161 y Ff(5.13.4)99 b(Synchronous)25 b(sequences)166
1338 y Fs(When)k(using)h(the)f(sequence)f(types)g(described)h(above,)j
(a)e(loop)f(terminates)g(when)h(any)f(of)h(its)166 1451
y(sequences)21 b(r)n(eaches)h(its)h(end.)k(T)-8 b(o)22
b(help)h(detect)e(bugs)h(it)h(is)g(useful)f(to)g(have)i(sequence)d
(types)f(that)166 1564 y(check)e(to)g(see)f(if)j(two)d(or)i(mor)n(e)f
(sequences)e(end)i(on)g(the)f(same)i(iteration.)26 b(For)18
b(this)g(purpose)e(ther)n(e)166 1677 y(is)35 b(second)e(set)g(of)i
(sequence)e(types)f(called)k(synchr)n(onous)d(sequences.)61
b(These)33 b(ar)n(e)i(identical)166 1790 y(to)e(the)f(ones)h(listed)f
(above)i(except)e(that)h(they)g(cause)g(an)h(err)n(or)e(to)h(be)h
(signalled)f(if)h(a)g(loop)f(is)166 1903 y(terminated)h(by)h(a)g
(synchr)n(onous)e(sequence)g(and)i(some)f(other)f(synchr)n(onous)g
(sequence)g(did)166 2016 y(not)22 b(r)n(each)h(its)g(end)e(on)i(the)e
(same)i(iteration.)307 2129 y(Sequences)h(ar)n(e)i(checked)e(for)i
(termination)f(in)h(or)n(der)-7 b(,)26 b(fr)n(om)g(left)f(to)g(right,)h
(and)f(if)i(a)f(loop)f(is)166 2241 y(terminated)d(by)g(a)h(non-synchr)n
(onous)e(sequence)g(no)h(further)g(checking)g(is)h(done.)307
2354 y(The)f(synchr)n(onous)f(sequences)f(ar)n(e:)184
2501 y Fk(\017)46 b Fo(\(list\045)d Fr(elt-var)48 b(list)p
Fo(\))2216 b Fs(syntax)184 2614 y Fk(\017)46 b Fo(\(vector\045)c
Fr(elt-var)48 b(vector)p Fo(\))2000 b Fs(syntax)184 2727
y Fk(\017)46 b Fo(\(string\045)c Fr(elt-var)48 b(string)p
Fo(\))2001 b Fs(syntax)184 2840 y Fk(\017)46 b Fo(\(count\045)c
Fr(elt-var)48 b(start)f(end)f Fo([)p Fr(step)p Fo(]\))1628
b Fs(syntax)184 2953 y Fk(\017)46 b Fo(\(input\045)c
Fr(elt-var)48 b(input-port)f(r)n(ead-pr)n(ocedur)n(e)p
Fo(\))1311 b Fs(syntax)184 3065 y Fk(\017)46 b Fo(\(stream\045)c
Fr(elt-var)48 b(pr)n(ocedur)n(e)g(initial-data)p Fo(\))1414
b Fs(syntax)307 3212 y(Note)22 b(that)g(the)h(synchr)n(onous)e
Fo(count\045)f Fs(must)i(have)i(an)f Fr(end)p Fs(,)h(unlike)e(the)h
(nonsynchr)n(onous)166 3325 y Fo(count\045)p Fs(.)166
3575 y Ff(5.13.5)99 b(Examples)166 3751 y Fs(Gathering)22
b(the)g(indexes)f(of)i(list)g(elements)e(that)h(answer)g(tr)o(ue)g(to)g
(some)g(pr)n(edicate.)331 3915 y Fo(\(lambda)52 b(\(my-list)f
(predicate\))440 4027 y(\(reduce)h(\(\(list*)f(elt)i(my-list\))931
4140 y(\(count*)f(i)i(0\)\))877 4253 y(\(\(hits)e('\(\)\)\))550
4366 y(\(if)h(\(predicate)d(elt\))768 4479 y(\(cons)i(i)i(hits\))768
4592 y(hits\))550 4705 y(\(reverse)c(hits\)\))166 4868
y Fs(Looking)21 b(for)i(the)e(index)h(of)h(an)g(element)f(of)g(a)i
(list.)331 5031 y Fo(\(lambda)52 b(\(my-list)f(predicate\))440
5144 y(\(iterate)g(loop)931 5257 y(\(\(list*)h(elt)h(my-list\))986
5370 y(\(count*)e(i)j(0\)\))931 5483 y(\(\))1745 b(;)54
b(no)g(state)550 5596 y(\(if)f(\(predicate)d(elt\))768
5709 y(i)768 5822 y(\(loop\)\)\)\))1831 6071 y Fs(42)p
eop
%%Page: 43 49
43 48 bop 83 573 a Fs(Reading)22 b(one)g(line.)248 761
y Fo(\(define)52 b(\(read-line)e(port\))357 874 y(\(iterate)h(loop)848
987 y(\(\(input*)g(c)j(port)f(read-char\)\))848 1099
y(\(\(chars)f('\(\)\)\))467 1212 y(\(if)h(\(char=?)e(c)j(#\\newline\))
685 1325 y(\(list->string)48 b(\(reverse)j(chars\)\))685
1438 y(\(loop)h(\(cons)g(c)i(chars\)\)\))467 1551 y(\(if)f(\(null?)f
(chars\))685 1664 y(\(eof-object\))685 1777 y(;)i(no)f(newline)f(at)h
(end)h(of)f(file)685 1890 y(\(list->string)48 b(\(reverse)j
(chars\)\)\)\)\))83 2078 y Fs(Counting)28 b(the)h(lines)g(in)g(a)g
(\002le.)47 b(W)-8 b(e)29 b(can't)g(use)f Fo(count*)f
Fs(because)h(we)h(need)e(the)h(value)i(of)f(the)83 2191
y(count)22 b(after)h(the)e(loop)i(has)f(\002nished.)248
2379 y Fo(\(define)52 b(\(line-count)d(name\))357 2491
y(\(call-with-input)o(-f)o(il)o(e)f(name)467 2604 y(\(lambda)j(\(in\))
576 2717 y(\(reduce)g(\(\(input*)g(l)j(in)g(read-line\)\))1012
2830 y(\(\(i)f(0\)\))685 2943 y(\(+)g(i)h(1\)\)\)\)\))83
3198 y Ff(5.13.6)99 b(De\002ning)25 b(sequence)f(types)83
3375 y Fs(The)42 b(sequence)g(types)f(ar)n(e)i(object-oriented)e(macr)n
(os)j(similar)g(to)f(enumerations.)87 b(A)43 b(non-)83
3488 y(synchr)n(onous)22 b(sequence)f(macr)n(o)k(needs)c(to)i(supply)f
(thr)n(ee)h(values:)29 b Fo(#f)23 b Fs(to)g(indicate)g(that)h(it)f
(isn't)83 3601 y(synchr)n(onous,)28 b(a)h(list)f(of)h(state)e
(variables)j(and)e(their)g(initializers,)j(and)e(the)e(code)h(for)g
(one)g(iter)n(-)83 3714 y(ation.)47 b(The)29 b(\002rst)f(two)g(methods)
f(ar)n(e)j(CPS'ed:)40 b(they)28 b(take)g(another)g(macr)n(o)i(and)f(ar)
n(gument)g(to)83 3827 y(which)k(to)f(pass)g(their)g(r)n(esult.)57
b(The)32 b Fo(synchronized?)52 b Fs(method)31 b(gets)g(no)h(additional)
i(ar)n(gu-)83 3940 y(ments.)26 b(The)21 b Fo(state-vars)c
Fs(method)j(is)i(passed)d(a)j(list)g(of)f(names)h(which)f(will)i(be)e
(bound)g(to)g(the)83 4053 y(ar)n(guments)i(to)g(the)g(sequence.)30
b(The)23 b(\002nal)i(method,)d(for)i(the)f(step,)f(is)i(passed)e(the)h
(list)h(of)g(names)83 4166 y(bound)h(to)h(the)f(ar)n(guments)g(and)h
(the)f(list)h(of)g(state)f(variables.)39 b(In)26 b(addition)g(ther)n(e)
f(is)h(a)g(variable)83 4278 y(to)20 b(be)g(bound)g(to)f(the)h(next)g
(element)f(of)h(the)g(sequence,)f(the)g(body)h(expr)n(ession)e(for)j
(the)e(loop,)h(and)83 4391 y(an)j(expr)n(ession)e(for)h(terminating)h
(the)f(loop.)224 4504 y(The)g(de\002nition)g(of)h Fo(list*)d
Fs(is)248 4692 y Fo(\(define-syntax)49 b(list*)357 4805
y(\(syntax-rules)g(\(synchronized?)f(state-vars)i(step\))467
4918 y(\(\(list*)h(synchronized?)e(\(next)j(more\)\))521
5031 y(\(next)g(#f)i(more\)\))467 5144 y(\(\(list*)d(state-vars)f
(\(start-list\))f(\(next)j(more\)\))521 5257 y(\(next)g(\(\(list-var)e
(start-list\)\))f(more\)\))467 5370 y(\(\(list*)i(step)i
(\(start-list\))c(\(list-var\))903 5483 y(value-var)h(loop-body)h
(final-exp\))521 5596 y(\(if)i(\(null?)f(list-var\))739
5709 y(final-exp)739 5822 y(\(let)h(\(\(value-var)d(\(car)i
(list-var\)\))1748 6071 y Fs(43)p eop
%%Page: 44 50
44 49 bop 1150 573 a Fo(\(list-var)50 b(\(cdr)j(list-var\)\)\))931
686 y(loop-body\)\)\)\)\))307 841 y Fs(Synchr)n(onized)22
b(sequences)e(ar)n(e)i(the)f(same,)h(except)f(that)h(they)f(need)g(to)g
(pr)n(ovide)h(a)h(termina-)166 954 y(tion)f(test)f(to)h(be)h(used)e
(when)h(some)g(other)f(synchr)n(onized)h(method)f(terminates)h(the)g
(loop.)331 1110 y Fo(\(define-syntax)49 b(list\045)440
1223 y(\(syntax-rules)g(\(sync)j(done\))550 1336 y(\(\(list\045)f(sync)
i(\(next)f(more\)\))604 1448 y(\(next)g(#t)i(more\)\))550
1561 y(\(\(list\045)d(done)i(\(start-list\))c(\(list-var\)\))604
1674 y(\(null?)j(list-var\)\))550 1787 y(\(\(list\045)f(stuff)h(...\))
604 1900 y(\(list*)g(stuff)g(...\)\)\)\))166 2148 y Ff(5.13.7)99
b(Expanded)23 b(code)166 2325 y Fs(The)f(expansion)g(of)440
2481 y Fo(\(reduce)52 b(\(\(list*)f(x)j('\(1)f(2)i(3\)\)\))877
2594 y(\(\(r)e('\(\)\)\))550 2707 y(\(cons)f(x)i(r\)\))166
2862 y Fs(is)440 3018 y Fo(\(let)f(\(\(final)f(\(lambda)f(\(r\))i
(\(values)e(r\)\)\))768 3131 y(\(list)h('\(1)h(2)h(3\)\))768
3243 y(\(r)f('\(\)\)\))550 3356 y(\(let)f(loop)h(\(\(list)f(list\))g
(\(r)i(r\)\))659 3469 y(\(if)f(\(null?)f(list\))877 3582
y(\(final)g(r\))877 3695 y(\(let)h(\(\(x)g(\(car)f(list\)\))1204
3808 y(\(list)g(\(cdr)h(list\)\)\))986 3921 y(\(let)g(\(\(continue)d
(\(lambda)h(\(r\))1968 4034 y(\(loop)h(list)h(r\)\)\)\))1095
4147 y(\(continue)d(\(cons)j(x)h(r\)\)\)\)\)\)\))307
4302 y Fs(The)20 b(only)g(inef)n(\002ciencies)h(in)g(this)f(code)f(ar)n
(e)i(the)e Fo(final)g Fs(and)h Fo(continue)d Fs(pr)n(ocedur)n(es,)i
(both)166 4415 y(of)26 b(which)g(could)f(be)g(substituted)e(in-line.)38
b(The)24 b(macr)n(o)j(expander)d(could)h(do)g(the)g(substitution)166
4528 y(for)30 b Fo(continue)d Fs(when)j(ther)n(e)f(is)h(no)g(explicit)h
(pr)n(oceed)e(variable,)34 b(as)c(in)h(this)f(case,)i(but)e(not)g(in)
166 4641 y(general.)166 4933 y Fl(5.14)119 b(Regular)29
b(expressions)166 5144 y Fs(This)42 b(section)e(describes)h(a)h
(functional)h(interface)f(for)g(building)g(r)n(egular)g(expr)n(essions)
d(and)166 5257 y(matching)34 b(them)f(against)g(strings.)58
b(The)33 b(matching)h(is)f(done)f(using)h(the)f(POSIX)h(r)n(egular)g
(ex-)166 5370 y(pr)n(ession)21 b(package.)28 b(Regular)22
b(expr)n(essions)e(ar)n(e)j(in)g(the)f(str)o(uctur)n(e)g
Fo(regexps)p Fs(.)307 5483 y(A)k(r)n(egular)g(expr)n(ession)e(is)i
(either)f(a)h(character)h(set,)e(which)h(matches)g(any)g(character)h
(in)f(the)166 5596 y(set,)g(or)g(a)g(composite)g(expr)n(ession)e
(containing)j(one)e(or)h(mor)n(e)g(subexpr)n(essions.)36
b(A)26 b(r)n(egular)g(ex-)166 5709 y(pr)n(ession)21 b(can)h(be)g
(matched)g(against)g(a)g(string)f(to)g(determine)g(success)f(or)i
(failur)n(e,)h(and)f(to)f(deter)n(-)166 5822 y(mine)i(the)f(substrings)
f(matched)h(by)h(particular)g(subexpr)n(essions.)1831
6071 y(44)p eop
%%Page: 45 51
45 50 bop 83 573 a Ff(5.14.1)99 b(Character)24 b(sets)83
750 y Fs(Character)j(sets)d(may)i(be)g(de\002ned)e(using)h(a)i(list)f
(of)g(characters)g(and)f(strings,)g(using)h(a)g(range)f(or)83
863 y(ranges)d(of)g(characters,)h(or)f(by)h(using)f(set)f(operations)g
(on)h(existing)g(character)h(sets.)101 1034 y Fk(\017)46
b Fo(\(set)e Fr(character-or-string)50 b(.)14 b(.)g(.)g
Fo(\))49 b Fk(!)c Fr(char-set)101 1147 y Fk(\017)h Fo(\(range)d
Fr(low-char)k(high-char)p Fo(\))h Fk(!)d Fr(char-set)101
1259 y Fk(\017)h Fo(\(ranges)c Fr(low-char)48 b(high-char)g(.)14
b(.)g(.)g Fo(\))49 b Fk(!)c Fr(char-set)101 1372 y Fk(\017)h
Fo(\(ascii-range)40 b Fr(low-char)47 b(high-char)p Fo(\))h
Fk(!)e Fr(char-set)101 1485 y Fk(\017)g Fo(\(ascii-ranges)40
b Fr(low-char)47 b(high-char)h(.)14 b(.)g(.)g Fo(\))49
b Fk(!)c Fr(char-set)83 1656 y Fo(Set)35 b Fs(r)n(eturns)g(a)i(set)e
(that)h(contains)h(the)e(character)i(ar)n(guments)f(and)g(the)g
(characters)g(in)h(any)83 1769 y(string)29 b(ar)n(guments.)47
b Fo(Range)27 b Fs(r)n(eturns)h(a)i(character)g(set)e(that)h(contain)h
(all)h(characters)f(between)83 1882 y Fr(low-char)f Fs(and)d
Fr(high-char)p Fs(,)31 b(inclusive.)41 b Fo(Ranges)24
b Fs(r)n(eturns)i(a)h(set)e(that)i(contains)g(all)h(characters)f(in)83
1995 y(the)21 b(given)i(ranges.)j Fo(Range)21 b Fs(and)h
Fo(ranges)d Fs(use)j(the)f(or)n(dering)g(induced)h(by)g
Fo(char->integer)p Fs(.)83 2108 y Fo(Ascii-range)f Fs(and)27
b Fo(ascii-ranges)21 b Fs(use)k(the)h(ASCII)f(or)n(dering.)38
b(It)26 b(is)g(an)h(err)n(or)f(for)g(a)h Fr(high-)83
2221 y(char)d Fs(to)e(be)g(less)g(than)h(the)f(pr)n(eceding)f
Fr(low-char)k Fs(in)e(the)f(appr)n(opriate)g(or)n(dering.)101
2392 y Fk(\017)46 b Fo(\(negate)c Fr(char-set)p Fo(\))48
b Fk(!)d Fr(char-set)101 2505 y Fk(\017)h Fo(\(intersection)40
b Fr(char-set)48 b(char-set)p Fo(\))f Fk(!)e Fr(char-set)101
2618 y Fk(\017)h Fo(\(union)d Fr(char-set)48 b(char-set)p
Fo(\))f Fk(!)f Fr(char-set)101 2731 y Fk(\017)g Fo(\(subtract)41
b Fr(char-set)48 b(char-set)p Fo(\))g Fk(!)d Fr(char-set)83
2902 y Fs(These)21 b(perform)h(the)g(indicated)g(operations)f(on)i
(character)g(sets.)224 3015 y(The)f(following)h(character)g(sets)e(ar)n
(e)i(pr)n(ede\002ned:)270 3294 y Fo(lower-case)205 b(\(set)52
b("abcdefghijklmno)o(pq)o(rs)o(tu)o(vw)o(xyz)o("\))270
3406 y(upper-case)205 b(\(set)52 b("ABCDEFGHIJKLMNO)o(PQ)o(RS)o(TU)o
(VW)o(XYZ)o("\))270 3519 y(alphabetic)205 b(\(union)51
b(lower-case)f(upper-case\))270 3632 y(numeric)370 b(\(set)52
b("0123456789"\))270 3745 y(alphanumeric)95 b(\(union)51
b(alphabetic)f(numeric\))270 3858 y(punctuation)150 b(\(set)52
b("!\\"#$\045&'\(\)*+,-.)o(/:)o(;<)o(=>)o(?@)o([\\\\)o(]\210)o(_`)o({|)
o(}\230)o("\))270 3971 y(graphic)370 b(\(union)51 b(alphanumeric)f
(punctuation\))270 4084 y(printing)315 b(\(union)51 b(graphic)h(\(set)h
(#\\space\)\))270 4197 y(control)370 b(\(negate)51 b(printing\))270
4310 y(blank)480 b(\(set)52 b(#\\space)g(\(ascii->char)d(9\)\))21
b Fs(;)i(9)g(is)g(tab)270 4423 y Fo(whitespace)205 b(\(union)51
b(\(set)i(#\\space\))e(\(ascii-range)e(9)54 b(13\)\))270
4536 y(hexdigit)315 b(\(set)52 b("0123456789abcde)o(fA)o(BC)o(DE)o(F")o
(\))83 5117 y Fs(The)22 b(above)g(ar)n(e)h(taken)f(fr)n(om)g(the)g
(default)g(locale)h(in)g(POSIX.)f(The)f(characters)i(in)g
Fo(whitespace)83 5229 y Fs(ar)n(e)g Fr(space)p Fs(,)h
Fr(tab)p Fs(,)f Fr(newline)g Fs(\(=)g Fr(line)g(feed)p
Fs(\),)h Fr(vertical)h(tab)p Fs(,)f Fr(form)f(feed)p
Fs(,)h(and)f Fr(carriage)i(r)n(eturn)p Fs(.)83 5525 y
Ff(5.14.2)99 b(Anchoring)101 5709 y Fk(\017)46 b Fo(\(string-start\))39
b Fk(!)46 b Fr(r)n(eg-exp)101 5822 y Fk(\017)g Fo(\(string-end\))40
b Fk(!)45 b Fr(r)n(eg-exp)1748 6071 y Fs(45)p eop
%%Page: 46 52
46 51 bop 166 573 a Fo(String-start)17 b Fs(r)n(eturns)22
b(a)h(r)n(egular)f(expr)n(ession)f(that)h(matches)h(the)e(beginning)i
(of)f(the)g(string)166 686 y(being)g(matched)h(against;)f(string-end)f
(r)n(eturns)h(one)g(that)g(matches)g(the)g(end.)166 950
y Ff(5.14.3)99 b(Composite)25 b(expressions)184 1128
y Fk(\017)46 b Fo(\(sequence)41 b Fr(r)n(eg-exp)49 b(.)14
b(.)g(.)g Fo(\))49 b Fk(!)c Fr(r)n(eg-exp)184 1241 y
Fk(\017)h Fo(\(one-of)c Fr(r)n(eg-exp)49 b(.)14 b(.)g(.)g
Fo(\))48 b Fk(!)e Fr(r)n(eg-exp)166 1419 y Fo(Sequence)24
b Fs(matches)k(the)f(concatenation)h(of)f(its)h(ar)n(guments,)g
Fo(one-of)d Fs(matches)i(any)h(one)f(of)166 1531 y(its)22
b(ar)n(guments.)184 1709 y Fk(\017)46 b Fo(\(text)d Fr(string)p
Fo(\))k Fk(!)e Fr(r)n(eg-exp)166 1886 y Fo(Text)21 b
Fs(r)n(eturns)g(a)i(r)n(egular)g(expr)n(ession)e(that)h(matches)h(the)f
(characters)g(in)h Fr(string)p Fs(,)h(in)f(or)n(der)-7
b(.)184 2063 y Fk(\017)46 b Fo(\(repeat)c Fr(r)n(eg-exp)p
Fo(\))48 b Fk(!)e Fr(r)n(eg-exp)184 2176 y Fk(\017)g
Fo(\(repeat)c Fr(count)k(r)n(eg-exp)p Fo(\))i Fk(!)d
Fr(r)n(eg-exp)184 2289 y Fk(\017)h Fo(\(repeat)c Fr(min)j(max)h(r)n
(eg-exp)p Fo(\))i Fk(!)e Fr(r)n(eg-exp)166 2466 y Fo(Repeat)22
b Fs(r)n(eturns)i(a)h(r)n(egular)h(expr)n(ession)d(that)h(matches)h
(zer)n(o)g(or)f(mor)n(e)h(occur)n(ences)g(of)g(its)f
Fr(r)n(eg-)166 2579 y(exp)34 b Fs(ar)n(gument.)55 b(W)-5
b(ith)32 b(no)g(count)g(the)f(r)n(esult)g(will)j(match)f(any)f(number)g
(of)g(times)f(\()p Fr(r)n(eg-exp)p Fs(*\).)166 2692 y(W)-5
b(ith)23 b(a)g(single)f(count)g(the)g(r)n(eturned)f(expr)n(ession)g
(will)i(match)h Fr(r)n(eg-exp)i Fs(exactly)c(that)h(number)f(of)166
2805 y(times.)43 b(The)26 b(\002nal)j(case)f(will)h(match)f(fr)n(om)g
Fr(min)g Fs(to)f Fr(max)h Fs(r)n(epetitions,)f(inclusive.)44
b Fr(Max)28 b Fs(may)g(be)166 2918 y Fo(#f)p Fs(,)j(in)f(which)h(case)f
(ther)n(e)f(is)h(no)g(maximum)i(number)e(of)g(matches.)50
b Fr(Count)29 b Fs(and)h Fr(min)g Fs(should)166 3031
y(be)22 b(exact,)f(non-negative)g(integers;)f Fr(max)j
Fs(should)e(either)f(be)i(an)g(exact)g(non-negative)f(integer)f(or)166
3143 y Fo(#f)p Fs(.)166 3408 y Ff(5.14.4)99 b(Case)24
b(sensitivity)166 3588 y Fs(Regular)e(expr)n(essions)e(ar)n(e)j
(normally)h(case-sensitive.)184 3781 y Fk(\017)46 b Fo(\(ignore-case)40
b Fr(r)n(eg-exp)p Fo(\))48 b Fk(!)e Fr(r)n(eg-exp)184
3894 y Fk(\017)g Fo(\(use-case)41 b Fr(r)n(eg-exp)p Fo(\))49
b Fk(!)c Fr(r)n(eg-exp)166 4088 y Fs(The)20 b(value)g(r)n(eturned)f(by)
h Fo(ignore-case)15 b Fs(is)21 b(identical)g(its)f(ar)n(gument)g
(except)f(that)h(case)g(will)h(be)166 4201 y(ignor)n(ed)28
b(when)f(matching.)46 b(The)28 b(value)h(r)n(eturned)e(by)i
Fo(use-case)c Fs(is)j(pr)n(otected)f(fr)n(om)i(futur)n(e)166
4314 y(applications)20 b(of)g Fo(ignore-case)p Fs(.)i(The)c(expr)n
(essions)g(r)n(eturned)f(by)j Fo(use-case)c Fs(and)j
Fo(ignore-)166 4427 y(case)30 b Fs(ar)n(e)h(unaf)n(fected)g(by)g(later)
h(uses)d(of)j(the)e(these)f(pr)n(ocedur)n(es.)52 b(By)31
b(way)g(of)g(example,)i(the)166 4540 y(following)23 b(matches)f
Fo("ab")f Fs(but)i(not)f Fo("aB")p Fs(,)e Fo("Ab")p Fs(,)h(or)h
Fo("AB")p Fs(.)331 4735 y Fo(\(text)53 b("ab"\))166 4929
y Fs(while)331 5124 y Fo(\(ignore-case)c(\(test)k("ab"\)\))166
5318 y Fs(matches)22 b Fo("ab")p Fs(,)f Fo("aB")p Fs(,)g
Fo("Ab")p Fs(,)f(and)j Fo("AB")e Fs(and)331 5513 y Fo(\(ignore-case)49
b(\(sequence)i(\(text)h("a"\))1586 5628 y(\(use-case)e(\(text)j
("b"\)\)\)\))166 5822 y Fs(matches)22 b Fo("ab")f Fs(and)i
Fo("Ab")e Fs(but)h(not)g Fo("aB")f Fs(or)h Fo("AB")p
Fs(.)1831 6071 y(46)p eop
%%Page: 47 53
47 52 bop 83 573 a Ff(5.14.5)99 b(Submatches)24 b(and)g(matching)83
750 y Fs(A)j(subexpr)n(ession)f(within)i(a)g(lar)n(ger)f(expr)n(ession)
f(can)j(be)e(marked)g(as)h(a)g(submatch.)43 b(When)27
b(an)83 863 y(expr)n(ession)21 b(is)i(matched)g(against)g(a)h(string,)e
(the)g(success)g(or)h(failur)n(e)h(of)f(each)g(submatch)h(within)83
976 y(that)k(expr)n(ession)f(is)i(r)n(eported,)f(as)h(well)g(as)f(the)g
(location)i(of)e(the)g(substring)g(matched)g(be)h(each)83
1088 y(successful)22 b(submatch.)101 1259 y Fk(\017)46
b Fo(\(submatch)41 b Fr(key)47 b(r)n(eg-exp)p Fo(\))h
Fk(!)e Fr(r)n(eg-exp)101 1372 y Fk(\017)g Fo(\(no-submatches)39
b Fr(r)n(eg-exp)p Fo(\))48 b Fk(!)e Fr(r)n(eg-exp)83
1542 y Fo(Submatch)22 b Fs(r)n(eturns)i(a)i(r)n(egular)f(expr)n(ession)
e(that)i(matches)h(its)f(ar)n(gument)f(and)i(causes)e(the)h(r)n(e-)83
1655 y(sult)32 b(of)g(matching)g(its)g(ar)n(gument)g(to)f(be)h(r)n
(eported)e(by)i(the)f Fo(match)f Fs(pr)n(ocedur)n(e.)55
b Fr(Key)32 b Fs(is)h(used)83 1768 y(to)24 b(indicate)h(the)f(r)n
(esult)f(of)i(this)f(particular)i(submatch)f(in)f(the)g(alist)h(of)g
(successful)f(submatches)83 1881 y(r)n(eturned)29 b(by)i
Fo(match)p Fs(.)50 b(Any)30 b(value)h(may)g(be)g(used)e(as)i(a)h
Fr(key)p Fs(.)53 b Fo(No-submatches)25 b Fs(r)n(eturns)30
b(an)83 1994 y(expr)n(ession)21 b(identical)i(to)f(its)h(ar)n(gument,)f
(except)f(that)h(all)i(submatches)e(have)h(been)f(elided.)101
2165 y Fk(\017)46 b Fo(\(any-match?)g Fr(r)n(eg-exp)j(string)p
Fo(\))d Fk(!)f Fr(boolean)101 2278 y Fk(\017)h Fo(\(exact-match?)f
Fr(r)n(eg-exp)k(string)p Fo(\))d Fk(!)f Fr(boolean)101
2390 y Fk(\017)h Fo(\(match)d Fr(r)n(eg-exp)48 b(string)p
Fo(\))f Fk(!)e Fr(match)h(or)g Fo(#f)101 2503 y Fk(\017)g
Fo(\(match-start)40 b Fr(match)p Fo(\))46 b Fk(!)f Fr(index)101
2616 y Fk(\017)h Fo(\(match-end)41 b Fr(match)p Fo(\))46
b Fk(!)f Fr(index)101 2729 y Fk(\017)h Fo(\(match-submatch)o(es)39
b Fr(match)p Fo(\))46 b Fk(!)f Fr(alist)83 2900 y Fo(Any-match?)h
Fs(r)n(eturns)29 b Fo(#t)g Fs(if)i Fr(string)h Fs(matches)e
Fr(r)n(eg-exp)j Fs(or)d(contains)g(a)g(substring)f(that)h(does,)83
3013 y(and)24 b Fo(#f)f Fs(otherwise.)29 b Fo(Exact-match?)d
Fs(r)n(eturns)c Fo(#t)h Fs(if)i Fr(string)g Fs(matches)e
Fr(r)n(eg-exp)k Fs(and)d Fo(#f)f Fs(other)n(-)83 3126
y(wise.)224 3238 y Fo(Match)30 b Fs(r)n(eturns)h Fo(#f)g
Fs(if)i Fr(r)n(eg-exp)j Fs(does)30 b(not)i(match)g Fr(string)i
Fs(and)e(a)h(match)g(r)n(ecor)n(d)e(if)i(it)g(does)83
3351 y(match.)f(A)24 b(match)h(r)n(ecor)n(d)e(contains)h(thr)n(ee)f
(values:)31 b(the)23 b(beginning)g(and)h(end)f(of)h(the)f(substring)83
3464 y(that)33 b(matched)h(the)f(pattern)f(and)i(an)g(a-list)g(of)g
(submatch)g(keys)e(and)i(corr)n(esponding)d(match)83
3577 y(r)n(ecor)n(ds)g(for)h(any)g(submatches)f(that)h(also)g(matched.)
55 b Fo(Match-start)27 b Fs(r)n(eturns)k(the)g(index)g(of)83
3690 y(the)c(\002rst)f(character)i(in)g(the)f(matching)h(substring)e
(and)i Fo(match-end)23 b Fs(gives)k(index)g(of)g(the)g(\002rst)83
3803 y(character)g(after)g(the)e(matching)j(substring.)38
b Fo(Match-submatch)o(es)20 b Fs(r)n(eturns)25 b(an)i(alist)h(of)e
(sub-)83 3916 y(match)i(keys)d(and)i(match)h(r)n(ecor)n(ds.)40
b(Only)27 b(the)f(top)g(match)i(r)n(ecor)n(d)f(r)n(eturned)e(by)i
Fo(match)e Fs(has)i(a)83 4029 y(submatch)c(alist.)224
4142 y(Matching)g(occurs)f(accor)n(ding)h(to)e(POSIX.)h(The)f(match)i
(r)n(eturned)e(is)h(the)g(one)f(with)h(the)g(low-)83
4255 y(est)31 b(starting)g(index)g(in)h Fr(string)p Fs(.)57
b(If)32 b(ther)n(e)e(is)i(mor)n(e)g(than)g(one)f(such)g(match,)k(the)c
(longest)f(is)i(r)n(e-)83 4368 y(turned.)26 b(W)-5 b(ithin)23
b(that)g(match)g(the)f(longest)f(possible)h(submatches)g(ar)n(e)h(r)n
(eturned.)224 4480 y(All)32 b(thr)n(ee)f(matching)h(pr)n(ocedur)n(es)e
(cache)i(a)g(compiled)g(version)f(of)h Fr(r)n(eg-exp)p
Fs(.)57 b(Subsequent)83 4593 y(calls)24 b(with)f(the)e(same)i
Fr(r)n(eg-exp)j Fs(will)e(be)e(mor)n(e)h(ef)n(\002cient.)224
4706 y(The)k(C)h(interface)g(to)f(the)f(POSIX)h(r)n(egular)h(expr)n
(ession)d(code)i(uses)f(ASCII)h Fo(nul)f Fs(as)i(an)g(end-)83
4819 y(of-string)i(marker)-7 b(.)53 b(The)30 b(matching)i(pr)n(ocedur)n
(es)d(will)j(ignor)n(e)e(any)h(characters)g(following)h(an)83
4932 y(embedded)21 b(ASCII)g Fo(nul)p Fs(s)g(in)i Fr(string)p
Fs(.)248 5144 y Fo(\(define)52 b(pattern)f(\(text)h("abc"\)\))248
5257 y(\(any-match?)e(pattern)h("abc"\))488 b Fk(!)55
b Fo(#t)248 5370 y(\(any-match?)50 b(pattern)h("abx"\))488
b Fk(!)55 b Fo(#f)248 5483 y(\(any-match?)50 b(pattern)h("xxabcxx"\))
268 b Fk(!)55 b Fo(#t)248 5709 y(\(exact-match?)49 b(pattern)i("abc"\))
379 b Fk(!)55 b Fo(#t)248 5822 y(\(exact-match?)49 b(pattern)i("abx"\))
379 b Fk(!)55 b Fo(#f)1748 6071 y Fs(47)p eop
%%Page: 48 54
48 53 bop 331 573 a Fo(\(exact-match?)49 b(pattern)i("xxabcxx"\))159
b Fk(!)55 b Fo(#f)331 799 y(\(match)d(pattern)g("abc"\))760
b Fk(!)55 b Fo(\(#)p Fk(f)p Fo(match)d(0)i(3)p Fk(g)p
Fo(\))331 912 y(\(match)e(pattern)g("abx"\))760 b Fk(!)55
b Fo(#f)331 1025 y(\(match)d(pattern)g("xxabcxx"\))540
b Fk(!)55 b Fo(\(#)p Fk(f)p Fo(match)d(2)i(5)p Fk(g)p
Fo(\))331 1250 y(\(let)f(\(\(x)g(\(match)f(\(sequence)f(\(text)h
("ab"\))1750 1363 y(\(submatch)e('foo)j(\(text)f("cd"\)\))1750
1476 y(\(text)g("ef"\)\))1204 1589 y("xxxabcdefxx"\)\))o(\))440
1702 y(\(list)h(x)h(\(match-submatc)o(hes)48 b(x\)\)\))440
1815 y Fk(!)55 b Fo(\(#)p Fk(f)p Fo(match)d(3)i(9)p Fk(g)g
Fo(\(\(foo)f(.)h(#)p Fk(f)p Fo(match)e(5)i(7)p Fk(g)p
Fo(\)\))331 2041 y(\(match-submatche)o(s)440 2154 y(\(match)e
(\(sequence)931 2267 y(\(set)h("a"\))931 2380 y(\(one-of)f(\(submatch)e
('foo)j(\(text)f("bc"\)\))1368 2493 y(\(submatch)e('bar)j(\(text)f
("BC"\)\)\)\))822 2606 y("xxxaBCd"\)\))440 2719 y Fk(!)j
Fo(\(\(bar)d(.)i(#)p Fk(f)p Fo(match)f(4)h(6)p Fk(g)p
Fo(\)\))166 3017 y Fl(5.15)119 b(SRFIs)166 3229 y Fs(`SRFI')46
b(stands)g(for)g(`Scheme)h(Request)d(For)i(Implementation'.)100
b(An)46 b(SRFI)g(is)g(a)i(descrip-)166 3341 y(tion)j(of)g(an)g
(extension)f(to)g(standar)n(d)g(Scheme.)113 b(Draft)52
b(and)f(\002nal)h(SRFI)d(documents,)57 b(a)166 3454 y(F)-7
b(AQ,)47 b(and)g(other)e(information)j(about)f(SRFIs)e(can)j(be)f
(found)f(at)h(the)f(SRFI)g(web)h(site)f(at)166 3567 y
Fo(http://srfi.sch)o(em)o(er)o(s.)o(org)o Fs(.)307 3680
y(Scheme)22 b(48)i(includes)e(implementations)g(of)h(the)f(following)h
(\(\002nal\))h(SRFIs:)302 3868 y Fk(\017)46 b Fs(SRFI)22
b(1)h(\226)g(List)f(Library)302 4056 y Fk(\017)46 b Fs(SRFI)22
b(2)h(\226)g Fo(and-let*)302 4243 y Fk(\017)46 b Fs(SRFI)22
b(5)h(\226)g Fo(let)e Fs(with)i(signatur)n(es)e(and)i(r)n(est)f(ar)n
(guments)302 4431 y Fk(\017)46 b Fs(SRFI)22 b(6)h(\226)g(Basic)g
(string)f(ports)302 4619 y Fk(\017)46 b Fs(SRFI)22 b(7)h(\226)g(Pr)n
(ogram)g(con\002guration)302 4807 y Fk(\017)46 b Fs(SRFI)22
b(8)h(\226)g Fo(receive)302 4994 y Fk(\017)46 b Fs(SRFI)22
b(9)h(\226)g(De\002ning)f(r)n(ecor)n(d)h(types)166 5182
y(Documentation)f(on)h(these)e(can)i(be)g(found)e(at)i(the)f(web)g
(site)g(mentioned)g(above.)307 5295 y(The)c(SRFI)f(bindings)i(can)g(be)
f(accessed)g(either)g(by)g(opening)g(the)f(appr)n(opriate)h(str)o
(uctur)n(e)g(\(the)166 5408 y(str)o(uctur)n(e)h Fo(srfi-)p
Fr(n)f Fs(contains)i(SRFI)f Fr(n)p Fs(\))i(or)f(by)g(loading)g(str)o
(uctur)n(e)g Fo(srfi-7)d Fs(and)k(then)e(using)h(the)166
5521 y Fo(,load-srfi-7-pr)o(og)o(ra)o(m)14 b Fs(command)21
b(to)f(load)g(an)h(SRFI)e(7-style)h(pr)n(ogram.)26 b(The)20
b(syntax)f(for)166 5634 y(the)j(command)h(is)331 5822
y Fo(,load-srfi-7-pro)o(gr)o(am)48 b Fr(name)54 b(\002lename)1831
6071 y Fs(48)p eop
%%Page: 49 55
49 54 bop 83 573 a Fs(This)20 b(cr)n(eates)f(a)h(new)g(str)o(uctur)n(e)
e(and)i(associated)f(package,)h(binds)g(the)f(str)o(uctur)n(e)f(to)i
Fr(name)g Fs(in)g(the)83 686 y(con\002guration)f(package,)g(and)g(then)
f(loads)h(the)g(pr)n(ogram)g(found)f(in)i Fr(\002lename)f
Fs(into)g(the)g(package.)224 799 y(As)j(an)h(example,)g(if)g(the)f
(\002le)h Fo(test.scm)c Fs(contains)248 986 y Fo(\(program)51
b(\(code)i(\(define)e(x)j(10\)\)\))83 1174 y Fs(this)22
b(pr)n(ogram)h(can)g(be)g(loaded)f(as)g(follows:)248
1362 y Fo(>)54 b(,load-package)49 b(srfi-7)248 1474 y(>)54
b(,load-srfi-7-pro)o(gr)o(am)48 b(test)53 b(test.scm)248
1587 y([test])248 1700 y(>)h(,in)g(test)248 1813 y(test>)f(x)248
1926 y(10)248 2039 y(test>)1748 6071 y Fs(49)p eop
%%Page: 50 56
50 55 bop 166 1206 a Fn(Chapter)44 b(6)166 1631 y Fq(Mixing)51
b(Scheme)h(48)g(and)h(C)166 1880 y Ff(Mike)24 b(Sperber)g(and)h
(Richard)f(Kelsey)166 2335 y Fs(This)45 b(chapter)g(describes)f(an)i
(interface)g(for)f(calling)i(C)f(functions)f(fr)n(om)h(Scheme,)k
(calling)166 2448 y(Scheme)18 b(functions)g(fr)n(om)h(C,)g(and)f
(allocating)i(storage)d(in)i(the)f(Scheme)g(heap..)26
b(Scheme)18 b(48)h(man-)166 2561 y(ages)g(stub)g(functions)g(in)h(C)g
(that)g(negotiate)e(between)g(the)g(calling)k(conventions)c(of)i
(Scheme)f(and)166 2674 y(C)27 b(and)g(the)e(memory)h(allocation)i
(policies)f(of)f(both)g(worlds.)38 b(No)26 b(stub)g(generator)f(is)h
(available)166 2786 y(yet,)21 b(but)i(writing)f(stubs)g(is)g(a)i
(straightforwar)n(d)d(task.)166 3147 y Fl(6.1)119 b(A)-8
b(vailable)29 b(facilities)166 3378 y Fs(The)22 b(following)h
(facilities)h(ar)n(e)f(available)j(for)c(interfacing)i(between)d
(Scheme)h(48)h(and)g(C:)302 3606 y Fk(\017)46 b Fs(Scheme)22
b(code)g(can)i(call)g(C)f(functions.)302 3834 y Fk(\017)46
b Fs(The)18 b(external)g(interface)g(pr)n(ovides)g(full)h(intr)n
(ospection)e(for)h(all)i(Scheme)e(objects.)26 b(External)393
3947 y(code)c(may)h(inspect,)f(modify)-10 b(,)22 b(and)g(allocate)i
(Scheme)e(objects)g(arbitrarily)-10 b(.)302 4175 y Fk(\017)46
b Fs(External)22 b(code)g(may)h(raise)g(exceptions)e(back)i(to)f
(Scheme)g(48)i(to)e(signal)h(err)n(ors.)302 4402 y Fk(\017)46
b Fs(External)17 b(code)f(may)i(call)h(back)f(into)f(Scheme.)26
b(Scheme)16 b(48)j(corr)n(ectly)e(unr)n(olls)g(the)g(pr)n(ocess)393
4515 y(stack)23 b(on)f(non-local)i(exits.)302 4743 y
Fk(\017)46 b Fs(External)27 b(modules)g(may)h(r)n(egister)e(bindings)h
(of)h(names)f(to)g(values)h(with)f(a)h(central)g(r)n(eg-)393
4856 y(istry)18 b(accessible)i(fr)n(om)f(Scheme.)26 b(Conversely)-10
b(,)19 b(Scheme)f(code)g(can)i(r)n(egister)d(shar)n(ed)i(bind-)393
4969 y(ings)j(for)h(access)g(by)f(C)h(code.)166 5286
y Ff(6.1.1)99 b(Scheme)24 b(structures)166 5483 y Fs(The)32
b(str)o(uctur)n(e)g Fo(external-calls)27 b Fs(has)33
b(most)g(of)g(the)f(Scheme)g(functions)h(described)f(her)n(e.)166
5596 y(The)18 b(others)e(ar)n(e)j(in)g Fo(dynamic-extern)o(als)o
Fs(,)13 b(which)19 b(has)f(the)g(functions)g(for)g(dynamic)h(loading)
166 5709 y(and)f(name)g(lookup)e(fr)n(om)j(Section)e(6.5,)38
b(and)18 b Fo(shared-binding)o(s)p Fs(,)12 b(which)19
b(has)f(the)f(additional)166 5822 y(shar)n(ed-binding)22
b(functions)h(described)e(in)i(Section)f(6.2.3.)1831
6071 y(50)p eop
%%Page: 51 57
51 56 bop 83 573 a Ff(6.1.2)99 b(C)25 b(naming)f(conventions)83
754 y Fs(The)g(names)h(of)h(all)g(of)g(Scheme)e(48's)i(visible)h(C)e
(bindings)g(begin)g(with)g(`)p Fo(s48)p 2805 754 28 4
v 32 w Fs(')g(\(for)h(pr)n(ocedur)n(es)83 867 y(and)g(variables\))i(or)
e(`)p Fo(S48)p 990 867 V 32 w Fs(')g(\(for)h(macr)n(os\).)39
b(Whenever)25 b(a)i(C)f(name)h(is)f(derived)f(fr)n(om)i(a)g(Scheme)83
980 y(identi\002er)-7 b(,)27 b(we)g(r)n(eplace)g(`)p
Fo(-)p Fs(')g(with)g(`)p 1332 980 V 33 w(')h(and)f(convert)f(letters)g
(to)g(lower)n(case)h(for)g(pr)n(ocedur)n(es)e(and)83
1093 y(upper)n(case)i(for)i(macr)n(os.)46 b(A)29 b(\002nal)g(`)p
Fo(?)p Fs(')46 b(converted)27 b(to)h(`)p 2051 1093 V
33 w Fo(p)p Fs(')h(\(`)p 2248 1093 V 33 w Fo(P)p Fs(')f(in)h(C)g(macr)n
(o)h(names\).)46 b(A)28 b(\002nal)83 1206 y(`)p Fo(!)p
Fs(')51 b(is)30 b(dr)n(opped.)48 b(Thus)29 b(the)g(C)i(macr)n(o)g(for)f
(Scheme's)f Fo(pair?)48 b Fs(is)31 b Fo(S48)p 2655 1206
V 31 w(PAIR)p 2906 1206 V 31 w(P)f Fs(and)g(the)f(one)83
1319 y(for)21 b Fo(set-car!)k Fs(is)c Fo(S48)p 941 1319
V 31 w(SET)p 1137 1319 V 32 w(CAR)p Fs(.)f(Pr)n(ocedur)n(es)g(and)h
(macr)n(os)h(that)f(do)g(not)g(check)g(the)g(types)e(of)83
1432 y(their)j(ar)n(guments)g(have)h(`)p Fo(unsafe)p
Fs(')d(in)k(their)e(names.)224 1547 y(All)k(of)f(the)f(C)i(functions)f
(and)g(macr)n(os)h(described)d(have)j(pr)n(ototypes)c(or)j
(de\002nitions)e(in)j(the)83 1660 y(\002le)d Fo(c/scheme48.h)p
Fs(.)f(The)g(C)h(type)e(for)h(Scheme)g(values)g(is)h(de\002ned)e(ther)n
(e)g(to)h(be)g Fo(s48)p 3181 1660 V 32 w(value)p Fs(.)83
1928 y Ff(6.1.3)99 b(Garbage)24 b(collection)83 2109
y Fs(Scheme)k(48)i(uses)e(a)i(copying)e(garbage)h(collector)-7
b(.)47 b(The)28 b(collector)h(must)f(be)h(able)h(to)e(locate)i(all)83
2222 y(r)n(efer)n(ences)21 b(to)h(objects)g(allocated)h(in)g(the)e
(Scheme)h(48)i(heap)e(in)h(or)n(der)e(to)h(ensur)n(e)f(that)h(storage)f
(is)83 2335 y(not)f(r)n(eclaimed)j(pr)n(ematur)n(ely)d(and)h(to)g
(update)f(r)n(efer)n(ences)g(to)g(objects)h(moved)g(by)g(the)f
(collector)-7 b(.)83 2448 y(The)18 b(garbage)h(collector)g(may)g(r)o
(un)f(whenever)g(an)h(object)g(is)g(allocated)g(in)g(the)f(heap.)26
b(C)20 b(variables)83 2561 y(whose)31 b(values)h(ar)n(e)g(Scheme)g(48)h
(objects)e(and)h(which)g(ar)n(e)h(live)g(acr)n(oss)f(heap)f(allocation)
j(calls)83 2674 y(need)27 b(to)g(be)h(r)n(egister)n(ed)d(with)j(the)f
(garbage)h(collectorgarbage)g(collector)-7 b(.)44 b(See)27
b(section)g(6.9)h(for)83 2786 y(mor)n(e)22 b(information.)83
3098 y Fl(6.2)119 b(Shared)29 b(bindings)83 3314 y Fs(Shar)n(ed)g
(bindings)f(ar)n(e)h(the)g(means)f(by)h(which)h(named)f(values)g(ar)n
(e)g(shar)n(ed)f(between)g(Scheme)83 3427 y(code)j(and)h(C)g(code.)55
b(Ther)n(e)31 b(ar)n(e)h(two)f(separate)g(tables)g(of)h(shar)n(ed)f
(bindings,)j(one)d(for)h(values)83 3540 y(de\002ned)21
b(in)j(Scheme)e(and)h(accessed)g(fr)n(om)g(C)h(and)f(the)f(other)g(for)
h(values)g(going)g(the)f(other)g(way)-10 b(.)83 3653
y(Shar)n(ed)24 b(bindings)g(actually)h(bind)g(names)e(to)h(cells,)h(to)
e(allow)i(a)g(name)g(to)e(be)h(looked)f(up)g(befor)n(e)83
3765 y(it)d(has)g(been)g(assigned.)26 b(This)19 b(is)i(necessary)d
(because)i(C)h(initialization)i(code)c(may)h(be)g(r)o(un)g(befor)n(e)83
3878 y(or)h(after)g(the)g(corr)n(esponding)e(Scheme)i(code,)f
(depending)f(on)i(whether)f(the)g(Scheme)h(code)f(is)i(in)83
3991 y(the)g(r)n(esumed)f(image)i(or)f(is)h(r)o(un)g(in)g(the)f(curr)n
(ent)g(session.)83 4259 y Ff(6.2.1)99 b(Exporting)25
b(Scheme)f(values)h(to)h(C)101 4438 y Fk(\017)46 b Fo(\(define-exporte)
o(d-)o(bi)o(ndi)o(ng)39 b Fr(name)45 b(value)p Fo(\))h
Fk(!)f Fr(shar)n(ed-binding)101 4616 y Fk(\017)h Fo(s48)p
362 4616 V 31 w(value)e(s48)p 877 4616 V 31 w(get)p 1073
4616 V 31 w(imported)p 1544 4616 V 29 w(binding\(char)c(*name\))101
4729 y Fk(\017)46 b Fo(s48)p 362 4729 V 31 w(value)e(S48)p
877 4729 V 31 w(SHARED)p 1238 4729 V 30 w(BINDING)p 1653
4729 V 30 w(REF\(s48)p 2068 4729 V 29 w(value)f(shared)p
2745 4729 V 30 w(binding\))83 4909 y(Define-exported)o(-b)o(in)o(di)o
(ng)18 b Fs(makes)24 b Fr(value)h Fs(available)j(to)23
b(C)i(code)f(under)f(as)h Fr(name)h Fs(which)83 5022
y(must)48 b(be)g(a)h Fr(string)p Fs(,)56 b(cr)n(eating)49
b(a)g(new)e(shar)n(ed)h(binding)h(if)g(necessary)-10
b(.)103 b(The)48 b(C)h(function)83 5134 y Fo(s48)p 253
5134 V 31 w(get)p 449 5134 V 32 w(imported)p 921 5134
V 29 w(binding)33 b Fs(r)n(eturns)h(the)i(shar)n(ed)f(binding)h
(de\002ned)e(for)i Fo(name)p Fs(,)h(again)83 5247 y(cr)n(eating)43
b(it)g(if)h(necessary)-10 b(.)86 b(The)42 b(C)i(macr)n(o)f
Fo(S48)p 1903 5247 V 32 w(SHARED)p 2265 5247 V 30 w(BINDING)p
2680 5247 V 29 w(REF)f Fs(der)n(efer)n(ences)f(a)83 5360
y(shar)n(ed)22 b(binding,)h(r)n(eturning)e(its)i(curr)n(ent)f(value.)83
5628 y Ff(6.2.2)99 b(Exporting)25 b(C)g(values)g(to)h(Scheme)101
5808 y Fk(\017)46 b Fo(void)e(s48)p 626 5808 V 31 w(define)p
987 5808 V 30 w(exported)p 1457 5808 V 29 w(binding\(char)c(*name,)j
(s48)p 2724 5808 V 31 w(value)g(v\))1748 6071 y Fs(51)p
eop
%%Page: 52 58
52 57 bop 184 573 a Fk(\017)46 b Fo(\(lookup-importe)o(d-)o(bi)o(ndi)o
(ng)39 b Fr(string)p Fo(\))46 b Fk(!)f Fr(shar)n(ed-binding)184
686 y Fk(\017)h Fo(\(shared-binding)o(-r)o(ef)39 b Fr(shar)n
(ed-binding)p Fo(\))49 b Fk(!)c Fr(value)166 831 y Fs(These)30
b(ar)n(e)i(used)f(to)g(de\002ne)f(shar)n(ed)h(bindings)h(fr)n(om)g(C)g
(and)g(to)f(access)g(them)h(fr)n(om)g(Scheme.)166 944
y(Again,)24 b(if)h(a)f(name)g(is)g(looked)e(up)i(befor)n(e)f(it)h(has)g
(been)f(de\002ned,)f(a)j(new)e(binding)h(is)g(cr)n(eated)f(for)166
1057 y(it.)307 1170 y(The)17 b(common)h(case)g(of)g(exporting)e(a)i(C)g
(function)g(to)f(Scheme)g(can)i(be)f(done)e(using)h(the)g(macr)n(o)166
1283 y Fo(S48)p 336 1283 28 4 v 31 w(EXPORT)p 697 1283
V 30 w(FUNCTION\()p Fr(name)p Fo(\))p Fs(.)24 b(This)e(expands)f(into)
331 1445 y Fo(s48)p 501 1445 V 32 w(define)p 863 1445
V 30 w(exported)p 1333 1445 V 29 w(binding\(")p Fr(name)p
Fo(",)2022 1558 y(s48)p 2192 1558 V 32 w(enter)p 2499
1558 V 30 w(pointer\()p Fr(name)p Fo(\)\))166 1721 y
Fs(which)33 b(boxes)e(the)g(function)i(into)e(a)i(Scheme)f(byte)f
(vector)h(and)g(then)f(exports)f(it.)57 b(Note)30 b(that)166
1834 y Fo(s48)p 336 1834 V 31 w(enter)p 642 1834 V 31
w(pointer)17 b Fs(allocates)k(space)f(in)h(the)e(Scheme)h(heap)g(and)g
(might)h(trigger)d(a)j(garbage)166 1947 y(collection;)i(see)e(Section)h
(6.9.)184 2092 y Fk(\017)46 b Fo(\(import-definit)o(io)o(n)39
b Fr(name)p Fo(\))1768 b Fs(syntax)184 2205 y Fk(\017)46
b Fo(\(import-definit)o(io)o(n)39 b Fr(name)46 b(c-name)p
Fo(\))1458 b Fs(syntax)166 2351 y(These)21 b(macr)n(os)i(simplify)h
(importing)e(de\002nitions)f(fr)n(om)i(C)h(to)e(Scheme.)27
b(They)21 b(expand)h(into)307 2464 y Fo(\(define)52 b
Fr(name)i Fo(\(lookup-importe)o(d-)o(bi)o(ndi)o(ng)48
b Fr(c-name)p Fo(\)\))166 2577 y Fs(wher)n(e)25 b Fr(c-name)h
Fs(is)g(as)g(supplied)f(for)h(the)f(second)g(form.)37
b(For)26 b(the)f(\002rst)g(form)h Fr(c-name)g Fs(is)g(derived)166
2690 y(fr)n(om)g Fr(name)g Fs(by)g(r)n(eplacing)g(`)p
Fo(-)p Fs(')g(with)f(`)p 1507 2690 V 33 w(')h(and)g(converting)f
(letters)f(to)h(lower)n(case.)37 b(For)25 b(example,)166
2803 y Fo(\(import-definit)o(io)o(n)48 b(my-foo\))20
b Fs(expands)h(into)307 2915 y Fo(\(define)52 b(my-foo)f
(\(lookup-imported)o(-b)o(in)o(di)o(ng)d("my)p 2659 2915
V 31 w(foo"\)\))166 3165 y Ff(6.2.3)99 b(Complete)25
b(shared)f(binding)h(interface)166 3342 y Fs(Ther)n(e)c(ar)n(e)i(a)g
(number)f(of)g(other)f(Scheme)h(functions)g(r)n(elated)f(to)h(shar)n
(ed)g(bindings;)g(these)e(ar)n(e)j(in)166 3455 y(the)f(str)o(uctur)n(e)
f Fo(shared-bindings)p Fs(.)184 3601 y Fk(\017)46 b Fo
(\(shared-binding)o(?)f Fr(x)p Fo(\))g Fk(!)h Fr(boolean)184
3713 y Fk(\017)g Fo(\(shared-binding)o(-n)o(am)o(e)39
b Fr(shar)n(ed-binding)p Fo(\))49 b Fk(!)c Fr(string)184
3826 y Fk(\017)h Fo(\(shared-binding)o(-i)o(s-)o(imp)o(or)o(t?)e
Fr(shar)n(ed-binding)p Fo(\))49 b Fk(!)c Fr(boolean)184
3939 y Fk(\017)h Fo(\(shared-binding)o(-s)o(et)o(!)39
b Fr(shar)n(ed-binding)50 b(value)p Fo(\))184 4052 y
Fk(\017)c Fo(\(define-importe)o(d-)o(bi)o(ndi)o(ng)39
b Fr(string)46 b(value)p Fo(\))184 4165 y Fk(\017)g Fo
(\(lookup-exporte)o(d-)o(bi)o(ndi)o(ng)39 b Fr(string)p
Fo(\))184 4278 y Fk(\017)46 b Fo(\(undefine-impor)o(te)o(d-)o(bin)o(di)
o(ng)39 b Fr(string)p Fo(\))184 4391 y Fk(\017)46 b Fo
(\(undefine-expor)o(te)o(d-)o(bin)o(di)o(ng)39 b Fr(string)p
Fo(\))166 4537 y(Shared-binding?)h Fs(is)29 b(the)e(pr)n(edicate)i(for)
f(shar)n(ed-bindings.)46 b Fo(Shared-binding)o(-n)o(am)o(e)166
4650 y Fs(r)n(eturns)26 b(the)g(name)i(of)f(a)h(binding.)41
b Fo(Shared-binding-)o(is)o(-im)o(po)o(rt)o(?)36 b Fs(is)27
b(tr)o(ue)f(if)i(the)f(bind-)166 4763 y(ing)32 b(was)f(de\002ned)f(fr)n
(om)i(C.)g Fo(Shared-binding)o(-s)o(et)o(!)49 b Fs(changes)31
b(the)f(value)j(of)e(a)h(binding.)166 4875 y Fo(Define-imported)o(-b)o
(in)o(di)o(ng)27 b Fs(and)33 b Fo(lookup-exporte)o(d-b)o(in)o(di)o(ng)
27 b Fs(ar)n(e)33 b(Scheme)g(ver)n(-)166 4988 y(sions)i(of)g
Fo(s48)p 693 4988 V 32 w(define)p 1055 4988 V 30 w(exported)p
1525 4988 V 29 w(binding)d Fs(and)k Fo(s48)p 2326 4988
V 31 w(lookup)p 2687 4988 V 30 w(imported)p 3157 4988
V 29 w(binding)p Fs(.)166 5101 y(The)20 b(two)h Fo(undefine-)c
Fs(pr)n(ocedur)n(es)i(r)n(emove)i(bindings)g(fr)n(om)h(the)e(two)g
(tables.)27 b(They)20 b(do)h(noth-)166 5214 y(ing)i(if)g(the)f(name)h
(is)g(not)e(found)h(in)h(the)f(table.)307 5327 y(The)g(following)h(C)g
(macr)n(os)g(corr)n(espond)e(to)h(the)g(Scheme)g(functions)g(above.)184
5473 y Fk(\017)46 b Fo(int)317 b(S48)p 927 5473 V 31
w(SHARED)p 1288 5473 V 30 w(BINDING)p 1703 5473 V 30
w(P\(x\))184 5586 y Fk(\017)46 b Fo(int)317 b(S48)p 927
5586 V 31 w(SHARED)p 1288 5586 V 30 w(BINDING)p 1703
5586 V 30 w(IS)p 1843 5586 V 32 w(IMPORT)p 2205 5586
V 30 w(P\(s48)p 2510 5586 V 30 w(value)43 b(s)p 2913
5586 V 33 w(b\))184 5699 y Fk(\017)j Fo(s48)p 445 5699
V 31 w(value)e(S48)p 960 5699 V 31 w(SHARED)p 1321 5699
V 30 w(BINDING)p 1736 5699 V 30 w(NAME\(s48)p 2206 5699
V 29 w(value)f(s)p 2608 5699 V 32 w(b\))184 5812 y Fk(\017)j
Fo(void)271 b(S48)p 936 5812 V 31 w(SHARED)p 1297 5812
V 30 w(BINDING)p 1712 5812 V 30 w(SET\(s48)p 2127 5812
V 29 w(value)44 b(s)p 2530 5812 V 32 w(b,)g(s48)p 2881
5812 V 32 w(value)f(v\))1831 6071 y Fs(52)p eop
%%Page: 53 59
53 58 bop 83 573 a Fl(6.3)119 b(Calling)30 b(C)g(functions)g(from)g
(Scheme)83 785 y Fs(Ther)n(e)19 b(ar)n(e)h(thr)n(ee)f(dif)n(fer)n(ent)h
(ways)g(to)f(call)j(C)e(functions)g(fr)n(om)h(Scheme,)e(depending)f(on)
i(how)f(the)83 898 y(C)k(function)g(was)f(obtained.)101
1072 y Fk(\017)46 b Fo(\(call-imported-)o(bi)o(nd)o(ing)39
b Fr(binding)46 b(ar)n(g)1886 1086 y Fm(0)1972 1072 y
Fr(.)14 b(.)g(.)g Fo(\))49 b Fk(!)c Fr(value)101 1185
y Fk(\017)h Fo(\(call-external)39 b Fr(external)48 b(ar)n(g)1463
1199 y Fm(0)1549 1185 y Fr(.)14 b(.)g(.)g Fo(\))49 b
Fk(!)c Fr(value)101 1298 y Fk(\017)h Fo(\(call-external-)o(va)o(lu)o(e)
39 b Fr(value)47 b(name)e(ar)n(g)1931 1312 y Fm(0)2018
1298 y Fr(.)14 b(.)g(.)g Fo(\))48 b Fk(!)e Fr(value)83
1472 y Fs(Each)33 b(of)g(these)e(applies)i(its)g(\002rst)f(ar)n
(gument,)j(a)e(C)h(function,)h(to)d(the)g(r)n(est)g(of)h(the)f(ar)n
(guments.)83 1585 y(For)19 b Fo(call-imported-)o(bi)o(nd)o(in)o(g)13
b Fs(the)19 b(function)g(ar)n(gument)g(must)g(be)g(an)h(imported)e
(binding.)83 1698 y(For)h Fo(call-external)14 b Fs(the)19
b(function)h(ar)n(gument)g(must)f(be)h(an)g(external)g(bound)f(in)h
(the)g(curr)n(ent)83 1811 y(pr)n(ocess)27 b(\(see)g(Section)g(6.5\).)90
b(For)27 b Fo(call-external-va)o(lu)o(e)22 b Fr(value)29
b Fs(must)f(be)g(a)g(byte)g(vector)83 1924 y(whose)f(contents)g(is)h(a)
h(pointer)e(to)h(a)h(C)g(function)g(and)f Fr(name)h Fs(should)e(be)h(a)
h(string)f(naming)h(the)83 2037 y(function.)f(The)22
b Fr(name)h Fs(ar)n(gument)f(is)g(used)g(only)g(for)g(printing)h(err)n
(or)f(messages.)224 2150 y(For)31 b(all)i(of)f(these,)g(the)f(C)h
(function)g(is)f(passed)g(the)f Fr(ar)n(g)2202 2164 y
Fd(i)2264 2150 y Fs(values)i(and)g(the)e(value)j(r)n(eturned)83
2263 y(is)28 b(that)g(r)n(eturned)e(by)i(C)h(pr)n(ocedur)n(e.)43
b(No)27 b(automatic)i(r)n(epr)n(esentation)d(conversion)h(occurs)h(for)
83 2376 y(either)d(ar)n(guments)h(or)g(r)n(eturn)f(values.)40
b(Up)25 b(to)h(twelve)g(ar)n(guments)f(may)i(be)f(passed.)38
b(Ther)n(e)25 b(is)83 2489 y(no)k(method)f(supplied)g(for)h(r)n
(eturning)g(multiple)h(values)f(to)g(Scheme)g(fr)n(om)h(C)f(\(or)h
(vice)g(versa\))83 2602 y(\(mainly)24 b(because)e(C)i(does)d(not)g
(have)i(multiple)g(r)n(eturn)f(values\).)224 2716 y(Keyboar)n(d)j
(interr)o(upts)g(that)g(occur)i(during)e(a)h(call)i(to)d(a)i(C)f
(function)g(ar)n(e)h(ignor)n(ed)e(until)h(the)83 2829
y(function)d(r)n(eturns)e(to)h(Scheme)g(\(this)h(is)f(clearly)i(a)f(pr)
n(oblem;)g(we)f(ar)n(e)h(working)e(on)i(a)g(solution\).)101
3003 y Fk(\017)46 b Fo(\(import-lambda-)o(de)o(fi)o(nit)o(io)o(n)39
b Fr(name)46 b Fo(\()p Fr(formal)g Fo(...\)\))783 b Fs(syntax)101
3115 y Fk(\017)46 b Fo(\(import-lambda-)o(de)o(fi)o(nit)o(io)o(n)39
b Fr(name)46 b Fo(\()p Fr(formal)g Fo(...\))e Fr(c-name)p
Fo(\))475 b Fs(syntax)83 3289 y(These)21 b(macr)n(os)i(simplify)g
(importing)f(functions)h(fr)n(om)g(C.)f(They)g(de\002ne)f
Fr(name)i Fs(to)f(be)g(a)h(function)83 3402 y(with)35
b(the)e(given)i(formals)g(that)g(applies)f(those)f(formals)i(to)g(the)e
(corr)n(esponding)g(C)i(binding.)83 3515 y Fr(C-name)p
Fs(,)22 b(if)i(supplied,)d(should)h(be)g(a)h(string.)k(These)21
b(expand)h(into)248 3732 y Fo(\(define)52 b(temp)g(\(lookup-imported)o
(-b)o(in)o(di)o(ng)c Fr(c-name)p Fo(\)\))248 3846 y(\(define)k
Fr(name)357 3960 y Fo(\(lambda)g(\()p Fr(formal)j Fo(...\))467
4073 y(\(external-appl)o(y)48 b(temp)53 b Fr(formal)j
Fo(...\)\)\))104 4290 y Fs(If)21 b Fr(c-name)h Fs(is)f(not)f(supplied,)
g(it)h(is)h(derived)e(fr)n(om)h Fr(name)g Fs(by)g(converting)g(all)h
(letters)e(to)g(lower)n(case)83 4402 y(and)j(r)n(eplacing)g(`)p
Fo(-)p Fs(')g(with)f(`)p 1022 4402 28 4 v 33 w('.)83
4706 y Fl(6.4)119 b(Adding)30 b(external)e(modules)j(to)f(the)g
Fj(Makefile)83 4918 y Fs(Getting)c(access)i(to)e(C)i(bindings)f(fr)n
(om)h(Scheme)e(r)n(equir)n(es)h(that)g(the)g(C)g(code)g(be)g(compiled)g
(and)83 5031 y(linked)h(in)h(with)g(the)f(Scheme)g(48)i(virtual)g
(machine)f(and)g(that)f(the)g(r)n(elevant)h(shar)n(ed)f(bindings)83
5144 y(be)23 b(cr)n(eated.)k(The)22 b(Scheme)g(48)i(make\002le)f(has)f
(r)o(ules)h(for)f(compiling)i(and)f(linking)g(external)f(code)83
5257 y(and)j(for)h(specifying)e(initialization)29 b(functions)c(that)g
(should)f(be)h(called)i(on)e(startup.)34 b(Ther)n(e)25
b(ar)n(e)83 5370 y(thr)n(ee)20 b Fo(Makefile)d Fs(variables)22
b(that)e(contr)n(ol)h(which)g(external)f(modules)g(ar)n(e)h(included)f
(in)h(the)f(ex-)83 5483 y(ecutable)25 b(for)f(the)g(virtual)i(machine)g
(\()p Fo(scheme48vm)p Fs(\).)k Fo(EXTERNAL)p 2503 5483
V 29 w(OBJECTS)21 b Fs(lists)j(the)g(object)83 5596 y(\002les)g(to)f
(be)h(included)g(in)g Fo(scheme48vm)p Fs(,)c Fo(EXTERNAL)p
2013 5596 V 29 w(FLAGS)i Fs(is)i(a)h(list)f(of)g Fo(ld)f
Fs(\003ags)h(to)g(be)g(used)83 5709 y(when)19 b(cr)n(eating)h
Fo(scheme48vm)p Fs(,)c(and)k Fo(EXTERNAL)p 1879 5709
V 29 w(INITIALIZERS)15 b Fs(is)20 b(a)g(list)g(of)g(C)h(pr)n(ocedur)n
(es)83 5822 y(to)27 b(be)h(called)g(on)f(startup.)42
b(The)27 b(pr)n(ocedur)n(es)f(listed)h(in)h Fo(EXTERNAL)p
2519 5822 V 29 w(INITIALIZERS)22 b Fs(should)1748 6071
y(53)p eop
%%Page: 54 60
54 59 bop 166 573 a Fs(take)31 b(no)g(ar)n(guments)g(and)h(have)g(a)g
(r)n(eturn)f(type)f(of)i Fo(void)p Fs(.)53 b(After)31
b(changing)h(the)e(de\002nitions)166 686 y(of)35 b(any)f(of)h(these)e
(variables)j(you)e(should)f(do)h Fo(make)53 b(scheme48vm)30
b Fs(to)k(r)n(ebuild)h(the)f(virtual)166 799 y(machine.)166
1095 y Fl(6.5)119 b(Dynamic)30 b(loading)166 1306 y Fs(External)23
b(code)g(can)i(be)e(loaded)g(into)h(a)g(r)o(unning)g(Scheme)f(48)h(pr)n
(ocess)f(and)h(C)g(object-\002le)g(bind-)166 1419 y(ings)36
b(can)i(be)e(der)n(efer)n(enced)f(at)i(r)o(untime)f(and)h(their)f
(values)h(called)g(\(although)g(not)f(all)i(ver)n(-)166
1532 y(sions)25 b(of)g(Unix)h(support)e(all)j(of)e(this\).)37
b(The)25 b(r)n(equir)n(ed)g(Scheme)g(functions)g(ar)n(e)h(in)g(the)f
(str)o(uctur)n(e)166 1645 y Fo(dynamic-externa)o(ls)o
Fs(.)184 1804 y Fk(\017)46 b Fo(\(dynamic-load)40 b Fr(string)p
Fo(\))166 1963 y(Dynamic-load)27 b Fs(loads)32 b(the)g(named)g(\002le)h
(into)f(the)f(curr)n(ent)h(pr)n(ocess,)i(raising)f(an)f(exception)166
2076 y(if)g(the)f(\002le)h(cannot)f(be)h(found)e(or)h(if)i(dynamic)f
(loading)f(is)h(not)f(supported)d(by)k(the)e(operating)166
2189 y(system.)44 b(The)28 b(\002le)g(must)g(have)h(been)f(compiled)h
(and)g(linked)f(appr)n(opriately)-10 b(.)45 b(For)27
b(Linux,)j(the)166 2302 y(following)e(commands)f(compile)h
Fo(foo.c)d Fs(into)j(a)g(\002le)f Fo(foo.so)e Fs(that)i(can)h(be)g
(loaded)f(dynami-)166 2415 y(cally)-10 b(.)331 2591 y
Fo(\045)54 b(gcc)g(-c)f(-o)h(foo.o)e(foo.c)331 2704 y(\045)i(ld)g
(-shared)d(-o)j(foo.so)e(foo.o)184 2880 y Fk(\017)46
b Fo(\(get-external)40 b Fr(string)p Fo(\))46 b Fk(!)f
Fr(external)184 2993 y Fk(\017)h Fo(\(external?)g Fr(x)p
Fo(\))g Fk(!)f Fr(boolean)184 3105 y Fk(\017)h Fo(\(external-name)39
b Fr(external)p Fo(\))47 b Fk(!)f Fr(string)184 3218
y Fk(\017)g Fo(\(external-value)39 b Fr(external)p Fo(\))47
b Fk(!)e Fr(byte-vector)166 3378 y Fs(These)26 b(functions)h(give)g
(access)g(to)g(values)g(bound)g(in)g(the)g(curr)n(ent)g(pr)n(ocess,)g
(and)g(ar)n(e)g(used)f(for)166 3491 y(r)n(etrieving)h(values)h(fr)n(om)
g(dynamically-loaded)h(\002les.)42 b Fo(Get-external)23
b Fs(r)n(eturns)j(an)i Fr(external)166 3604 y Fs(object)h(that)h
(contains)f(the)g(value)h(of)g Fr(name)p Fs(,)h(raising)e(an)h
(exception)f(if)h(ther)n(e)e(is)i(no)f(such)g(value)166
3716 y(in)j(the)f(curr)n(ent)g(pr)n(ocess.)54 b Fo(External?)d
Fs(is)32 b(the)f(pr)n(edicate)g(for)h(externals,)g(and)g
Fo(external-)166 3829 y(name)e Fs(and)i Fo(external-value)26
b Fs(r)n(eturn)31 b(the)h(name)g(and)g(value)h(of)f(an)h(external.)55
b(The)31 b(value)166 3942 y(is)h(r)n(eturned)d(as)j(byte)f(vector)g(of)
g(length)g(four)g(\(on)h(32-bit)h(ar)n(chitectur)n(es\).)55
b(The)30 b(value)j(is)e(that)166 4055 y(which)23 b(was)f(extant)g(when)
g Fo(get-external)17 b Fs(was)22 b(called.)29 b(The)22
b(following)h(two)e(functions)h(can)166 4168 y(be)h(used)e(to)h(update)
f(the)h(values)h(of)f(externals.)184 4327 y Fk(\017)46
b Fo(\(lookup-externa)o(l)39 b Fr(external)p Fo(\))47
b Fk(!)f Fr(boolean)184 4440 y Fk(\017)g Fo(\(lookup-all-ext)o(er)o(na)
o(ls\))39 b Fk(!)45 b Fr(boolean)166 4600 y Fo(Lookup-external)21
b Fs(updates)k(the)i(value)h(of)f Fr(external)i Fs(by)e(looking)g(up)g
(its)g(name)g(in)h(the)e(cur)n(-)166 4713 y(r)n(ent)32
b(pr)n(ocess,)i(r)n(eturning)d Fo(#t)h Fs(if)h(the)f(name)h(is)g(bound)
f(and)g Fo(#f)g Fs(if)i(it)e(is)h(not.)57 b Fo(Lookup-all-)166
4825 y(externals)29 b Fs(calls)35 b Fo(lookup-external)27
b Fs(on)33 b(all)h(extant)f(externals,)i(r)n(eturning)d
Fo(#f)g Fs(any)i(ar)n(e)166 4938 y(unbound.)184 5098
y Fk(\017)46 b Fo(\(call-external)39 b Fr(external)48
b(ar)n(g)1546 5112 y Fm(0)1632 5098 y Fr(.)14 b(.)g(.)g
Fo(\))49 b Fk(!)c Fr(value)166 5257 y Fs(An)25 b(external)g(whose)f
(value)j(is)e(a)h(C)g(pr)n(ocedur)n(e)f(can)h(be)f(called)i(using)e
Fo(call-external)p Fs(.)30 b(See)166 5370 y(Section)22
b(6.3)46 b(for)23 b(mor)n(e)f(information.)307 5483 y(In)j(some)g
(versions)f(of)i(Unix)f(r)n(etrieving)g(a)h(value)h(fr)n(om)f(the)e
(curr)n(ent)h(pr)n(ocess)f(may)i(r)n(equir)n(e)166 5596
y(a)h(non-trivial)h(amount)e(of)g(computation.)39 b(W)-8
b(e)25 b(r)n(ecommend)h(that)g(a)h(dynamically-loaded)g(\002le)166
5709 y(contain)33 b(a)g(single)f(initialization)k(pr)n(ocedur)n(e)31
b(that)h(cr)n(eates)g(shar)n(ed)g(bindings)h(for)f(the)g(values)166
5822 y(exported)20 b(by)j(the)e(\002le.)1831 6071 y(54)p
eop
%%Page: 55 61
55 60 bop 83 573 a Fl(6.6)119 b(Compatibility)83 787
y Fs(Scheme)28 b(48's)h(old)f Fo(external-call)22 b Fs(function)29
b(is)f(still)h(available)i(in)e(the)f(str)o(uctur)n(e)f
Fo(exter-)83 900 y(nals)p Fs(,)33 b(which)g(now)f(also)g(includes)h
Fo(external-name)26 b Fs(and)33 b Fo(external-value)o
Fs(.)52 b(The)31 b(old)83 1013 y Fo(scheme48.h)18 b Fs(\002le)23
b(has)g(been)f(r)n(enamed)g Fo(old-scheme48.h)o Fs(.)83
1320 y Fl(6.7)119 b(Accessing)30 b(Scheme)g(data)g(from)f(C)83
1534 y Fs(The)k(C)g(header)f(\002le)i Fo(scheme48.h)29
b Fs(pr)n(ovides)j(access)h(to)g(Scheme)f(48)i(data)g(str)o(uctur)n
(es.)58 b(The)83 1647 y(type)35 b Fo(s48)p 468 1647 28
4 v 31 w(value)g Fs(is)h(used)g(for)g(Scheme)g(values.)70
b(When)36 b(the)g(type)f(of)h(a)i(value)f(is)f(known,)83
1760 y(such)25 b(as)g(the)g(integer)f(r)n(eturned)f(by)j
Fo(vector-length)19 b Fs(or)25 b(the)g(boolean)g(r)n(eturned)e(by)j
Fo(pair?)p Fs(,)83 1872 y(the)i(corr)n(esponding)e(C)j(pr)n(ocedur)n(e)
e(r)n(eturns)g(a)i(C)g(value)g(of)f(the)g(appr)n(opriate)g(type,)g(and)
g(not)g(a)83 1985 y Fo(s48)p 253 1985 V 31 w(value)p
Fs(.)e(Pr)n(edicates)c(r)n(eturn)g Fo(1)g Fs(for)h(tr)o(ue)f(and)g
Fo(0)g Fs(for)h(false.)83 2249 y Ff(6.7.1)99 b(Constants)83
2429 y Fs(The)22 b(following)h(macr)n(os)g(denote)e(Scheme)h
(constants:)219 2622 y Fk(\017)46 b Fo(S48)p 480 2622
V 32 w(FALSE)20 b Fs(is)j Fo(#f)p Fs(.)219 2815 y Fk(\017)46
b Fo(S48)p 480 2815 V 32 w(TRUE)21 b Fs(is)h Fo(#t)p
Fs(.)219 3008 y Fk(\017)46 b Fo(S48)p 480 3008 V 32 w(NULL)21
b Fs(is)h(the)g(empty)f(list.)219 3202 y Fk(\017)46 b
Fo(S48)p 480 3202 V 32 w(UNSPECIFIC)24 b Fs(is)29 b(a)h(value)f(used)f
(for)g(functions)h(which)g(have)h(no)e(meaningful)i(r)n(e-)310
3315 y(turn)c(value)g(\(in)h(Scheme)e(48)i(this)f(value)g(r)n(eturned)f
(by)g(the)h(nullary)g(pr)n(ocedur)n(e)f Fo(unspe-)310
3428 y(cific)c Fs(in)i(the)f(str)o(uctur)n(e)f Fo(util)p
Fs(\).)219 3621 y Fk(\017)46 b Fo(S48)p 480 3621 V 32
w(EOF)34 b Fs(is)i(the)g(end-of-\002le)f(object)h(\(in)h(Scheme)e(48)i
(this)f(value)h(is)f(r)n(eturned)e(by)i(the)310 3734
y(nullary)24 b(pr)n(ocedur)n(e)d Fo(eof-object)d Fs(in)23
b(the)f(str)o(uctur)n(e)g Fo(i/o-internal)p Fs(\).)83
3997 y Ff(6.7.2)99 b(Converting)26 b(values)83 4177 y
Fs(The)d(following)g(macr)n(os)h(and)f(functions)g(convert)g(values)g
(between)f(Scheme)g(and)i(C)f(r)n(epr)n(esen-)83 4290
y(tations.)60 b(The)32 b(`extract')i(ones)e(convert)h(fr)n(om)h(Scheme)
f(to)g(C)h(and)f(the)g(`enter)7 b('s)32 b(go)h(the)f(other)83
4403 y(way)-10 b(.)101 4580 y Fk(\017)46 b Fo(int)317
b(S48)p 844 4580 V 31 w(EXTRACT)p 1260 4580 V 30 w(BOOLEAN\(s48)p
1895 4580 V 28 w(value\))101 4692 y Fk(\017)46 b Fo(unsigned)c(char)i
(s48)p 1108 4692 V 31 w(extract)p 1524 4692 V 29 w(char\(s48)p
1993 4692 V 30 w(value\))101 4805 y Fk(\017)i Fo(char)e(*)181
b(s48)p 862 4805 V 31 w(extract)p 1278 4805 V 30 w(string\(s48)p
1858 4805 V 28 w(value\))101 4918 y Fk(\017)46 b Fo(char)e(*)181
b(s48)p 862 4918 V 31 w(extract)p 1278 4918 V 30 w(byte)p
1528 4918 V 31 w(vector\(s48)p 2109 4918 V 28 w(value\))101
5031 y Fk(\017)46 b Fo(long)271 b(s48)p 853 5031 V 31
w(extract)p 1269 5031 V 30 w(integer\(s48)p 1904 5031
V 28 w(value\))101 5144 y Fk(\017)46 b Fo(double)179
b(s48)p 871 5144 V 32 w(extract)p 1288 5144 V 29 w(double\(s48)p
1867 5144 V 28 w(value\))101 5257 y Fk(\017)46 b Fo(s48)p
362 5257 V 31 w(value)e(S48)p 877 5257 V 31 w(ENTER)p
1183 5257 V 30 w(BOOLEAN\(int\))101 5370 y Fk(\017)i
Fo(s48)p 362 5370 V 31 w(value)e(s48)p 877 5370 V 31
w(enter)p 1183 5370 V 30 w(char\(unsigned)c(char\))101
5483 y Fk(\017)46 b Fo(s48)p 362 5483 V 31 w(value)e(s48)p
877 5483 V 31 w(enter)p 1183 5483 V 30 w(string\(char)d(*\))1146
b Fs(\(may)23 b(GC\))101 5596 y Fk(\017)46 b Fo(s48)p
362 5596 V 31 w(value)e(s48)p 877 5596 V 31 w(enter)p
1183 5596 V 30 w(byte)p 1433 5596 V 31 w(vector\(char)d(*,)j(long\))576
b Fs(\(may)23 b(GC\))101 5709 y Fk(\017)46 b Fo(s48)p
362 5709 V 31 w(value)e(s48)p 877 5709 V 31 w(enter)p
1183 5709 V 30 w(integer\(long\))1187 b Fs(\(may)23 b(GC\))101
5822 y Fk(\017)46 b Fo(s48)p 362 5822 V 31 w(value)e(s48)p
877 5822 V 31 w(enter)p 1183 5822 V 30 w(double\(double\))1132
b Fs(\(may)23 b(GC\))1748 6071 y(55)p eop
%%Page: 56 62
56 61 bop 166 573 a Fo(S48)p 336 573 28 4 v 31 w(EXTRACT)p
752 573 V 30 w(BOOLEAN)69 b Fs(is)k(false)g(if)g(its)f(ar)n(gument)g
(is)h Fo(#f)e Fs(and)i(tr)o(ue)e(otherwise.)166 686 y
Fo(S48)p 336 686 V 31 w(ENTER)p 642 686 V 31 w(BOOLEAN)19
b Fs(is)k Fo(#f)f Fs(if)h(its)g(ar)n(gument)f(is)h(zer)n(o)f(and)h
Fo(#t)f Fs(otherwise.)307 799 y Fo(s48)p 477 799 V 32
w(extract)p 894 799 V 29 w(string)32 b Fs(and)j Fo(s48)p
1639 799 V 32 w(extract)p 2056 799 V 29 w(byte)p 2305
799 V 31 w(vector)d Fs(r)n(eturn)i(pointers)g(to)g(the)166
912 y(actual)22 b(storage)d(used)g(by)h(the)g(string)f(or)h(byte)g
(vector)-7 b(.)27 b(These)19 b(pointers)f(ar)n(e)j(valid)h(only)e
(until)h(the)166 1024 y(next)h(garbage)g(collection;)h(see)e(Section)h
(6.9.)307 1137 y(The)g(second)f(ar)n(gument)i(to)f Fo(s48)p
1472 1137 V 31 w(enter)p 1778 1137 V 30 w(byte)p 2028
1137 V 31 w(vector)e Fs(is)j(the)f(length)g(of)g(byte)g(vector)-7
b(.)307 1250 y Fo(s48)p 477 1250 V 32 w(enter)p 784 1250
V 30 w(integer\(\))23 b Fs(needs)h(to)i(allocate)i(storage)d(when)h
(its)g(ar)n(gument)g(is)h(too)f(lar)n(ge)166 1363 y(to)34
b(\002t)g(in)h(a)g(Scheme)f(48)h(\002xnum.)63 b(In)34
b(cases)g(wher)n(e)g(the)f(number)h(is)h(known)e(to)h(\002t)g(within)h
(a)166 1476 y(\002xnum)29 b(\(curr)n(ently)g(30)h(bits)f(including)g
(the)f(sign\),)j(the)d(following)h(pr)n(ocedur)n(es)e(can)j(be)f(used.)
166 1589 y(These)j(have)i(the)f(disadvantage)g(of)h(only)f(having)h(a)h
(limited)f(range,)h(but)f(the)e(advantage)i(of)166 1702
y(never)20 b(causing)g(a)h(garbage)g(collection.)27 b
Fo(S48)p 1757 1702 V 32 w(FIXNUM)p 2119 1702 V 30 w(P)20
b Fs(is)g(a)h(macr)n(o)g(that)g(tr)o(ue)e(if)i(its)g(ar)n(gument)166
1815 y(is)i(a)g(\002xnum)g(and)f(false)h(otherwise.)184
1980 y Fk(\017)46 b Fo(int)317 b(S48)p 927 1980 V 31
w(TRUE)p 1178 1980 V 31 w(P\(s48)p 1484 1980 V 31 w(value\))184
2093 y Fk(\017)46 b Fo(int)317 b(S48)p 927 2093 V 31
w(FALSE)p 1233 2093 V 31 w(P\(s48)p 1539 2093 V 30 w(value\))166
2257 y(S48)p 336 2257 V 31 w(TRUE)p 587 2257 V 31 w(P)26
b Fs(is)g(tr)o(ue)f(if)h(its)g(ar)n(gument)f(is)h Fo(S48)p
1855 2257 V 31 w(TRUE)f Fs(and)g Fo(S48)p 2475 2257 V
32 w(FALSE)p 2782 2257 V 30 w(P)h Fs(is)f(tr)o(ue)h(if)g(its)g(ar)n
(gu-)166 2370 y(ment)c(is)h Fo(S48)p 653 2370 V 31 w(FALSE)p
Fs(.)184 2535 y Fk(\017)46 b Fo(int)317 b(S48)p 927 2535
V 31 w(FIXNUM)p 1288 2535 V 30 w(P\(s48)p 1593 2535 V
31 w(value\))184 2648 y Fk(\017)46 b Fo(long)271 b(s48)p
936 2648 V 31 w(extract)p 1352 2648 V 30 w(fixnum\(s48)p
1932 2648 V 28 w(value\))184 2761 y Fk(\017)46 b Fo(s48)p
445 2761 V 31 w(value)e(s48)p 960 2761 V 31 w(enter)p
1266 2761 V 30 w(fixnum\(long\))184 2874 y Fk(\017)i
Fo(long)271 b(S48)p 936 2874 V 31 w(MAX)p 1132 2874 V
32 w(FIXNUM)p 1494 2874 V 30 w(VALUE)184 2987 y Fk(\017)46
b Fo(long)271 b(S48)p 936 2987 V 31 w(MIN)p 1132 2987
V 32 w(FIXNUM)p 1494 2987 V 30 w(VALUE)166 3151 y Fs(An)21
b(err)n(or)h(is)f(signalled)h(if)h Fo(s48)p 1256 3151
V 31 w(extract)p 1672 3151 V 29 w(fixnum)p Fs('s)c(ar)n(gument)j(is)f
(not)g(a)i(\002xnum)e(or)h(if)g(the)f(ar)n(-)166 3264
y(gument)k(to)g Fo(s48)p 779 3264 V 31 w(enter)p 1085
3264 V 30 w(fixnum)e Fs(is)j(less)f(than)h Fo(S48)p 2104
3264 V 31 w(MIN)p 2300 3264 V 32 w(FIXNUM)p 2662 3264
V 30 w(VALUE)d Fs(or)i(gr)n(eater)g(than)166 3377 y Fo(S48)p
336 3377 V 31 w(MAX)p 532 3377 V 32 w(FIXNUM)p 894 3377
V 30 w(VALUE)20 b Fs(\()p Fk(\000)p Fh(2)1360 3344 y
Fm(29)1458 3377 y Fs(and)j Fh(2)1680 3344 y Fm(29)1775
3377 y Fk(\000)d Fh(1)j Fs(in)g(the)f(curr)n(ent)g(system\).)166
3631 y Ff(6.7.3)99 b(C)25 b(versions)h(of)f(Scheme)f(procedures)166
3808 y Fs(The)37 b(following)h(macr)n(os)g(and)g(pr)n(ocedur)n(es)e(ar)
n(e)i(C)g(versions)f(of)h(Scheme)f(pr)n(ocedur)n(es.)71
b(The)166 3920 y(names)22 b(wer)n(e)g(derived)g(by)h(r)n(eplacing)g(`)p
Fo(-)p Fs(')g(with)f(`)p 1890 3920 V 33 w(',)h(`)p Fo(?)p
Fs(')28 b(with)23 b(`)p 2360 3920 V 33 w Fo(P)p Fs(',)f(and)h(dr)n
(opping)e(`)p Fo(!)p Fs(.)184 4085 y Fk(\017)46 b Fo(int)317
b(S48)p 927 4085 V 31 w(EQ)p 1068 4085 V 32 w(P\(s48)p
1375 4085 V 31 w(value,)42 b(s48)p 1943 4085 V 32 w(VALUE\))184
4198 y Fk(\017)k Fo(int)317 b(S48)p 927 4198 V 31 w(CHAR)p
1178 4198 V 31 w(P\(s48)p 1484 4198 V 31 w(value\))184
4363 y Fk(\017)46 b Fo(int)317 b(S48)p 927 4363 V 31
w(PAIR)p 1178 4363 V 31 w(P\(s48)p 1484 4363 V 31 w(value\))184
4476 y Fk(\017)46 b Fo(s48)p 445 4476 V 31 w(value)e(S48)p
960 4476 V 31 w(CAR\(s48)p 1376 4476 V 30 w(value\))184
4589 y Fk(\017)i Fo(s48)p 445 4589 V 31 w(value)e(S48)p
960 4589 V 31 w(CDR\(s48)p 1376 4589 V 30 w(value\))184
4702 y Fk(\017)i Fo(void)271 b(S48)p 936 4702 V 31 w(SET)p
1132 4702 V 32 w(CAR\(s48)p 1549 4702 V 29 w(value,)43
b(s48)p 2116 4702 V 31 w(value\))184 4815 y Fk(\017)j
Fo(void)271 b(S48)p 936 4815 V 31 w(SET)p 1132 4815 V
32 w(CDR\(s48)p 1549 4815 V 29 w(value,)43 b(s48)p 2116
4815 V 31 w(value\))184 4927 y Fk(\017)j Fo(s48)p 445
4927 V 31 w(value)e(s48)p 960 4927 V 31 w(cons\(s48)p
1431 4927 V 29 w(value,)f(s48)p 1998 4927 V 31 w(value\))839
b Fs(\(may)23 b(GC\))184 5040 y Fk(\017)46 b Fo(long)271
b(s48)p 936 5040 V 31 w(length\(s48)p 1517 5040 V 29
w(value\))184 5205 y Fk(\017)46 b Fo(int)317 b(S48)p
927 5205 V 31 w(VECTOR)p 1288 5205 V 30 w(P\(s48)p 1593
5205 V 31 w(value\))184 5318 y Fk(\017)46 b Fo(long)271
b(S48)p 936 5318 V 31 w(VECTOR)p 1297 5318 V 30 w(LENGTH\(s48)p
1877 5318 V 29 w(value\))184 5431 y Fk(\017)46 b Fo(s48)p
445 5431 V 31 w(value)e(S48)p 960 5431 V 31 w(VECTOR)p
1321 5431 V 30 w(REF\(s48)p 1736 5431 V 30 w(value,)e(long\))184
5544 y Fk(\017)k Fo(void)271 b(S48)p 936 5544 V 31 w(VECTOR)p
1297 5544 V 30 w(SET\(s48)p 1712 5544 V 30 w(value,)43
b(long,)g(s48)p 2598 5544 V 31 w(value\))184 5657 y Fk(\017)j
Fo(s48)p 445 5657 V 31 w(value)e(s48)p 960 5657 V 31
w(make)p 1211 5657 V 31 w(vector\(long,)c(s48)p 2107
5657 V 31 w(value\))730 b Fs(\(may)23 b(GC\))184 5822
y Fk(\017)46 b Fo(int)317 b(S48)p 927 5822 V 31 w(STRING)p
1288 5822 V 30 w(P\(s48)p 1593 5822 V 31 w(value\))1831
6071 y Fs(56)p eop
%%Page: 57 63
57 62 bop 101 573 a Fk(\017)46 b Fo(long)271 b(S48)p
853 573 28 4 v 31 w(STRING)p 1214 573 V 30 w(LENGTH\(s48)p
1794 573 V 29 w(value\))101 686 y Fk(\017)46 b Fo(char)271
b(S48)p 853 686 V 31 w(STRING)p 1214 686 V 30 w(REF\(s48)p
1629 686 V 30 w(value,)43 b(long\))101 799 y Fk(\017)j
Fo(void)271 b(S48)p 853 799 V 31 w(STRING)p 1214 799
V 30 w(SET\(s48)p 1629 799 V 30 w(value,)43 b(long,)g(char\))101
912 y Fk(\017)j Fo(s48)p 362 912 V 31 w(value)e(s48)p
877 912 V 31 w(make)p 1128 912 V 31 w(string\(long,)c(char\))981
b Fs(\(may)23 b(GC\))101 1109 y Fk(\017)46 b Fo(int)317
b(S48)p 844 1109 V 31 w(SYMBOL)p 1205 1109 V 30 w(P\(s48)p
1510 1109 V 31 w(value\))101 1222 y Fk(\017)46 b Fo(s48)p
362 1222 V 31 w(value)e(s48)p 877 1222 V 31 w(SYMBOL)p
1238 1222 V 30 w(TO)p 1378 1222 V 32 w(STRING\(s48)p
1960 1222 V 28 w(value\))101 1420 y Fk(\017)i Fo(int)317
b(S48)p 844 1420 V 31 w(BYTE)p 1095 1420 V 31 w(VECTOR)p
1456 1420 V 30 w(P\(s48)p 1761 1420 V 31 w(value\))101
1533 y Fk(\017)46 b Fo(long)271 b(S48)p 853 1533 V 31
w(BYTE)p 1104 1533 V 31 w(VECTOR)p 1465 1533 V 30 w(LENGTH\(s48)p
2045 1533 V 28 w(value\))101 1646 y Fk(\017)46 b Fo(char)271
b(S48)p 853 1646 V 31 w(BYTE)p 1104 1646 V 31 w(VECTOR)p
1465 1646 V 30 w(REF\(s48)p 1880 1646 V 30 w(value,)43
b(long\))101 1759 y Fk(\017)j Fo(void)271 b(S48)p 853
1759 V 31 w(BYTE)p 1104 1759 V 31 w(VECTOR)p 1465 1759
V 30 w(SET\(s48)p 1880 1759 V 30 w(value,)43 b(long,)g(int\))101
1872 y Fk(\017)j Fo(s48)p 362 1872 V 31 w(value)e(s48)p
877 1872 V 31 w(make)p 1128 1872 V 31 w(byte)p 1379 1872
V 31 w(vector\(long,)c(int\))785 b Fs(\(may)23 b(GC\))83
2225 y Fl(6.8)119 b(Calling)30 b(Scheme)g(functions)g(from)f(C)83
2454 y Fs(External)f(code)f(that)h(has)g(been)g(called)h(fr)n(om)g
(Scheme)f(can)h(call)h(back)f(to)e(Scheme)h(pr)n(ocedur)n(es)83
2567 y(using)22 b(the)g(following)h(function.)101 2774
y Fk(\017)46 b Fo(scheme)p 527 2774 V 30 w(value)d(s48)p
1040 2774 V 32 w(call)p 1292 2774 V 31 w(scheme\(s48)p
1873 2774 V 28 w(value)g(p,)h(long)g(nargs,)f(...\))83
2981 y Fs(This)30 b(calls)i(the)d(Scheme)h(pr)n(ocedur)n(e)f
Fo(p)h Fs(on)f Fo(nargs)f Fs(ar)n(guments,)j(which)g(ar)n(e)g(passed)d
(as)j(addi-)83 3094 y(tional)21 b(ar)n(guments)e(to)g
Fo(s48)p 1053 3094 V 31 w(call)p 1304 3094 V 31 w(scheme)p
Fs(.)24 b(Ther)n(e)19 b(may)i(be)e(at)h(most)g(twelve)f(ar)n(guments.)
26 b(The)83 3207 y(value)19 b(r)n(eturned)e(by)h(the)g(Scheme)f(pr)n
(ocedur)n(e)h(is)g(r)n(eturned)f(by)h(the)g(C)h(pr)n(ocedur)n(e.)25
b(Invoking)17 b(any)83 3320 y(Scheme)22 b(pr)n(ocedur)n(e)f(may)i
(potentially)g(cause)f(a)h(garbage)g(collection.)224
3441 y(Ther)n(e)36 b(ar)n(e)h(some)f(complications)h(that)g(occur)g
(when)f(mixing)h(calls)h(fr)n(om)f(C)h(to)e(Scheme)83
3554 y(with)45 b(continuations)g(and)h(thr)n(eads.)95
b(C)46 b(only)f(supports)e(downwar)n(d)i(continuations)f(\(via)83
3667 y Fo(longjmp\(\))p Fs(\).)64 b(Scheme)36 b(continuations)f(that)h
(captur)n(e)g(a)h(portion)e(of)h(the)f(C)i(stack)e(have)i(to)83
3780 y(follow)f(the)f(same)h(r)n(estriction.)67 b(For)35
b(example,)k(suppose)33 b(Scheme)i(pr)n(ocedur)n(e)g
Fo(s0)g Fs(captur)n(es)83 3893 y(continuation)26 b Fo(a)g
Fs(and)g(then)f(calls)i(C)g(pr)n(ocedur)n(e)d Fo(c0)p
Fs(,)i(which)h(in)f(turn)g(calls)h(Scheme)e(pr)n(ocedur)n(e)83
4006 y Fo(s1)p Fs(.)32 b(Pr)n(ocedur)n(e)24 b Fo(s1)f
Fs(can)j(safely)e(call)i(the)e(continuation)g Fo(a)p
Fs(,)g(because)g(that)g(is)h(a)g(downwar)n(d)e(use.)83
4119 y(When)29 b Fo(a)h Fs(is)f(called)i(Scheme)e(48)i(will)g(r)n
(emove)e(the)g(portion)g(of)h(the)f(C)h(stack)f(used)g(by)g(the)g(call)
83 4232 y(to)e Fo(c0)p Fs(.)40 b(On)28 b(the)e(other)g(hand,)i(if)g
Fo(s1)e Fs(captur)n(es)h(a)g(continuation,)h(that)f(continuation)g
(cannot)g(be)83 4345 y(used)f(fr)n(om)h Fo(s0)p Fs(,)h(because)e(by)h
(the)g(time)g(contr)n(ol)g(r)n(eturns)f(to)h Fo(s0)f
Fs(the)g(C)i(stack)f(used)e(by)i Fo(c0)g Fs(will)83 4458
y(no)e(longer)f(be)g(valid.)36 b(An)25 b(attempt)f(to)g(invoke)g(an)i
(upwar)n(d)e(continuation)h(that)g(is)g(closed)f(over)83
4571 y(a)f(portion)f(of)g(the)g(C)h(stack)g(will)h(raise)e(an)h
(exception.)224 4692 y(In)i(Scheme)f(48)h(thr)n(eads)f(ar)n(e)h
(implemented)f(using)g(continuations,)g(so)g(the)g(downwar)n(d)g(r)n
(e-)83 4805 y(striction)31 b(applies)g(to)f(them)h(as)g(well.)54
b(An)31 b(attempt)f(to)g(r)n(eturn)h(fr)n(om)g(Scheme)g(to)f(C)i(at)f
(a)h(time)83 4918 y(when)19 b(the)f(appr)n(opriate)h(C)g(frame)h(is)g
(not)e(on)h(top)f(of)i(the)e(C)i(stack)f(will)h(cause)f(the)g(curr)n
(ent)g(thr)n(ead)83 5031 y(to)24 b(block)h(until)g(the)e(frame)i(is)g
(available.)36 b(For)24 b(example,)h(suppose)d(thr)n(ead)i
Fo(t0)f Fs(calls)j(a)f(C)g(pr)n(oce-)83 5144 y(dur)n(e)d(which)i(calls)
g(back)g(to)e(Scheme,)g(at)h(which)h(point)e(contr)n(ol)h(switches)f
(to)g(thr)n(ead)h Fo(t1)p Fs(,)f(which)83 5257 y(also)f(calls)i(C)e
(and)g(then)f(back)i(to)e(Scheme.)27 b(At)20 b(this)h(point)f(both)h
Fo(t0)f Fs(and)h Fo(t1)f Fs(have)i(active)f(calls)i(to)83
5370 y(C)i(on)g(the)f(C)h(stack,)g(with)g Fo(t1)p Fs('s)f(C)h(frame)g
(above)h Fo(t0)p Fs('s.)33 b(If)25 b(thr)n(ead)f Fo(t0)g
Fs(attempts)f(to)i(r)n(eturn)f(fr)n(om)83 5483 y(Scheme)30
b(to)g(C)h(it)f(will)i(block,)g(as)f(its)f(frame)h(is)f(not)g
(accessible.)51 b(Once)31 b Fo(t1)f Fs(has)g(r)n(eturned)f(to)h(C)83
5596 y(and)21 b(fr)n(om)g(ther)n(e)e(to)h(Scheme,)g Fo(t0)g
Fs(will)i(be)e(able)i(to)d(r)n(esume.)27 b(The)19 b(r)n(eturn)h(to)g
(Scheme)g(is)h(r)n(equir)n(ed)83 5709 y(because)27 b(context)e
(switches)h(can)i(only)e(occur)h(while)h(Scheme)e(code)g(is)h(r)o
(unning.)41 b Fo(T0)26 b Fs(will)i(also)83 5822 y(be)23
b(able)g(to)f(r)n(esume)g(if)h Fo(t1)f Fs(uses)f(a)i(continuation)g(to)
f(thr)n(ow)g(past)g(its)g(call)j(to)d(C.)1748 6071 y(57)p
eop
%%Page: 58 64
58 63 bop 166 573 a Fl(6.9)119 b(Interacting)29 b(with)g(the)g(Scheme)h
(heap)166 784 y Fs(Scheme)22 b(48)h(uses)d(a)j(copying,)e(pr)n(ecise)h
(garbage)g(collector)-7 b(.)28 b(Any)21 b(pr)n(ocedur)n(e)g(that)h
(allocates)h(ob-)166 897 y(jects)31 b(within)h(the)f(Scheme)g(48)h
(heap)g(may)g(trigger)e(a)i(garbage)g(collection.)55
b(V)-8 b(ariables)32 b(bound)166 1010 y(to)d(values)h(in)g(the)f
(Scheme)h(48)g(heap)g(need)e(to)h(be)h(r)n(egister)n(ed)e(with)h(the)g
(garbage)h(collector)g(so)166 1123 y(that)22 b(the)f(value)h(will)i(be)
d(r)n(etained)h(and)g(so)f(that)h(the)f(variables)i(will)g(be)f
(updated)e(if)j(the)e(garbage)166 1235 y(collector)i(moves)g(the)f
(object.)28 b(The)23 b(garbage)f(collector)i(has)e(no)h(facility)i(for)
e(updating)f(pointers)166 1348 y(to)34 b(the)f(interiors)h(of)g
(objects,)j(so)c(such)i(pointers,)g(for)f(example)h(the)e(ones)g(r)n
(eturned)g(by)h Fo(EX-)166 1461 y(TRACT)p 446 1461 28
4 v 30 w(STRING)p Fs(,)20 b(will)k(likely)f(become)f(invalid)j(when)c
(a)j(garbage)e(collection)h(occurs.)166 1716 y Ff(6.9.1)99
b(Registering)26 b(objects)f(with)g(the)g(GC)166 1893
y Fs(A)20 b(set)f(of)h(macr)n(os)h(ar)n(e)f(used)f(to)g(manage)h(the)g
(r)n(egistration)f(of)h(local)h(variables)h(with)e(the)f(garbage)166
2005 y(collector)-7 b(.)184 2174 y Fk(\017)46 b Fo(S48)p
445 2174 V 31 w(DECLARE)p 861 2174 V 30 w(GC)p 1001 2174
V 32 w(PROTECT\()p Fg(n)p Fo(\))184 2287 y Fk(\017)g
Fo(void)e(S48)p 709 2287 V 31 w(GC)p 850 2287 V 32 w(PROTECT)p
1267 2287 V 29 w Fg(n)p Fo(\(s48)p 1571 2287 V 31 w(value)1872
2301 y Fm(1)1909 2287 y Fo(,)h Fg(:)15 b(:)g(:)q Fo(,)45
b(s48)p 2385 2287 V 32 w(value)2687 2301 y Fd(n)2731
2287 y Fo(\))184 2400 y Fk(\017)h Fo(void)e(S48)p 709
2400 V 31 w(GC)p 850 2400 V 32 w(UNPROTECT\(\))307 2569
y(S48)p 477 2569 V 32 w(DECLARE)p 894 2569 V 29 w(GC)p
1033 2569 V 32 w(PROTECT\()p Fg(n)p Fo(\))p Fs(,)34 b(wher)n(e)h
Fh(1)50 b Fk(\024)f Fg(n)h Fk(\024)f Fh(9)p Fs(,)39 b(allocates)e
(storage)d(for)h(r)n(egis-)166 2682 y(tering)d Fg(n)h
Fs(variables.)60 b(At)32 b(most)g(one)g(use)g(of)h Fo(S48)p
1967 2682 V 32 w(DECLARE)p 2384 2682 V 29 w(GC)p 2523
2682 V 32 w(PROTECT)d Fs(may)j(occur)g(in)h(a)166 2795
y(block.)29 b Fo(S48)p 605 2795 V 32 w(GC)p 747 2795
V 32 w(PROTECT)p 1164 2795 V 29 w Fg(n)p Fo(\()p Fg(v)1342
2809 y Fm(1)1381 2795 y Fo(,)54 b Fg(:)15 b(:)g(:)q Fo(,)54
b Fg(v)1749 2809 y Fd(n)1796 2795 y Fo(\))23 b Fs(r)n(egisters)e(the)h
Fg(n)h Fs(variables)h(\(l-values\))h(with)e(the)166 2908
y(garbage)29 b(collector)-7 b(.)49 b(It)29 b(must)g(be)g(within)h
(scope)e(of)h(a)h Fo(S48)p 2274 2908 V 32 w(DECLARE)p
2691 2908 V 29 w(GC)p 2830 2908 V 32 w(PROTECT\()p Fg(n)p
Fo(\))25 b Fs(and)166 3021 y(be)k(befor)n(e)f(any)h(code)f(which)i(can)
f(cause)g(a)g(GC.)h Fo(S48)p 2092 3021 V 31 w(GC)p 2233
3021 V 32 w(UNPROTECT)25 b Fs(r)n(emoves)j(the)g(block's)166
3134 y(pr)n(otected)19 b(variables)j(fr)n(om)g(the)e(garbage)h
(collector)7 b('s)21 b(list.)27 b(It)20 b(must)h(be)g(called)h(at)f
(the)f(end)g(of)h(the)166 3247 y(block)i(after)g(any)h(code)e(which)h
(may)h(cause)f(a)h(garbage)e(collection.)30 b(Omitting)24
b(any)f(of)g(the)f(thr)n(ee)166 3360 y(may)28 b(cause)f(serious)f(and)h
(har)n(d-to-debug)f(pr)n(oblems.)42 b(Notably)-10 b(,)28
b(the)e(garbage)h(collector)h(may)166 3472 y(r)n(elocate)23
b(an)g(object)f(and)h(invalidate)h Fo(s48)p 1653 3472
V 31 w(value)d Fs(variables)j(which)f(ar)n(e)g(not)f(pr)n(otected.)307
3585 y(A)d Fo(gc-protection-mi)o(sm)o(at)o(ch)13 b Fs(exception)18
b(is)h(raised)g(if,)i(when)d(a)i(C)g(pr)n(ocedur)n(e)e(r)n(eturns)166
3698 y(to)k(Scheme,)g(the)g(calls)i(to)e Fo(S48)p 1243
3698 V 31 w(GC)p 1384 3698 V 32 w(PROTECT\(\))d Fs(have)k(not)f(been)g
(matched)g(by)h(an)g(equal)g(num-)166 3811 y(ber)f(of)h(calls)h(to)e
Fo(S48)p 893 3811 V 31 w(GC)p 1034 3811 V 32 w(UNPROTECT\(\))p
Fs(.)307 3924 y(Global)j(variables)f(may)f(also)g(be)f(r)n(egister)n
(ed)f(with)h(the)g(garbage)h(collector)-7 b(.)184 4093
y Fk(\017)46 b Fo(void)e(S48)p 709 4093 V 31 w(GC)p 850
4093 V 32 w(PROTECT)p 1267 4093 V 29 w(GLOBAL\()p Fr(value)p
Fo(\))166 4262 y(S48)p 336 4262 V 31 w(GC)p 477 4262
V 32 w(PROTECT)p 894 4262 V 30 w(GLOBAL)24 b Fs(permanently)h(r)n
(egisters)g(the)g(variable)k Fr(value)f Fs(\(an)f(l-value\))h(with)166
4375 y(the)22 b(garbage)g(collector)-7 b(.)28 b(Ther)n(e)22
b(is)h(no)f(way)h(to)f(unr)n(egister)f(the)g(variable.)166
4629 y Ff(6.9.2)99 b(Keeping)24 b(C)h(data)g(structures)g(in)g(the)f
(Scheme)h(heap)166 4806 y Fs(C)34 b(data)h(str)o(uctur)n(es)d(can)j(be)
e(kept)g(in)h(the)f(Scheme)g(heap)h(by)g(embedding)e(them)i(inside)f
(byte)166 4919 y(vectors.)27 b(The)22 b(following)h(macr)n(os)g(can)g
(be)g(used)e(to)h(cr)n(eate)h(and)f(access)h(embedded)d(C)k(objects.)
184 5088 y Fk(\017)46 b Fo(s48)p 445 5088 V 31 w(value)e(S48)p
960 5088 V 31 w(MAKE)p 1211 5088 V 31 w(VALUE\(type\))1351
b Fs(\(may)23 b(GC\))184 5201 y Fk(\017)46 b Fo(type)271
b(S48)p 936 5201 V 31 w(EXTRACT)p 1352 5201 V 30 w(VALUE\(s48)p
1877 5201 V 29 w(value,)42 b(type\))184 5314 y Fk(\017)k
Fo(type)e(*)181 b(S48)p 945 5314 V 31 w(EXTRACT)p 1361
5314 V 30 w(VALUE)p 1666 5314 V 30 w(POINTER\(s48)p 2301
5314 V 28 w(value,)43 b(type\))184 5427 y Fk(\017)j Fo(void)271
b(S48)p 936 5427 V 31 w(SET)p 1132 5427 V 32 w(VALUE\(s48)p
1659 5427 V 28 w(value,)43 b(type,)g(value\))199 5596
y(S48)p 369 5596 V 32 w(MAKE)p 621 5596 V 31 w(VALUE)30
b Fs(makes)j(a)h(byte)e(vector)g(lar)n(ge)i(enough)d(to)i(hold)g(an)g
(object)g(whose)f(type)166 5709 y(is)f Fr(type)p Fs(.)53
b Fo(S48)p 663 5709 V 32 w(EXTRACT)p 1080 5709 V 29 w(VALUE)29
b Fs(r)n(eturns)g(the)h(contents)f(of)h(a)h(byte)f(vector)g(cast)h(to)f
Fr(type)p Fs(,)k(and)166 5822 y Fo(S48)p 336 5822 V 31
w(EXTRACT)p 752 5822 V 30 w(VALUE)p 1057 5822 V 30 w(POINTER)28
b Fs(r)n(eturns)h(a)i(pointer)e(to)h(the)f(contents)g(of)h(the)g(byte)g
(vector)-7 b(.)1831 6071 y(58)p eop
%%Page: 59 65
59 64 bop 83 573 a Fs(The)35 b(value)h(r)n(eturned)e(by)i
Fo(S48)p 1221 573 28 4 v 31 w(EXTRACT)p 1637 573 V 30
w(VALUE)p 1942 573 V 30 w(POINTER)d Fs(is)j(valid)h(only)e(until)h(the)
f(next)83 686 y(garbage)22 b(collection.)224 800 y Fo(S48)p
394 800 V 32 w(SET)p 591 800 V 31 w(VALUE)e Fs(stor)n(es)h
Fo(value)g Fs(into)h(the)g(byte)g(vector)-7 b(.)83 1061
y Ff(6.9.3)99 b(C)25 b(code)g(and)f(heap)h(images)83
1240 y Fs(Scheme)47 b(48)h(uses)e(dumped)g(heap)h(images)h(to)e(r)n
(estor)n(e)g(a)i(pr)n(evious)f(system)f(state.)101 b(The)83
1353 y(Scheme)20 b(48)h(heap)f(is)g(written)f(into)h(a)h(\002le)f(in)h
(a)g(machine-independent)d(and)j(operating-system-)83
1466 y(independent)26 b(format.)45 b(The)28 b(pr)n(ocedur)n(es)f
(described)g(above)i(may)g(be)f(used)f(to)h(cr)n(eate)h(objects)83
1579 y(in)e(the)g(Scheme)f(heap)h(that)f(contain)i(information)f
(speci\002c)g(to)g(the)f(curr)n(ent)g(machine,)j(operat-)83
1692 y(ing)23 b(system,)e(or)i(pr)n(ocess.)k(A)c(heap)g(image)g
(containing)h(such)e(objects)h(may)g(not)f(work)g(corr)n(ectly)83
1805 y(when)g(r)n(esumed.)224 1919 y(T)-8 b(o)28 b(addr)n(ess)f(this)i
(pr)n(oblem,)h(a)f(r)n(ecor)n(d)f(type)f(may)j(be)e(given)h(a)g(`r)n
(esumer)7 b(')28 b(pr)n(ocedur)n(e.)45 b(On)83 2032 y(startup,)23
b(the)g(r)n(esumer)h(pr)n(ocedur)n(e)f(for)h(a)g(type)f(is)h(applied)g
(to)g(each)h(r)n(ecor)n(d)e(of)i(that)f(type)e(in)j(the)83
2144 y(image)d(being)g(r)n(estarted.)k(This)c(pr)n(ocedur)n(e)e(can)j
(update)e(the)g(r)n(ecor)n(d)h(in)g(a)h(manner)f(appr)n(opriate)83
2257 y(to)g(the)g(machine,)h(operating)f(system,)e(or)i(pr)n(ocess)g
(used)f(to)h(r)n(esume)g(the)f(image.)101 2433 y Fk(\017)46
b Fo(\(define-record-)o(re)o(su)o(mer)39 b Fr(r)n(ecord-type)49
b(pr)n(ocedur)n(e)p Fo(\))83 2608 y(Define-record-r)o(es)o(um)o(er)17
b Fs(de\002nes)k Fr(pr)n(ocedur)n(e)p Fs(,)26 b(which)e(should)e
(accept)h(one)f(ar)n(gument,)h(to)83 2721 y(be)30 b(the)f(r)n(esumer)g
(for)h Fr(r)n(ecord-type)t Fs(.)50 b(The)29 b(or)n(der)g(in)i(which)f
(r)n(esumer)f(pr)n(ocedur)n(es)g(ar)n(e)h(called)h(is)83
2834 y(not)22 b(speci\002ed.)224 2948 y(The)j Fr(pr)n(ocedur)n(e)j
Fs(ar)n(gument)d(to)g Fo(define-record-r)o(es)o(um)o(er)19
b Fs(may)26 b(be)f Fo(#f)p Fs(,)g(in)h(which)g(case)83
3061 y(r)n(ecor)n(ds)j(of)h(the)f(given)g(type)g(ar)n(e)h(not)f
(written)g(out)g(in)h(heap)f(images.)49 b(When)30 b(writing)f(a)h(heap)
83 3174 y(image)22 b(any)f(r)n(efer)n(ence)g(to)f(such)h(a)h(r)n(ecor)n
(d)f(is)h(r)n(eplaced)f(by)g(the)g(value)h(of)f(the)f(r)n(ecor)n(d's)h
(\002rst)g(\002eld,)83 3286 y(and)i(an)g(exception)e(is)i(raised)f
(after)h(the)e(image)i(is)g(written.)83 3592 y Fl(6.10)119
b(Using)30 b(Scheme)g(records)f(in)h(C)g(code)83 3805
y Fs(External)22 b(modules)g(can)h(cr)n(eate)g(r)n(ecor)n(ds)f(and)g
(access)h(their)f(slots)f(positionally)-10 b(.)101 3980
y Fk(\017)46 b Fo(s48)p 362 3980 V 31 w(value)e(S48)p
877 3980 V 31 w(MAKE)p 1128 3980 V 31 w(RECORD\(s48)p
1709 3980 V 28 w(value\))1048 b Fs(\(may)23 b(GC\))101
4093 y Fk(\017)46 b Fo(int)317 b(S48)p 844 4093 V 31
w(RECORD)p 1205 4093 V 30 w(P\(s48)p 1510 4093 V 31 w(value\))101
4206 y Fk(\017)46 b Fo(s48)p 362 4206 V 31 w(value)e(S48)p
877 4206 V 31 w(RECORD)p 1238 4206 V 30 w(TYPE\(s48)p
1708 4206 V 29 w(value\))101 4319 y Fk(\017)i Fo(s48)p
362 4319 V 31 w(value)e(S48)p 877 4319 V 31 w(RECORD)p
1238 4319 V 30 w(REF\(s48)p 1653 4319 V 30 w(value,)e(long\))101
4432 y Fk(\017)k Fo(void)271 b(S48)p 853 4432 V 31 w(RECORD)p
1214 4432 V 30 w(SET\(s48)p 1629 4432 V 30 w(value,)43
b(long,)g(s48)p 2515 4432 V 31 w(value\))83 4607 y Fs(The)35
b(ar)n(gument)g(to)g Fo(S48)p 983 4607 V 31 w(MAKE)p
1234 4607 V 31 w(RECORD)e Fs(should)h(be)i(a)g(shar)n(ed)f(binding)h
(whose)e(value)i(is)g(a)83 4720 y(r)n(ecor)n(d)d(type.)58
b(In)33 b(C)h(the)f(\002elds)f(of)i(Scheme)f(r)n(ecor)n(ds)f(ar)n(e)i
(only)f(accessible)h(via)h(of)n(fsets,)f(with)83 4833
y(the)c(\002rst)f(\002eld)h(having)i(of)n(fset)d(zer)n(o,)k(the)c
(second)g(of)n(fset)h(one,)i(and)e(so)g(forth.)51 b(If)30
b(the)g(or)n(der)f(of)83 4946 y(the)e(\002elds)g(is)g(changed)g(in)i
(the)d(Scheme)i(de\002nition)e(of)i(the)f(r)n(ecor)n(d)g(type)f(the)h
(C)h(code)f(must)g(be)83 5059 y(updated)21 b(as)i(well.)224
5173 y(For)f(example,)g(given)h(the)f(following)h(r)n(ecor)n(d-type)d
(de\002nition)248 5366 y Fo(\(define-record-t)o(yp)o(e)48
b(thing)53 b(:thing)357 5480 y(\(make-thing)d(a)k(b\))357
5594 y(thing?)357 5708 y(\(a)g(thing-a\))357 5822 y(\(b)g(thing-b\)\))
1748 6071 y Fs(59)p eop
%%Page: 60 66
60 65 bop 166 573 a Fs(the)22 b(identi\002er)g Fo(:thing)e
Fs(is)i(bound)g(to)g(the)g(r)n(ecor)n(d)g(type)f(and)i(can)h(be)e
(exported)e(to)i(C:)331 748 y Fo(\(define-exported)o(-b)o(in)o(di)o(ng)
48 b("thing-record-t)o(yp)o(e")g(:thing\))166 922 y(Thing)20
b Fs(r)n(ecor)n(ds)i(can)i(then)e(be)g(made)h(in)g(C:)331
1097 y Fo(static)52 b(scheme_value)440 1210 y(thing_record_typ)o(e_)o
(bi)o(nd)o(ing)c(=)54 b(SCHFALSE;)331 1436 y(void)f(initialize_thin)o
(gs)o(\(v)o(oid)o(\))331 1549 y Fk(f)440 1662 y Fo(S48_GC_PROTECT_G)o
(LO)o(BA)o(L\()o(thi)o(ng)o(_r)o(ec)o(or)o(d_t)o(yp)o(e_)o(bi)o(nd)o
(ing)o(\);)440 1775 y(thing_record_typ)o(e_)o(bi)o(nd)o(ing)48
b(=)604 1888 y(s48_get_importe)o(d_)o(bi)o(ndi)o(ng)o(\(")o(th)o(in)o
(g-r)o(ec)o(or)o(d-)o(ty)o(pe")o(\);)331 2001 y Fk(g)331
2226 y Fo(scheme_value)h(make_thing\(schem)o(e_)o(va)o(lu)o(e)g(a,)k
(scheme_value)c(b\))331 2339 y Fk(f)440 2452 y Fo(s48_value)i(thing;)
440 2565 y(s48_DECLARE_GC_P)o(RO)o(TE)o(CT)o(\(2\))o(;)440
2791 y(S48_GC_PROTECT_2)o(\(a)o(,)d(b\);)440 3017 y(thing)53
b(=)h(s48_make_recor)o(d\(t)o(hi)o(ng)o(_r)o(ec)o(ord)o(_t)o(yp)o(e_)o
(bi)o(ndi)o(ng)o(\);)440 3130 y(S48_RECORD_SET\(t)o(hi)o(ng)o(,)48
b(0,)54 b(a\);)440 3243 y(S48_RECORD_SET\(t)o(hi)o(ng)o(,)48
b(1,)54 b(b\);)440 3468 y(S48_GC_UNPROTECT)o(\(\))o(;)440
3694 y(return)e(thing;)331 3807 y Fk(g)166 3982 y Fs(Note)22
b(that)h(the)g(variables)i Fo(a)e Fs(and)h Fo(b)f Fs(must)g(be)g(pr)n
(otected)e(against)j(the)f(possibility)g(of)g(a)h(garbage)166
4095 y(collection)f(occuring)g(during)f(the)g(call)i(to)e
Fo(s48)p 1829 4095 28 4 v 31 w(make)p 2080 4095 V 31
w(record\(\))p Fs(.)166 4391 y Fl(6.1)l(1)118 b(Raising)31
b(exceptions)e(from)h(external)e(code)166 4602 y Fs(The)57
b(following)g(macr)n(os)i(explicitly)f(raise)f(certain)h(err)n(ors,)65
b(immediately)57 b(r)n(eturning)g(to)166 4715 y(Scheme)25
b(48.)38 b(Raising)26 b(an)g(exception)e(performs)g(all)k(necessary)c
(clean-up)i(actions)f(to)g(pr)n(operly)166 4828 y(r)n(eturn)d(to)g
(Scheme)g(48,)h(including)g(adjusting)f(the)g(stack)g(of)h(pr)n
(otected)e(variables.)184 4986 y Fk(\017)46 b Fo(s48)p
445 4986 V 31 w(raise)p 751 4986 V 31 w(scheme)p 1112
4986 V 30 w(exception\(int)39 b(type,)44 b(int)g(nargs,)e(...\))166
5144 y(s48)p 336 5144 V 31 w(raise)p 642 5144 V 31 w(scheme)p
1003 5144 V 30 w(exception)23 b Fs(is)j(the)g(base)h(pr)n(ocedur)n(e)f
(for)g(raising)h(exceptions.)39 b Fo(type)166 5257 y
Fs(is)29 b(the)f(type)f(of)h(exception,)h(and)g(should)e(be)i(one)f(of)
g(the)g Fo(S48)p 2391 5257 V 32 w(EXCEPTION)p 2918 5257
V 28 w Fs(.)14 b(.)g(.)g(constants)26 b(de-)166 5370
y(\002ned)40 b(in)h Fo(scheme48arch.h)o Fs(.)76 b Fo(nargs)39
b Fs(is)h(the)g(number)g(of)h(additional)g(values)g(to)f(be)g(in-)166
5483 y(cluded)28 b(in)g(the)f(exception;)j(these)c(follow)j(the)e
Fo(nargs)f Fs(ar)n(gument)h(and)i(should)e(all)i(have)g(type)166
5596 y Fo(s48)p 336 5596 V 31 w(value)p Fs(.)d Fo(s48)p
856 5596 V 31 w(raise)p 1162 5596 V 31 w(scheme)p 1523
5596 V 30 w(exception)18 b Fs(never)k(r)n(eturns.)307
5709 y(The)27 b(following)g(pr)n(ocedur)n(es)e(ar)n(e)j(available)i
(for)d(raising)h(particular)g(types)d(of)i(exceptions.)166
5822 y(Like)22 b Fo(s48)p 535 5822 V 31 w(raise)p 841
5822 V 31 w(scheme)p 1202 5822 V 30 w(exception)c Fs(these)j(never)h(r)
n(eturn.)1831 6071 y(60)p eop
%%Page: 61 67
61 66 bop 101 573 a Fk(\017)46 b Fo(s48)p 362 573 28
4 v 31 w(raise)p 668 573 V 31 w(argument)p 1139 573 V
29 w(type)p 1388 573 V 31 w(error\(scheme)p 2079 573
V 27 w(value\))101 686 y Fk(\017)g Fo(s48)p 362 686 V
31 w(raise)p 668 686 V 31 w(argument)p 1139 686 V 29
w(number)p 1498 686 V 30 w(error\(int)41 b(nargs,)i(int)h(min,)g(int)g
(max\))101 799 y Fk(\017)i Fo(s48)p 362 799 V 31 w(raise)p
668 799 V 31 w(range)p 974 799 V 30 w(error\(long)41
b(value,)i(long)h(min,)f(long)h(max\))101 912 y Fk(\017)i
Fo(s48)p 362 912 V 31 w(raise)p 668 912 V 31 w(closed)p
1029 912 V 30 w(channel)p 1444 912 V 29 w(error\(\))101
1024 y Fk(\017)g Fo(s48)p 362 1024 V 31 w(raise)p 668
1024 V 31 w(os)p 809 1024 V 32 w(error\(int)41 b(errno\))101
1137 y Fk(\017)46 b Fo(s48)p 362 1137 V 31 w(raise)p
668 1137 V 31 w(out)p 864 1137 V 31 w(of)p 1005 1137
V 32 w(memory)p 1367 1137 V 30 w(error\(\))83 1299 y
Fs(An)23 b(ar)n(gument)h(type)e(err)n(or)h(indicates)g(that)h(the)f
(given)g(value)i(is)e(of)h(the)f(wr)n(ong)g(type.)29
b(An)24 b(ar)n(gu-)83 1411 y(ment)j(number)g(err)n(or)g(is)g(raised)g
(when)g(the)f(number)h(of)g(ar)n(guments,)h Fo(nargs)p
Fs(,)e(should)g(be,)i(but)83 1524 y(isn't,)22 b(between)e
Fo(min)h Fs(and)g Fo(max)p Fs(,)g(inclusive.)28 b(Similarly)-10
b(,)24 b(a)e(range)g(err)n(or)f(indicates)h(that)f Fo(value)f
Fs(is)83 1637 y(not)i(between)f(between)g Fo(min)g Fs(and)i
Fo(max)p Fs(,)e(inclusive.)224 1750 y(The)k(following)g(macr)n(os)h
(raise)f(ar)n(gument)g(type)e(err)n(ors)h(if)i(their)f(ar)n(gument)g
(does)e(not)i(have)83 1863 y(the)h(r)n(equir)n(ed)g(type.)40
b Fo(S48)p 1019 1863 V 31 w(CHECK)p 1325 1863 V 30 w(BOOLEAN)24
b Fs(raises)j(an)g(err)n(or)f(if)i(its)f(ar)n(gument)f(is)h(neither)f
Fo(#t)83 1976 y Fs(or)c Fo(#f)p Fs(.)101 2137 y Fk(\017)46
b Fo(void)e(S48)p 626 2137 V 31 w(CHECK)p 932 2137 V
31 w(BOOLEAN\(s48)p 1568 2137 V 27 w(value\))101 2250
y Fk(\017)i Fo(void)e(S48)p 626 2250 V 31 w(CHECK)p 932
2250 V 31 w(SYMBOL\(s48)p 1513 2250 V 28 w(value\))101
2363 y Fk(\017)i Fo(void)e(S48)p 626 2363 V 31 w(CHECK)p
932 2363 V 31 w(PAIR\(s48)p 1403 2363 V 29 w(value\))101
2476 y Fk(\017)i Fo(void)e(S48)p 626 2476 V 31 w(CHECK)p
932 2476 V 31 w(STRING\(s48)p 1513 2476 V 28 w(value\))101
2589 y Fk(\017)i Fo(void)e(S48)p 626 2589 V 31 w(CHECK)p
932 2589 V 31 w(INTEGER\(s48)p 1568 2589 V 27 w(value\))101
2702 y Fk(\017)i Fo(void)e(S48)p 626 2702 V 31 w(CHECK)p
932 2702 V 31 w(CHANNEL\(s48)p 1568 2702 V 27 w(value\))101
2815 y Fk(\017)i Fo(void)e(S48)p 626 2815 V 31 w(CHECK)p
932 2815 V 31 w(BYTE)p 1183 2815 V 30 w(VECTOR\(s48)p
1763 2815 V 29 w(value\))101 2928 y Fk(\017)i Fo(void)e(S48)p
626 2928 V 31 w(CHECK)p 932 2928 V 31 w(RECORD\(s48)p
1513 2928 V 28 w(value\))101 3040 y Fk(\017)i Fo(void)e(S48)p
626 3040 V 31 w(CHECK)p 932 3040 V 31 w(SHARED)p 1293
3040 V 30 w(BINDING\(s48)p 1928 3040 V 27 w(value\))83
3337 y Fl(6.12)119 b(Unsafe)29 b(functions)h(and)f(macros)83
3548 y Fs(All)24 b(of)g(the)f(C)h(pr)n(ocedur)n(es)d(and)j(macr)n(os)g
(described)f(above)g(check)h(that)f(their)g(ar)n(guments)g(have)83
3661 y(the)30 b(appr)n(opriate)f(types)g(and)h(that)g(indexes)f(ar)n(e)
i(in)g(range.)50 b(The)30 b(following)g(pr)n(ocedur)n(es)f(and)83
3774 y(macr)n(os)g(ar)n(e)g(identical)h(to)e(those)f(described)h
(above,)i(except)e(that)g(they)g(do)g(not)g(perform)g(type)83
3887 y(and)f(range)f(checks.)39 b(They)25 b(ar)n(e)i(pr)n(ovided)f(for)
h(the)e(purpose)g(of)h(writing)h(mor)n(e)f(ef)n(\002cient)h(code;)83
4000 y(their)22 b(general)g(use)g(is)h(not)f(r)n(ecommended.)101
4161 y Fk(\017)46 b Fo(char)271 b(S48)p 853 4161 V 31
w(UNSAFE)p 1214 4161 V 30 w(EXTRACT)p 1629 4161 V 30
w(CHAR\(s48)p 2099 4161 V 29 w(value\))101 4274 y Fk(\017)46
b Fo(char)e(*)181 b(S48)p 862 4274 V 31 w(UNSAFE)p 1223
4274 V 30 w(EXTRACT)p 1638 4274 V 30 w(STRING\(s48)p
2218 4274 V 28 w(value\))101 4387 y Fk(\017)46 b Fo(long)271
b(S48)p 853 4387 V 31 w(UNSAFE)p 1214 4387 V 30 w(EXTRACT)p
1629 4387 V 30 w(INTEGER\(s48)p 2264 4387 V 28 w(value\))101
4500 y Fk(\017)46 b Fo(long)271 b(S48)p 853 4500 V 31
w(UNSAFE)p 1214 4500 V 30 w(EXTRACT)p 1629 4500 V 30
w(DOUBLE\(s48)p 2209 4500 V 28 w(value\))101 4661 y Fk(\017)46
b Fo(long)271 b(S48)p 853 4661 V 31 w(UNSAFE)p 1214 4661
V 30 w(EXTRACT)p 1629 4661 V 30 w(FIXNUM\(s48)p 2209
4661 V 28 w(value\))101 4774 y Fk(\017)46 b Fo(s48)p
362 4774 V 31 w(value)e(S48)p 877 4774 V 31 w(UNSAFE)p
1238 4774 V 30 w(ENTER)p 1543 4774 V 30 w(FIXNUM\(long\))101
4935 y Fk(\017)i Fo(s48)p 362 4935 V 31 w(value)e(S48)p
877 4935 V 31 w(UNSAFE)p 1238 4935 V 30 w(CAR\(s48)p
1653 4935 V 30 w(value\))101 5048 y Fk(\017)i Fo(s48)p
362 5048 V 31 w(value)e(S48)p 877 5048 V 31 w(UNSAFE)p
1238 5048 V 30 w(CDR\(s48)p 1653 5048 V 30 w(value\))101
5161 y Fk(\017)i Fo(void)271 b(S48)p 853 5161 V 31 w(UNSAFE)p
1214 5161 V 30 w(SET)p 1409 5161 V 32 w(CAR\(s48)p 1826
5161 V 29 w(value,)43 b(s48)p 2393 5161 V 31 w(value\))101
5273 y Fk(\017)j Fo(void)271 b(S48)p 853 5273 V 31 w(UNSAFE)p
1214 5273 V 30 w(SET)p 1409 5273 V 32 w(CDR\(s48)p 1826
5273 V 29 w(value,)43 b(s48)p 2393 5273 V 31 w(value\))101
5435 y Fk(\017)j Fo(long)271 b(S48)p 853 5435 V 31 w(UNSAFE)p
1214 5435 V 30 w(VECTOR)p 1574 5435 V 30 w(LENGTH\(s48)p
2154 5435 V 29 w(value\))101 5547 y Fk(\017)46 b Fo(s48)p
362 5547 V 31 w(value)e(S48)p 877 5547 V 31 w(UNSAFE)p
1238 5547 V 30 w(VECTOR)p 1598 5547 V 30 w(REF\(s48)p
2013 5547 V 30 w(value,)e(long\))101 5660 y Fk(\017)k
Fo(void)271 b(S48)p 853 5660 V 31 w(UNSAFE)p 1214 5660
V 30 w(VECTOR)p 1574 5660 V 30 w(SET\(s48)p 1989 5660
V 30 w(value,)43 b(long,)g(s48)p 2875 5660 V 31 w(value\))101
5822 y Fk(\017)j Fo(long)271 b(S48)p 853 5822 V 31 w(UNSAFE)p
1214 5822 V 30 w(STRING)p 1574 5822 V 30 w(LENGTH\(s48)p
2154 5822 V 29 w(value\))1748 6071 y Fs(61)p eop
%%Page: 62 68
62 67 bop 184 573 a Fk(\017)46 b Fo(char)271 b(S48)p
936 573 28 4 v 31 w(UNSAFE)p 1297 573 V 30 w(STRING)p
1657 573 V 30 w(REF\(s48)p 2072 573 V 30 w(value,)43
b(long\))184 686 y Fk(\017)j Fo(void)271 b(S48)p 936
686 V 31 w(UNSAFE)p 1297 686 V 30 w(STRING)p 1657 686
V 30 w(SET\(s48)p 2072 686 V 30 w(value,)43 b(long,)g(char\))184
857 y Fk(\017)j Fo(s48)p 445 857 V 31 w(value)e(S48)p
960 857 V 31 w(UNSAFE)p 1321 857 V 30 w(SYMBOL)p 1681
857 V 30 w(TO)p 1821 857 V 32 w(STRING\(s48)p 2403 857
V 28 w(value\))184 1028 y Fk(\017)i Fo(long)271 b(S48)p
936 1028 V 31 w(UNSAFE)p 1297 1028 V 30 w(BYTE)p 1547
1028 V 31 w(VECTOR)p 1908 1028 V 30 w(LENGTH\(s48)p 2488
1028 V 28 w(value\))184 1141 y Fk(\017)46 b Fo(char)271
b(S48)p 936 1141 V 31 w(UNSAFE)p 1297 1141 V 30 w(BYTE)p
1547 1141 V 31 w(VECTOR)p 1908 1141 V 30 w(REF\(s48)p
2323 1141 V 30 w(value,)43 b(long\))184 1254 y Fk(\017)j
Fo(void)271 b(S48)p 936 1254 V 31 w(UNSAFE)p 1297 1254
V 30 w(BYTE)p 1547 1254 V 31 w(VECTOR)p 1908 1254 V 30
w(SET\(s48)p 2323 1254 V 30 w(value,)43 b(long,)g(int\))184
1425 y Fk(\017)j Fo(s48)p 445 1425 V 31 w(value)e(S48)p
960 1425 V 31 w(UNSAFE)p 1321 1425 V 30 w(SHARED)p 1681
1425 V 30 w(BINDING)p 2096 1425 V 30 w(REF\(s48)p 2511
1425 V 29 w(value)f(s)p 2913 1425 V 33 w(b\))184 1538
y Fk(\017)j Fo(int)317 b(S48)p 927 1538 V 31 w(UNSAFE)p
1288 1538 V 30 w(SHARED)p 1648 1538 V 30 w(BINDING)p
2063 1538 V 30 w(P\(x\))184 1650 y Fk(\017)46 b Fo(int)317
b(S48)p 927 1650 V 31 w(UNSAFE)p 1288 1650 V 30 w(SHARED)p
1648 1650 V 30 w(BINDING)p 2063 1650 V 30 w(IS)p 2203
1650 V 32 w(IMPORT)p 2565 1650 V 30 w(P\(s48)p 2870 1650
V 30 w(value)43 b(s)p 3273 1650 V 33 w(b\))184 1763 y
Fk(\017)j Fo(s48)p 445 1763 V 31 w(value)e(S48)p 960
1763 V 31 w(UNSAFE)p 1321 1763 V 30 w(SHARED)p 1681 1763
V 30 w(BINDING)p 2096 1763 V 30 w(NAME\(s48)p 2566 1763
V 29 w(value)f(s)p 2968 1763 V 32 w(b\))184 1876 y Fk(\017)j
Fo(void)271 b(S48)p 936 1876 V 31 w(UNSAFE)p 1297 1876
V 30 w(SHARED)p 1657 1876 V 30 w(BINDING)p 2072 1876
V 30 w(SET\(s48)p 2487 1876 V 29 w(value)44 b(s)p 2890
1876 V 32 w(b,)g(s48)p 3241 1876 V 32 w(value)f(value\))184
2047 y Fk(\017)j Fo(s48)p 445 2047 V 31 w(value)e(S48)p
960 2047 V 31 w(UNSAFE)p 1321 2047 V 30 w(RECORD)p 1681
2047 V 30 w(TYPE\(s48)p 2151 2047 V 29 w(value\))184
2160 y Fk(\017)i Fo(s48)p 445 2160 V 31 w(value)e(S48)p
960 2160 V 31 w(UNSAFE)p 1321 2160 V 30 w(RECORD)p 1681
2160 V 30 w(REF\(s48)p 2096 2160 V 30 w(value,)e(long\))184
2273 y Fk(\017)k Fo(void)271 b(S48)p 936 2273 V 31 w(UNSAFE)p
1297 2273 V 30 w(RECORD)p 1657 2273 V 30 w(SET\(s48)p
2072 2273 V 30 w(value,)43 b(long,)g(s48)p 2958 2273
V 31 w(value\))184 2444 y Fk(\017)j Fo(type)271 b(S48)p
936 2444 V 31 w(UNSAFE)p 1297 2444 V 30 w(EXTRACT)p 1712
2444 V 30 w(VALUE\(s48)p 2237 2444 V 29 w(value,)42 b(type\))184
2557 y Fk(\017)k Fo(type)e(*)181 b(S48)p 945 2557 V 31
w(UNSAFE)p 1306 2557 V 30 w(EXTRACT)p 1721 2557 V 30
w(VALUE)p 2026 2557 V 30 w(POINTER\(s48)p 2661 2557 V
28 w(value,)43 b(type\))184 2670 y Fk(\017)j Fo(void)271
b(S48)p 936 2670 V 31 w(UNSAFE)p 1297 2670 V 30 w(SET)p
1492 2670 V 32 w(VALUE\(s48)p 2019 2670 V 28 w(value,)43
b(type,)g(value\))1831 6071 y Fs(62)p eop
%%Page: 63 69
63 68 bop 83 1200 a Fn(Chapter)44 b(7)83 1620 y Fq(Access)50
b(to)i(POSIX)83 2069 y Fs(This)20 b(chapter)g(describes)f(Scheme)h
(48's)h(interface)g(to)f(the)f(POSIX)h(C)h(calls)h([1)q(].)27
b(Scheme)20 b(versions)83 2182 y(of)e(most)f(of)h(the)f(functions)g(in)
h(POSIX)f(ar)n(e)i(pr)n(ovided.)25 b(Both)16 b(the)h(interface)h(and)g
(implementation)83 2295 y(ar)n(e)30 b(new)e(and)h(ar)n(e)h(likely)f(to)
g(change)g(in)h(futur)n(e)e(r)n(eleases.)47 b(Section)29
b(7.10)h(lists)f(which)h(Scheme)83 2408 y(functions)22
b(call)j(which)e(C)g(functions.)224 2525 y(Scheme)34
b(48's)i(POSIX)e(interface)i(will)g(likely)f(change)f(signi\002cantly)i
(in)f(the)f(futur)n(e.)64 b(The)83 2638 y(implementation)23
b(is)f(new)g(and)h(may)g(have)g(signi\002cant)g(bugs.)224
2756 y(The)f(POSIX)g(bindings)h(ar)n(e)g(available)i(in)e(several)g
(str)o(uctur)n(es:)680 2995 y Fo(posix-processes)257
b Fs(fork,)22 b(exec,)f(and)i(friends)680 3108 y Fo(posix-process-d)o
(ata)93 b Fs(information)23 b(about)g(pr)n(ocesses)680
3221 y Fo(posix-files)477 b Fs(\002les)22 b(and)h(dir)n(ectories)680
3334 y Fo(posix-i/o)587 b Fs(operations)21 b(on)h(ports)680
3447 y Fo(posix-time)532 b Fs(time)22 b(functions)680
3560 y Fo(posix-users)477 b Fs(users)21 b(and)h(gr)n(oups)680
3673 y Fo(posix-regexps)367 b Fs(r)n(egular)22 b(expr)n(ession)f
(matching)680 3786 y Fo(posix)807 b Fs(all)24 b(of)e(the)g(above)224
4016 y(Scheme)e(48's)i(POSIX)e(interface)h(dif)n(fers)g(fr)n(om)h
(Scsh's)e([10)q(,)h(1)-5 b(1)q(])21 b(in)g(several)g(ways.)27
b(The)20 b(inter)n(-)83 4129 y(face)25 b(her)n(e)f(lacks)h(Scsh's)e
(high-level)i(constr)o(ucts)e(and)i(utilities,)f(such)g(as)h(the)e(pr)n
(ocess)g(notation,)83 4242 y Fo(awk)k Fs(pr)n(ocedur)n(e,)i(and)f
(parsing)g(utilities.)45 b(Scheme)28 b(48)i(uses)c(distinct)j(types)d
(for)i(some)g(values)83 4355 y(that)e(Scsh)g(leaves)g(as)g(symbols)g
(or)g(unboxed)f(integers;)g(these)g(include)h(\002le)h(types,)d(\002le)
j(modes,)83 4468 y(and)f(user)f(and)h(gr)n(oup)g(ids.)38
b(Many)26 b(of)g(the)g(names)g(and)g(other)f(interface)h(details)g(ar)n
(e)g(dif)n(fer)n(ent,)83 4581 y(as)d(well.)83 4907 y
Fl(7.1)119 b(Process)30 b(primitives)83 5127 y Fs(The)21
b(pr)n(ocedur)n(es)f(described)h(in)h(this)f(section)g(contr)n(ol)h
(the)f(cr)n(eation)h(of)g(pr)n(ocesses)d(and)j(the)f(exe-)83
5240 y(cution)i(of)f(pr)n(ograms.)27 b(They)22 b(ar)n(e)h(in)g(the)f
(str)o(uctur)n(es)f Fo(posix-process)c Fs(and)22 b Fo(posix)p
Fs(.)83 5523 y Ff(7.1.1)99 b(Process)25 b(creation)g(and)g(termination)
101 5709 y Fk(\017)46 b Fo(\(fork\))d Fk(!)i Fr(pr)n(ocess-id)k(or)d
Fo(#f)101 5822 y Fk(\017)g Fo(\(fork-and-forge)o(t)39
b Fr(thunk)p Fo(\))1748 6071 y Fs(63)p eop
%%Page: 64 70
64 69 bop 166 573 a Fo(Fork)23 b Fs(cr)n(eates)g(a)i(new)f(child)h(pr)n
(ocess)e(and)h(r)n(eturns)f(the)g(child's)i(pr)n(ocess-id)e(in)i(the)e
(par)n(ent)h(and)166 686 y Fo(#f)g Fs(in)i(the)e(child.)35
b Fo(Fork-and-forget)18 b Fs(calls)27 b Fr(thunk)e Fs(in)g(a)h(new)e
(pr)n(ocess;)h(no)f(pr)n(ocess-id)g(is)h(r)n(e-)166 799
y(turned.)30 b Fo(Fork-and-forget)17 b Fs(uses)23 b(an)h(intermediate)f
(pr)n(ocess)g(to)g(avoid)i(cr)n(eating)f(a)g(zombie)166
912 y(pr)n(ocess.)184 1052 y Fk(\017)46 b Fo(\(process-id?)g
Fr(x)p Fo(\))f Fk(!)g Fr(boolean)184 1165 y Fk(\017)h
Fo(\(process-id=?)f Fr(pr)n(ocess-id0)50 b(pr)n(ocess-id1)p
Fo(\))f Fk(!)c Fr(boolean)184 1278 y Fk(\017)h Fo(\(process-id->in)o
(te)o(ge)o(r)39 b Fr(pr)n(ocess-id)p Fo(\))49 b Fk(!)c
Fr(integer)184 1391 y Fk(\017)h Fo(\(integer->proce)o(ss)o(-i)o(d)39
b Fr(integer)p Fo(\))47 b Fk(!)e Fr(pr)n(ocess-id)166
1532 y Fo(Process-id?)29 b Fs(is)24 b(a)h(pr)n(edicate)f(for)h(pr)n
(ocess-ids,)e Fo(process-id=?)28 b Fs(compar)n(es)d(two)e(to)h(see)f
(if)166 1644 y(they)h(ar)n(e)h(the)f(same,)h(and)g Fo(process-id-uid)19
b Fs(r)n(eturns)24 b(the)g(actual)i(Unix)f(id.)35 b Fo(Process-id-)166
1757 y(>integer)19 b Fs(and)k Fo(integer->proce)o(ss)o(-id)16
b Fs(convert)22 b(pr)n(ocess)f(ids)h(to)g(and)h(fr)n(om)g(integers.)184
1898 y Fk(\017)46 b Fo(\(process-id-exi)o(t-)o(st)o(atu)o(s)39
b Fr(pr)n(ocess-id)p Fo(\))49 b Fk(!)c Fr(integer)i(or)f
Fo(#f)184 2011 y Fk(\017)g Fo(\(process-id-ter)o(mi)o(na)o(tin)o(g-)o
(si)o(gn)o(al)39 b Fr(pr)n(ocess-id)p Fo(\))49 b Fk(!)c
Fr(signal)i(or)f Fo(#f)184 2124 y Fk(\017)g Fo(\(wait-for-child)o(-p)o
(ro)o(ces)o(s)39 b Fr(pr)n(ocess-id)p Fo(\))166 2264
y Fs(If)23 b(a)g(pr)n(ocess)f(terminates)g(normally)h
Fo(process-id-exit)o(-s)o(ta)o(tus)16 b Fs(will)24 b(r)n(eturn)e(its)h
(exit)f(sta-)166 2377 y(tus.)40 b(If)28 b(the)e(pr)n(ocess)g(is)h
(still)h(r)o(unning)f(or)f(was)h(terminated)g(by)g(a)g(signal)h(then)e
Fo(process-id-)166 2490 y(exit-status)18 b Fs(will)25
b(r)n(eturn)d Fo(#f)p Fs(.)29 b(Similarly)-10 b(,)25
b(if)f(a)g(child)g(pr)n(ocess)e(was)h(terminated)g(by)g(a)h(signal)166
2603 y Fo(process-id-term)o(in)o(at)o(in)o(g-s)o(ig)o(na)o(l)12
b Fs(will)19 b(r)n(eturn)f(that)f(signal)i(and)f(will)h(r)n(eturn)f
Fo(#f)f Fs(if)i(the)166 2716 y(pr)n(ocess)24 b(is)i(still)g(r)o(unning)
g(or)f(terminated)g(normally)-10 b(.)37 b Fo(Wait-for-child-p)o(ro)o
(ce)o(ss)19 b Fs(blocks)166 2829 y(until)h(the)f(child)i(pr)n(ocess)d
(terminates.)26 b(Scheme)20 b(48)g(may)h(r)n(eap)e(child)i(pr)n
(ocesses)d(befor)n(e)h(the)g(user)166 2942 y(r)n(equests)i(their)h
(exit)g(status,)f(but)i(it)f(does)f(not)h(always)h(do)f(so.)184
3082 y Fk(\017)46 b Fo(\(exit)d Fr(status)p Fo(\))166
3223 y Fs(T)-8 b(erminates)21 b(the)h(curr)n(ent)g(pr)n(ocess)g(with)g
(the)g(integer)f Fr(status)j Fs(as)f(its)f(exit)h(status.)166
3472 y Ff(7.1.2)99 b Fe(Exec)184 3649 y Fk(\017)46 b
Fo(\(exec)d Fr(pr)n(ogram-name)48 b(ar)n(g0)g(.)14 b(.)g(.)g
Fo(\))184 3761 y Fk(\017)46 b Fo(\(exec-with-envi)o(ro)o(nm)o(ent)39
b Fr(pr)n(ogram-name)48 b(env)e(ar)n(g0)h(.)14 b(.)g(.)g
Fo(\))184 3874 y Fk(\017)46 b Fo(\(exec-file)41 b Fr(\002lename)46
b(ar)n(g0)i(.)14 b(.)g(.)g Fo(\))184 3987 y Fk(\017)46
b Fo(\(exec-file-with)o(-e)o(nv)o(iro)o(nm)o(en)o(t)39
b Fr(\002lename)46 b(env)g(ar)n(g0)i(.)14 b(.)g(.)g Fo(\))184
4100 y Fk(\017)46 b Fo(\(exec-with-alia)o(s)39 b Fr(name)46
b(lookup?)52 b(maybe-env)c(ar)n(guments)p Fo(\))166 4241
y Fs(All)37 b(of)f(these)e(r)n(eplace)i(the)g(curr)n(ent)f(pr)n(ogram)h
(with)g(a)g(new)g(one.)67 b(They)35 b(dif)n(fer)h(in)h(how)e(the)166
4354 y(new)f(pr)n(ogram)g(is)h(found,)h(what)e(its)g(envir)n(onment)g
(is,)k(and)c(what)g(ar)n(guments)g(it)h(is)f(passed.)166
4467 y Fo(Exec)26 b Fs(and)h Fo(exec-with-envir)o(on)o(me)o(nt)21
b Fs(look)27 b(up)f(the)h(new)g(pr)n(ogram)g(in)h(the)e(sear)n(ch)i
(path,)166 4580 y(while)35 b Fo(exec-file)30 b Fs(and)k
Fo(exec-file-with-e)o(nv)o(ir)o(on)o(men)o(t)28 b Fs(execute)33
b(a)i(particular)g(\002le.)166 4692 y(The)22 b(envir)n(onment)g(is)h
(either)f(inherited)g(fr)n(om)h(the)f(curr)n(ent)g(pr)n(ocess)g(\()p
Fo(exec)f Fs(and)i Fo(exec-file)p Fs(\))166 4805 y(or)e(given)g(as)h
(an)g(ar)n(gument)e(\()p Fo(...-with-environ)o(men)o(t)p
Fs(\).)h Fr(Pr)n(ogram-name)j Fs(and)d Fr(\002lename)h
Fs(and)166 4918 y(any)28 b Fr(ar)n(g)461 4932 y Fd(i)518
4918 y Fs(should)f(be)g(strings.)42 b Fr(Env)27 b Fs(should)g(be)g(a)i
(list)e(of)h(strings)e(of)i(the)f(form)h Fo(")p Fr(name)p
Fo(=)p Fr(value)p Fo(")p Fs(.)166 5031 y(The)19 b(\002rst)g(four)h(pr)n
(ocedur)n(es)e(add)h(their)h(\002rst)f(ar)n(gument,)g
Fr(pr)n(ogram-name)k Fs(or)d Fr(\002lename)p Fs(,)g(befor)n(e)g(the)166
5144 y Fr(ar)n(g0)25 b(.)14 b(.)g(.)40 b Fs(ar)n(guments.)307
5257 y Fo(Exec-with-alias)16 b Fs(is)23 b(an)h(omnibus)e(pr)n(ocedur)n
(e)g(that)h(subsumes)e(the)h(other)f(four)-7 b(.)29 b
Fr(Name)166 5370 y Fs(is)d(looked)e(up)h(in)h(the)f(sear)n(ch)g(path)h
(if)g Fr(lookup?)39 b Fs(is)26 b(tr)o(ue)e(and)i(is)g(used)e(as)h(a)h
(\002lename)g(otherwise.)166 5483 y Fr(Maybe-env)j Fs(is)e(either)f(a)h
(list)g(of)g(strings)e(for)i(the)f(envir)n(onment)g(of)h(the)f(new)h
(pr)n(ogram)f(or)h Fo(#f)f Fs(in)166 5596 y(which)20
b(case)f(the)f(new)g(pr)n(ogram)h(inherits)g(its)g(envir)n(onment)f(fr)
n(om)i(the)e(curr)n(ent)h(one.)25 b Fr(Ar)n(guments)166
5709 y Fs(should)c(be)h(a)h(list)g(of)f(strings;)f(unlike)h(with)g(the)
f(other)g(four)h(pr)n(ocedur)n(es,)f Fr(name)h Fs(is)g(not)g(added)f
(to)166 5822 y(this)h(list)h(\(hence)f Fo(-with-alias)p
Fs(\).)1831 6071 y(64)p eop
%%Page: 65 71
65 70 bop 83 573 a Fl(7.2)119 b(Signals)83 802 y Fs(Ther)n(e)24
b(ar)n(e)h(two)f(varieties)g(of)h(signals)f(available,)k
Fr(named)d Fs(and)g Fr(anonymous)p Fs(.)34 b(A)25 b(named)f(signal)h
(is)83 915 y(one)d(for)h(which)g(we)g(have)g(a)g(symbolic)h(name,)f
(such)f(as)h Fo(kill)e Fs(or)i Fo(pipe)p Fs(.)j(Anonymous)21
b(signals,)83 1027 y(for)h(which)h(we)f(only)f(have)i(the)e(curr)n(ent)
h(operating)f(system's)f(signal)j(number)-7 b(,)22 b(have)h(no)f(mean-)
83 1140 y(ing)i(in)g(other)e(operating)g(systems.)28
b(Named)23 b(signals)h(pr)n(eserve)e(their)h(meaning)h(in)g(image)g
(\002les.)83 1253 y(Not)19 b(all)j(named)e(signals)g(ar)n(e)g
(available)j(fr)n(om)e(all)h(OS's)e(and)g(ther)n(e)f(may)i(be)f
(multiple)g(names)g(for)83 1366 y(a)j(single)f(OS)h(signal)g(number)-7
b(.)101 1572 y Fk(\017)46 b Fo(\(name->signal)40 b Fr(symbol)p
Fo(\))46 b Fk(!)f Fr(signal)i(or)f Fo(#f)101 1685 y Fk(\017)g
Fo(\(integer->signa)o(l)39 b Fr(integer)p Fo(\))47 b
Fk(!)e Fr(signal)101 1798 y Fk(\017)h Fo(\(signal?)h
Fr(x)p Fo(\))f Fk(!)f Fr(boolean)101 1911 y Fk(\017)h
Fo(\(signal-name)40 b Fr(signal)p Fo(\))46 b Fk(!)g Fr(symbol)g(or)h
Fo(#f)101 2024 y Fk(\017)f Fo(\(signal-os-numb)o(er)39
b Fr(signal)p Fo(\))46 b Fk(!)f Fr(integer)101 2137 y
Fk(\017)h Fo(\(signal=?)h Fr(signal0)g(signal1)p Fo(\))g
Fk(!)e Fr(boolean)83 2343 y Fo(Name->signal)16 b Fs(r)n(eturns)k(a)h
(\(named\))h(signal)f(or)g Fo(#f)f Fs(if)i(the)f(the)f(signal)h
Fr(name)h Fs(is)f(not)f(supported)83 2456 y(by)k(the)g(operating)g
(system.)31 b(The)24 b(signal)h(r)n(eturned)e(by)h Fo(integer->signal)
18 b Fs(is)25 b(a)g(named)f(sig-)83 2569 y(nal)d(if)f
Fr(integer)i Fs(corr)n(esponds)17 b(to)i(a)i(named)e(signal)h(in)h(the)
e(curr)n(ent)g(operating)f(system;)h(otherwise)83 2682
y(it)31 b(r)n(eturns)e(an)h(anonymous)f(signal.)52 b
Fo(Signal-name)25 b Fs(r)n(eturns)k(a)i(symbol)f(if)h
Fr(signal)h Fs(is)e(named)83 2795 y(and)24 b Fo(#f)f
Fs(if)h(it)g(is)g(anonymous.)30 b Fo(Signal=?)e Fs(r)n(eturns)23
b Fo(#t)g Fs(if)h Fr(signal0)i Fs(and)e Fr(signal1)h
Fs(have)f(the)f(same)83 2908 y(operating)e(system)g(number)i(and)f
Fo(#f)g Fs(if)i(they)d(do)h(not.)83 3216 y Ff(7.2.1)99
b(POSIX)25 b(signals)83 3411 y Fs(The)d(following)h(lists)f(the)g
(names)g(of)h(the)f(POSIX)g(signals.)187 3642 y Fo(abrt)98
b Fs(abort)23 b(-)g(abnormal)h(termination)e(\(as)h(by)g(abort\(\)\))
187 3755 y Fo(alrm)98 b Fs(alarm)24 b(-)f(timeout)f(signal)h(\(as)g(by)
g(alarm\(\)\))187 3868 y Fo(fpe)153 b Fs(\003oating)23
b(point)f(exception)187 3981 y Fo(hup)153 b Fs(hangup)22
b(-)h(hangup)f(on)g(contr)n(olling)h(terminal)h(or)e(death)g(of)g
(contr)n(olling)h(pr)n(ocess)187 4094 y Fo(ill)153 b
Fs(illegal)24 b(instr)o(uction)187 4207 y Fo(int)153
b Fs(interr)o(upt)21 b(-)i(interaction)g(attention)187
4320 y Fo(kill)98 b Fs(kill)24 b(-)f(termination)f(signal,)h(cannot)g
(be)f(caught)h(or)f(ignor)n(ed)187 4433 y Fo(pipe)98
b Fs(pipe)22 b(-)h(write)f(on)g(a)i(pipe)e(with)g(no)g(r)n(eaders)187
4546 y Fo(quit)98 b Fs(quit)23 b(-)g(interaction)f(termination)187
4659 y Fo(segv)98 b Fs(segmentation)21 b(violation)j(-)f(invalid)h
(memory)e(r)n(efer)n(ence)187 4771 y Fo(term)98 b Fs(termination)23
b(-)g(termination)f(signal)187 4884 y Fo(usr1)98 b Fs(user1)22
b(-)h(for)g(use)e(by)i(applications)187 4997 y Fo(usr2)98
b Fs(user2)22 b(-)h(for)g(use)e(by)i(applications)187
5110 y Fo(chld)98 b Fs(child)23 b(-)g(child)h(pr)n(ocess)d(stopped)f
(or)i(terminated)187 5223 y Fo(cont)98 b Fs(continue)22
b(-)h(continue)f(if)h(stopped)187 5336 y Fo(stop)98 b
Fs(stop)21 b(-)i(cannot)g(be)f(caught)h(or)f(ignor)n(ed)187
5449 y Fo(tstp)98 b Fs(interactive)23 b(stop)187 5562
y Fo(ttin)98 b Fs(r)n(ead)23 b(fr)n(om)g(contr)n(ol)f(terminal)i
(attempted)c(by)j(backgr)n(ound)f(pr)n(ocess)187 5675
y Fo(ttou)98 b Fs(write)22 b(to)g(contr)n(ol)h(terminal)g(attempted)e
(by)h(backgr)n(ound)g(pr)n(ocess)187 5788 y Fo(bus)153
b Fs(bus)22 b(err)n(or)g(-)h(access)g(to)f(unde\002ned)e(portion)i(of)h
(memory)1748 6071 y(65)p eop
%%Page: 66 72
66 71 bop 166 573 a Ff(7.2.2)99 b(Other)24 b(signals)166
750 y Fs(The)30 b(following)h(lists)f(the)g(names)g(of)h(the)f
(non-POSIX)f(signals)i(that)f(the)g(system)f(is)i(curr)n(ently)166
863 y(awar)n(e)23 b(of.)930 1117 y Fo(trap)207 b Fs(trace)22
b(or)h(br)n(eakpoint)f(trap)930 1230 y Fo(iot)262 b Fs(IOT)22
b(trap)h(-)g(a)g(synonym)e(for)h(ABR)m(T)930 1343 y Fo(emt)930
1456 y(sys)262 b Fs(bad)23 b(ar)n(gument)f(to)g(r)n(outine)g(\(SVID\))
930 1569 y Fo(stkflt)97 b Fs(stack)22 b(fault)h(on)g(copr)n(ocessor)930
1682 y Fo(urg)262 b Fs(ur)n(gent)21 b(condition)h(on)h(socket)e(\(4.2)i
(BSD\))930 1795 y Fo(io)317 b Fs(I/O)23 b(now)f(possible)g(\(4.2)h
(BSD\))930 1908 y Fo(poll)207 b Fs(A)22 b(synonym)f(for)i(SIGIO)f
(\(System)g(V\))930 2021 y Fo(cld)262 b Fs(A)22 b(synonym)f(for)i
(SIGCHLD)930 2134 y Fo(xcpu)207 b Fs(CPU)23 b(time)f(limit)i(exceeded)c
(\(4.2)k(BSD\))930 2247 y Fo(xfsz)207 b Fs(File)22 b(size)h(limit)h
(exceeded)c(\(4.2)k(BSD\))930 2359 y Fo(vtalrm)97 b Fs(V)-5
b(irtual)23 b(alarm)h(clock)f(\(4.2)h(BSD\))930 2472
y Fo(prof)207 b Fs(Pr)n(o\002le)22 b(alarm)j(clock)930
2585 y Fo(pwr)262 b Fs(Power)21 b(failur)n(e)j(\(System)e(V\))930
2698 y Fo(info)207 b Fs(A)22 b(synonym)f(for)i(SIGPWR)930
2811 y Fo(lost)207 b Fs(File)22 b(lock)h(lost)930 2924
y Fo(winch)152 b Fs(W)-5 b(indow)22 b(r)n(esize)g(signal)h(\(4.3)h
(BSD,)e(Sun\))930 3037 y Fo(unused)97 b Fs(Unused)21
b(signal)166 3661 y Ff(7.2.3)99 b(Sending)25 b(signals)184
3839 y Fk(\017)46 b Fo(\(signal-process)39 b Fr(pr)n(ocess-id)49
b(signal)p Fo(\))166 4015 y Fs(Send)21 b Fr(signal)j
Fs(to)e(the)g(pr)n(ocess)g(corr)n(esponding)e(to)i Fr(pr)n(ocess-id)p
Fs(.)166 4276 y Ff(7.2.4)99 b(Receiving)26 b(signals)166
4455 y Fs(Signals)18 b(r)n(eceived)f(by)h(the)f(Scheme)g(pr)n(ocess)f
(can)i(be)g(obtained)f(via)i(one)e(or)g(mor)n(e)h(signal-queues.)166
4568 y(Each)37 b(signal)f(queue)f(has)i(a)g(list)f(of)g(monitor)n(ed)f
(signals)i(and)f(a)h(queue)e(of)h(r)n(eceived)g(signals)166
4681 y(that)31 b(have)h(yet)f(to)g(be)g(r)n(ead)h(fr)n(om)g(the)f
(signal-queue.)54 b(When)31 b(the)g(Scheme)g(pr)n(ocess)f(r)n(eceives)
166 4794 y(a)c(signal)g(that)f(signal)h(is)f(added)f(to)h(the)g(r)n
(eceived-signal)g(queues)f(of)h(all)i(signal-queues)e(which)166
4906 y(ar)n(e)e(curr)n(ently)f(monitoring)g(that)h(particular)g
(signal.)184 5082 y Fk(\017)46 b Fo(\(make-signal-qu)o(eu)o(e)39
b Fr(signals)p Fo(\))47 b Fk(!)e Fr(signal-queue)184
5195 y Fk(\017)h Fo(\(signal-queue?)f Fr(x)p Fo(\))g
Fk(!)g Fr(boolean)184 5308 y Fk(\017)h Fo(\(signal-queue-m)o(on)o(it)o
(ore)o(d-)o(si)o(gn)o(al)o(s)39 b Fr(signal-queue)p Fo(\))47
b Fk(!)e Fr(list)i(of)f(signals)184 5420 y Fk(\017)g
Fo(\(dequeue-signal)o(!)f Fr(signal-queue)p Fo(\))h Fk(!)g
Fr(signal)184 5533 y Fk(\017)g Fo(\(maybe-dequeue-)o(si)o(gn)o(al!)e
Fr(queue-queue)p Fo(\))h Fk(!)g Fr(signal)i(or)f Fo(#f)166
5709 y(Make-signal-que)o(ue)28 b Fs(r)n(eturns)33 b(a)i(new)f
(signal-queue)g(that)g(will)i(monitor)e(the)f(signals)i(in)166
5822 y(the)27 b(list)h Fr(signals)p Fs(.)45 b Fo(Signal-queue?)37
b Fs(is)28 b(a)g(pr)n(edicate)g(for)f(signal)i(queues.)41
b Fo(Signal-queue-)1831 6071 y Fs(66)p eop
%%Page: 67 73
67 72 bop 83 573 a Fo(monitored-signa)o(ls)34 b Fs(r)n(eturns)40
b(a)h(list)g(of)f(the)g(signals)h(curr)n(ently)f(monitor)n(ed)g(by)g
Fr(signal-)83 686 y(queue)p Fs(.)87 b Fo(Dequeue-signal!)81
b Fs(and)42 b Fo(maybe-dequeue-si)o(gn)o(al)36 b Fs(both)42
b(r)n(eturn)f(the)h(next)83 799 y(r)n(eceived-but-unr)n(ead)f(signal)g
(fr)n(om)h Fr(signal-queue)p Fs(.)85 b(If)41 b Fr(signal-queue)p
Fs('s)h(queue)e(of)h(signals)g(is)83 912 y(empty)30 b
Fo(dequeue-signal!)48 b Fs(blocks)32 b(until)f(an)h(appr)n(opriate)f
(signal)h(is)g(r)n(eceived.)54 b Fo(Maybe-)83 1024 y(dequeue-signal!)21
b Fs(does)g(not)h(block;)h(it)g(r)n(eturns)e Fo(#f)h
Fs(instead.)224 1137 y(Ther)n(e)32 b(is)h(a)h(bug)e(in)h(the)g(curr)n
(ent)f(system)f(that)i(causes)f(an)h(err)n(oneous)e(deadlock)h(err)n
(or)g(if)83 1250 y(thr)n(eads)27 b(ar)n(e)i(blocked)e(waiting)h(for)g
(signals)h(and)f(no)f(other)g(thr)n(eads)g(ar)n(e)i(available)i(to)c(r)
o(un.)44 b(A)83 1363 y(work)34 b(ar)n(ound)i(is)f(to)g(cr)n(eate)g(a)h
(thr)n(ead)f(that)g(sleeps)f(for)h(a)h(long)f(time,)j(which)e(pr)n
(events)e(any)83 1476 y(deadlock)22 b(err)n(ors)f(\(including)j(r)n
(eal)f(ones\):)248 1654 y Fo(>)54 b(,open)f(threads)248
1767 y(>)h(\(spawn)e(\(lambda)g(\(\))848 1880 y(;)i(Sleep)f(for)g(a)h
(year)848 1993 y(\(sleep)e(\(*)i(1000)f(60)g(60)h(24)f(365\)\)\)\))101
2171 y Fk(\017)46 b Fo(\(add-signal-que)o(ue)o(-s)o(ign)o(al)o(!)39
b Fr(signal-queue)47 b(signal)p Fo(\))101 2284 y Fk(\017)f
Fo(\(remove-signal-)o(qu)o(eu)o(e-s)o(ig)o(na)o(l!)39
b Fr(signal-queue)47 b(signal)p Fo(\))83 2446 y Fs(These)31
b(two)i(pr)n(ocedur)n(es)e(can)j(be)f(used)f(to)g(add)h(or)g(r)n(emove)
g(signals)g(fr)n(om)g(a)h(signal-queue's)83 2559 y(list)22
b(of)f(monitor)n(ed)g(signals.)28 b(When)21 b(a)h(signal)g(is)f(r)n
(emoved)g(fr)n(om)i(a)f(signal-queue's)f(list)g(of)h(mon-)83
2672 y(itor)n(ed)17 b(signals)g(any)h(occurances)g(of)f(the)g(signal)h
(ar)n(e)g(r)n(emoved)f(fr)n(om)h(that)f(signal-queue's)g(pend-)83
2785 y(ing)34 b(signals.)62 b(In)34 b(other)f(wor)n(ds,)j
Fo(dequeue-signal)o(!)56 b Fs(and)35 b Fo(maybe-dequeue-)o(si)o(gn)o
(al)o(!)83 2898 y Fs(will)24 b(only)e(r)n(eturn)g(signals)h(that)f(ar)n
(e)h(curr)n(ently)f(on)g(the)g(signal-queue's)g(list)h(of)g(signals.)83
3194 y Fl(7.3)119 b(Process)30 b(environment)83 3405
y Fs(These)21 b(ar)n(e)i(in)g(str)o(uctur)n(es)e Fo(posix-process-d)o
(at)o(a)c Fs(and)22 b Fo(posix)p Fs(.)83 3658 y Ff(7.3.1)99
b(Process)25 b(identi\002cation)101 3835 y Fk(\017)46
b Fo(\(get-process-id)o(\))39 b Fk(!)91 b Fr(pr)n(ocess-id)101
3948 y Fk(\017)46 b Fo(\(get-parent-pro)o(ce)o(ss)o(-id)o(\))39
b Fk(!)91 b Fr(pr)n(ocess-id)83 4110 y Fs(These)21 b(r)n(eturn)h(the)g
(pr)n(ocess)f(ids)h(of)h(the)f(curr)n(ent)g(pr)n(ocess)f(and)i(its)f
(par)n(ent.)27 b(See)22 b(section)g(7.1.1)h(for)83 4223
y(operations)e(on)h(pr)n(ocess)g(ids.)101 4384 y Fk(\017)46
b Fo(\(get-user-id\))40 b Fk(!)90 b Fr(user-id)101 4497
y Fk(\017)46 b Fo(\(get-effective-)o(us)o(er)o(-id)o(\))39
b Fk(!)91 b Fr(user-id)101 4610 y Fk(\017)46 b Fo(\(set-user-id!)40
b Fr(user-id)p Fo(\))101 4772 y Fk(\017)46 b Fo(\(get-group-id\))39
b Fk(!)91 b Fr(gr)n(oup-id)101 4885 y Fk(\017)46 b Fo(\(get-effective-)
o(gr)o(ou)o(p-i)o(d\))39 b Fk(!)90 b Fr(gr)n(oup-id)101
4998 y Fk(\017)46 b Fo(\(set-group-id!)39 b Fr(gr)n(oup-id)p
Fo(\))83 5159 y Fs(Every)26 b(pr)n(ocess)f(has)h(both)g(the)g(original)
i(and)e(ef)n(fective)h(user)f(id)g(and)h(gr)n(oup)e(id.)40
b(The)26 b(ef)n(fective)83 5272 y(values)d(may)g(be)f(set,)g(but)g(not)
g(the)g(original)h(ones.)101 5434 y Fk(\017)46 b Fo(\(get-groups\))40
b Fk(!)91 b Fr(gr)n(oup-ids)101 5547 y Fk(\017)46 b Fo
(\(get-login-name)o(\))39 b Fk(!)91 b Fr(string)83 5709
y Fo(Get-groups)18 b Fs(r)n(eturns)k(a)h(list)g(of)g(the)f
(supplementary)f(gr)n(oups)g(of)i(the)f(curr)n(ent)h(pr)n(ocess.)k
Fo(Get-)83 5822 y(login-name)18 b Fs(r)n(eturns)k(a)h(user)e(name)i
(for)g(the)f(curr)n(ent)g(pr)n(ocess.)1748 6071 y(67)p
eop
%%Page: 68 74
68 73 bop 166 573 a Ff(7.3.2)99 b(Environment)25 b(variables)184
750 y Fk(\017)46 b Fo(\(lookup-environ)o(me)o(nt)o(-va)o(ri)o(ab)o(le)
39 b Fr(string)p Fo(\))46 b Fk(!)f Fr(string)i(or)f Fo(#f)184
863 y Fk(\017)g Fo(\(environment-al)o(is)o(t\))39 b Fk(!)45
b Fr(alist)166 1027 y Fo(Lookup-environm)o(en)o(t-)o(va)o(ria)o(bl)o(e)
30 b Fs(looks)36 b(up)g(its)g(ar)n(gument)g(in)h(the)f(envir)n(onment)g
(list)166 1139 y(and)c(r)n(eturns)e(the)h(corr)n(esponding)f(value)j
(or)e Fo(#f)g Fs(if)i(ther)n(e)d(is)i(none.)55 b Fo(Environment-al)o
(is)o(t)166 1252 y Fs(r)n(eturns)21 b(the)h(entir)n(e)g(envir)n(onment)
g(as)h(a)g(list)g(of)g Fo(\()p Fr(name-string)55 b Fo(.)109
b Fr(value-string)p Fo(\))25 b Fs(pairs.)166 1550 y Fl(7.4)119
b(Users)29 b(and)h(groups)166 1761 y Fr(User-id)p Fs(s)k(and)e
Fr(gr)n(oup-id)p Fs(s)i(ar)n(e)f(boxed)e(integers)f(r)n(epr)n(esenting)
h(Unix)h(users)f(and)h(gr)n(oups.)55 b(The)166 1873 y(pr)n(ocedur)n(es)
21 b(in)i(this)f(section)g(ar)n(e)h(in)g(str)o(uctur)n(es)e
Fo(posix-users)d Fs(and)23 b Fo(posix)p Fs(.)184 2037
y Fk(\017)46 b Fo(\(user-id?)h Fr(x)p Fo(\))e Fk(!)h
Fr(boolean)184 2150 y Fk(\017)g Fo(\(user-id=?)g Fr(user-id0)i
(user-id1)p Fo(\))f Fk(!)e Fr(boolean)184 2263 y Fk(\017)h
Fo(\(user-id->integ)o(er)39 b Fr(user-id)p Fo(\))46 b
Fk(!)g Fr(integer)184 2376 y Fk(\017)g Fo(\(integer->user-)o(id)39
b Fr(integer)p Fo(\))46 b Fk(!)g Fr(user-id)184 2540
y Fk(\017)g Fo(\(group-id?)g Fr(x)p Fo(\))g Fk(!)f Fr(boolean)184
2653 y Fk(\017)h Fo(\(group-id=?)g Fr(gr)n(oup-id0)i(gr)n(oup-id1)p
Fo(\))g Fk(!)e Fr(boolean)184 2766 y Fk(\017)g Fo(\(group-id->inte)o
(ge)o(r)39 b Fr(gr)n(oup-id)p Fo(\))48 b Fk(!)d Fr(integer)184
2879 y Fk(\017)h Fo(\(integer->group)o(-i)o(d)39 b Fr(integer)p
Fo(\))47 b Fk(!)e Fr(gr)n(oup-id)166 3043 y Fs(User)n(-ids)24
b(and)h(gr)n(oup-ids)f(have)i(their)f(own)f(own)h(pr)n(edicates)f(and)h
(comparison,)h(boxing,)f(and)166 3155 y(unboxing)d(functions.)184
3319 y Fk(\017)46 b Fo(\(user-id->user-)o(in)o(fo)39
b Fr(user-id)p Fo(\))47 b Fk(!)e Fr(user-info)184 3432
y Fk(\017)h Fo(\(name->user-inf)o(o)39 b Fr(string)p
Fo(\))47 b Fk(!)e Fr(user-info)166 3596 y Fs(These)21
b(r)n(eturn)h(the)g(user)f(info)i(for)g(a)g(user)e(identi\002ed)h(by)g
(user)n(-id)h(or)f(name.)184 3760 y Fk(\017)46 b Fo(\(user-info?)g
Fr(x)p Fo(\))f Fk(!)91 b Fr(boolean)184 3873 y Fk(\017)46
b Fo(\(user-info-name)39 b Fr(user-info)p Fo(\))46 b
Fk(!)91 b Fr(string)184 3986 y Fk(\017)46 b Fo(\(user-info-id)40
b Fr(user-info)p Fo(\))46 b Fk(!)91 b Fr(user-id)184
4099 y Fk(\017)46 b Fo(\(user-info-grou)o(p)39 b Fr(user-info)p
Fo(\))47 b Fk(!)90 b Fr(gr)n(oup-id)184 4212 y Fk(\017)46
b Fo(\(user-info-home)o(-d)o(ir)o(ect)o(or)o(y)39 b Fr(user-info)p
Fo(\))47 b Fk(!)90 b Fr(string)184 4325 y Fk(\017)46
b Fo(\(user-info-shel)o(l)39 b Fr(user-info)p Fo(\))47
b Fk(!)90 b Fr(string)166 4488 y Fs(A)28 b Fo(user-info)c
Fs(contains)29 b(information)g(about)f(a)h(user)-7 b(.)44
b(A)-8 b(vailable)30 b(ar)n(e)e(the)g(user)7 b('s)27
b(name,)i(id,)166 4601 y(gr)n(oup,)21 b(home)h(dir)n(ectory)-10
b(,)22 b(and)g(shell.)184 4765 y Fk(\017)46 b Fo(\(group-id->grou)o(p-)
o(in)o(fo)39 b Fr(gr)n(oup-id)p Fo(\))48 b Fk(!)d Fr(gr)n(oup-info)184
4878 y Fk(\017)h Fo(\(name->group-in)o(fo)39 b Fr(string)p
Fo(\))46 b Fk(!)f Fr(gr)n(oup-info)166 5042 y Fs(These)21
b(r)n(eturn)h(the)g(gr)n(oup)f(info)i(for)g(a)g(gr)n(oup)f
(identi\002ed)f(by)i(gr)n(oup-id)e(or)i(name.)184 5206
y Fk(\017)46 b Fo(\(group-info?)g Fr(x)p Fo(\))f Fk(!)91
b Fr(boolean)184 5319 y Fk(\017)46 b Fo(\(group-info-nam)o(e)39
b Fr(gr)n(oup-info)p Fo(\))48 b Fk(!)90 b Fr(string)184
5432 y Fk(\017)46 b Fo(\(group-info-id)39 b Fr(gr)n(oup-info)p
Fo(\))47 b Fk(!)91 b Fr(gr)n(oup-id)184 5545 y Fk(\017)46
b Fo(\(group-info-mem)o(be)o(rs)39 b Fr(gr)n(oup-info)p
Fo(\))47 b Fk(!)91 b Fr(user-ids)166 5709 y Fs(A)23 b
Fo(group-info)c Fs(contains)24 b(information)g(about)f(a)h(gr)n(oup.)30
b(A)-8 b(vailable)25 b(ar)n(e)f(the)f(gr)n(oup's)f(name,)166
5822 y(id,)g(and)h(a)g(list)g(of)g(members.)1831 6071
y(68)p eop
%%Page: 69 75
69 74 bop 83 573 a Fl(7.5)119 b(OS)30 b(and)f(machine)h
(identi\002cation)83 784 y Fs(These)21 b(pr)n(ocedur)n(es)h(r)n(eturn)g
(strings)g(that)g(ar)n(e)i(supposed)c(to)i(identify)h(the)f(curr)n(ent)
h(OS)g(and)g(ma-)83 897 y(chine.)k(The)18 b(POSIX)h(standar)n(d)g(does)
e(not)i(indicate)h(the)e(format)h(of)h(the)e(strings.)25
b(The)19 b(pr)n(ocedur)n(es)83 1010 y(ar)n(e)k(in)g(str)o(uctur)n(es)e
Fo(posix-platform-)o(na)o(mes)16 b Fs(and)22 b Fo(posix)p
Fs(.)101 1152 y Fk(\017)46 b Fo(\(os-name\))41 b Fk(!)46
b Fr(string)101 1265 y Fk(\017)g Fo(\(os-node-name\))39
b Fk(!)46 b Fr(string)101 1378 y Fk(\017)g Fo(\(os-release-nam)o(e\))39
b Fk(!)45 b Fr(string)101 1491 y Fk(\017)h Fo(\(os-version-nam)o(e\))39
b Fk(!)45 b Fr(string)101 1604 y Fk(\017)h Fo(\(machine-name\))39
b Fk(!)46 b Fr(string)83 1897 y Fl(7.6)119 b(Files)30
b(and)g(directories)83 2108 y Fs(These)21 b(pr)n(ocedur)n(es)g(ar)n(e)i
(in)g(str)o(uctur)n(es)e Fo(posix-files)d Fs(and)k Fo(posix)p
Fs(.)83 2357 y Ff(7.6.1)99 b(Directory)25 b(streams)83
2534 y Fs(Dir)n(ectory)32 b(str)n(eams)g(ar)n(e)i(like)e(input)g
(ports,)i(with)e(each)h(r)n(ead)g(operation)e(r)n(eturning)h(the)g
(next)83 2646 y(name)23 b(in)g(the)f(dir)n(ectory)-10
b(.)101 2789 y Fk(\017)46 b Fo(\(open-directory)o(-s)o(tr)o(eam)39
b Fr(name)p Fo(\))45 b Fk(!)g Fr(dir)n(ectory)101 2902
y Fk(\017)h Fo(\(directory-stre)o(am)o(?)f Fr(x)p Fo(\))g
Fk(!)h Fr(boolean)101 3015 y Fk(\017)g Fo(\(read-directory)o(-s)o(tr)o
(eam)39 b Fr(dir)n(ectory)p Fo(\))48 b Fk(!)d Fr(name)h(or)g
Fo(#f)101 3128 y Fk(\017)g Fo(\(close-director)o(y-)o(st)o(rea)o(m)39
b Fr(dir)n(ectory)p Fo(\))83 3270 y(Open-directory-)o(st)o(re)o(am)15
b Fs(opens)20 b(a)j(new)e(dir)n(ectory)g(str)n(eam.)27
b Fo(Directory-strea)o(m?)21 b Fs(is)83 3383 y(a)e(pr)n(edicate)f(that)
h(r)n(ecognizes)f(dir)n(ectory)f(str)n(eams.)26 b Fo(Read-directory-s)o
(tr)o(ea)o(m)13 b Fs(r)n(eturns)k(the)83 3496 y(next)27
b(name)i(in)g(the)e(dir)n(ectory)g(or)h Fo(#f)g Fs(if)h(all)g(names)f
(have)h(been)f(r)n(ead.)44 b Fo(Close-directory)o(-)83
3609 y(stream)20 b Fs(closes)i(a)h(dir)n(ectory)f(str)n(eam.)101
3752 y Fk(\017)46 b Fo(\(list-directory)39 b Fr(name)p
Fo(\))45 b Fk(!)g Fr(list)i(of)f(strings)83 3894 y Fs(This)22
b(is)h(the)f(obvious)g(utility;)h(it)g(r)n(eturns)e(a)i(list)g(of)g
(the)e(names)i(in)g(dir)n(ectory)f Fr(name)p Fs(.)83
4143 y Ff(7.6.2)99 b(W)-7 b(orking)25 b(directory)101
4320 y Fk(\017)46 b Fo(\(working-direct)o(or)o(y\))39
b Fk(!)45 b Fr(string)101 4433 y Fk(\017)h Fo(\(set-working-di)o(re)o
(ct)o(ory)o(!)39 b Fr(string)p Fo(\))83 4576 y Fs(These)21
b(r)n(eturn)h(and)g(set)g(the)g(working)f(dir)n(ectory)-10
b(.)83 4825 y Ff(7.6.3)99 b(File)25 b(creation)g(and)g(removal)101
5001 y Fk(\017)46 b Fo(\(open-file)41 b Fr(path)47 b(\002le-options)p
Fo(\))h Fk(!)d Fr(port)101 5114 y Fk(\017)h Fo(\(open-file)41
b Fr(path)47 b(\002le-options)h(\002le-mode)p Fo(\))f
Fk(!)e Fr(port)83 5257 y Fo(Open-file)25 b Fs(opens)i(a)j(port)e(to)g
(the)h(\002le)g(named)g(by)g(string)f Fr(path)p Fs(.)49
b(The)28 b Fr(\002le-options)k Fs(ar)n(gument)83 5370
y(determines)c(various)j(aspects)e(of)h(the)f(r)n(eturned)g(port.)49
b(The)30 b(optional)g Fr(\002le-mode)i Fs(ar)n(gument)e(is)83
5483 y(used)21 b(only)h(if)h(the)e(\002le)h(to)g(be)g(opened)e(does)h
(not)g(alr)n(eady)i(exist.)k(The)21 b(r)n(eturned)g(port)g(is)h(an)h
(input)83 5596 y(port)33 b(if)i Fr(\002le-options)i Fs(includes)d
Fo(read-only)p Fs(;)h(otherwise)d(it)j(r)n(eturns)e(an)h(output)f
(port.)61 b Fo(Dup-)83 5709 y(switching-mode)23 b Fs(can)30
b(be)g(used)d(to)i(open)f(an)i(input)f(port)f(for)i(output)d(ports)h
(opened)f(with)83 5822 y(the)22 b Fo(read/write)c Fs(option.)1748
6071 y(69)p eop
%%Page: 70 76
70 75 bop 184 573 a Fk(\017)46 b Fo(\(file-options)40
b Fr(\002le-option-name)48 b Fo(...\))20 b Fk(!)j Fr(\002le-options)890
b Fs(syntax)184 686 y Fk(\017)46 b Fo(\(file-options-o)o(n?)e
Fr(\002le-options)k(\002le-options)p Fo(\))g Fk(!)d Fr(boolean)166
862 y Fs(The)17 b(syntax)f Fo(file-options)c Fs(r)n(eturns)k(a)i
(\002le-option)f(with)g(the)f(indicated)i(options)d(set.)25
b Fo(File-)166 975 y(options-on?)e Fs(r)n(eturns)c(tr)o(ue)h(if)h(its)f
(\002rst)g(ar)n(gument)g(includes)g(all)i(of)e(the)g(options)f(listed)h
(in)h(the)166 1088 y(second)g(ar)n(gument.)28 b(The)22
b(following)g(\002le)h(options)e(may)i(be)g(used)e(with)i
Fo(open-file)p Fs(.)545 1309 y Fo(create)752 b Fs(cr)n(eate)19
b(\002le)g(if)h(it)g(does)e(not)g(alr)n(eady)i(exist;)f(a)h(\002le-)
1627 1422 y(mode)29 b(ar)n(gument)h(is)h(r)n(equir)n(ed)f(with)h(this)f
(op-)1627 1535 y(tion)545 1648 y Fo(exclusive)587 b Fs(an)33
b(err)n(or)g(will)h(be)g(raised)e(if)j(this)d(option)h(and)1627
1761 y Fo(create)d Fs(ar)n(e)j(both)f(set)f(and)i(the)f(\002le)g(alr)n
(eady)1627 1873 y(exists)545 1986 y Fo(no-controlling-)o(tt)o(y)94
b Fs(if)49 b Fr(path)h Fs(is)e(a)h(terminal)g(device)g(this)f(option)
1627 2099 y(causes)18 b(the)g(terminal)i(to)e(not)g(become)h(the)f
(con-)1627 2212 y(tr)n(olling)23 b(terminal)g(of)g(the)e(pr)n(ocess)545
2325 y Fo(truncate)642 b Fs(\002le)22 b(is)h(tr)o(uncated)545
2438 y Fo(append)752 b Fs(writes)21 b(ar)n(e)i(appended)e(to)h
(existing)f(contents)545 2551 y Fo(nonblocking)477 b
Fs(r)n(ead)22 b(and)h(write)f(operations)f(do)h(not)g(block)545
2664 y Fo(read-only)587 b Fs(port)21 b(may)i(not)f(be)h(written)545
2777 y Fo(read-write)532 b Fs(\002le)22 b(descriptor)f(may)i(be)g(r)n
(ead)f(or)h(written)545 2890 y Fo(write-only)532 b Fs(port)21
b(may)i(not)f(be)h(r)n(ead)166 3104 y(Only)g(one)f(of)h(the)e(last)i
(thr)n(ee)f(options)f(may)i(be)g(used.)307 3219 y(For)f(example)331
3413 y Fo(\(open-file)50 b("some-file.txt")931 3527 y(\(file-options)f
(create)j(write-only\))931 3642 y(\(file-mode)e(read)j(owner-write\)\))
166 3835 y Fs(r)n(eturns)25 b(an)i(output)d(port)h(that)h(writes)g(to)f
(a)i(newly-cr)n(eated)e(\002le)i(that)f(can)h(be)f(r)n(ead)g(by)g
(anyone)166 3948 y(and)d(written)e(only)i(by)f(the)g(owner)-7
b(.)27 b(Once)c(the)f(\002le)g(exists,)331 4142 y Fo(\(open-file)50
b("some-file.txt")931 4257 y(\(file-options)f(append)j(write-only\)\))
166 4450 y Fs(will)24 b(open)d(an)i(output)e(port)h(that)g(appends)f
(to)h(the)g(\002le.)307 4564 y(The)e Fo(append)d Fs(and)j
Fo(nonblocking)c Fs(options)i(and)j(the)e(r)n(ead/write)h(natur)n(e)g
(of)g(the)f(port)g(can)166 4677 y(be)25 b(r)n(ead)f(using)h
Fo(i/o-flags)p Fs(.)30 b(The)24 b Fo(append)e Fs(and)j
Fo(nonblocking)20 b Fs(options)j(can)j(be)e(set)g(using)166
4790 y Fo(set-i/o-flags!)p Fs(.)307 4904 y(T)-8 b(o)21
b(keep)g(port)g(operations)f(fr)n(om)j(blocking)f(the)f(Scheme)h(48)h
(pr)n(ocess,)d(output)g(ports)h(ar)n(e)h(set)166 5017
y(to)g(be)g(nonblocking)h(at)f(the)g(time)h(of)f(cr)n(eation)h(\(input)
f(ports)f(ar)n(e)i(managed)g(using)f Fo(select\(\))p
Fs(\).)166 5130 y(Y)-8 b(ou)31 b(can)i(use)e Fo(set-i/o-flags!)50
b Fs(to)32 b(make)f(an)i(output)d(port)h(blocking,)k(for)d(example)g
(just)166 5243 y(befor)n(e)h(a)i(fork,)h(but)d(car)n(e)i(should)e(be)g
(exer)n(cised.)60 b(The)33 b(Scheme)h(48)g(r)o(untime)g(code)f(may)h
(get)166 5356 y(confused)21 b(if)j(an)f(I/O)g(operation)e(blocks.)184
5532 y Fk(\017)46 b Fo(\(set-file-creat)o(io)o(n-)o(mas)o(k!)39
b Fr(\002le-mode)p Fo(\))166 5709 y Fs(Sets)22 b(the)h(\002le)h(cr)n
(eation)g(mask)g(to)f(be)g Fr(\002le-mode)p Fs(.)33 b(Bits)23
b(set)g(in)h Fr(\002le-mode)h Fs(ar)n(e)f(clear)n(ed)g(in)h(the)d
(modes)166 5822 y(of)h(any)f(\002les)h(or)f(dir)n(ectories)f(cr)n
(eated)i(by)f(the)g(curr)n(ent)g(pr)n(ocess.)1831 6071
y(70)p eop
%%Page: 71 77
71 76 bop 101 573 a Fk(\017)46 b Fo(\(link)d Fr(existing)48
b(new)p Fo(\))83 764 y(Link)27 b Fs(makes)i(path)g Fr(new)f
Fs(be)h(a)h(new)e(link)h(to)g(the)f(\002le)h(pointed)f(to)g(by)h(path)g
Fr(existing)p Fs(.)49 b(The)28 b(two)83 877 y(paths)22
b(must)g(be)g(in)i(the)d(same)i(\002le)g(system.)101
1069 y Fk(\017)46 b Fo(\(make-directory)39 b Fr(name)45
b(\002le-mode)p Fo(\))101 1181 y Fk(\017)h Fo(\(make-fifo)41
b Fr(\002le-mode)p Fo(\))83 1373 y Fs(These)21 b(two)h(pr)n(ocedur)n
(es)f(make)h(new)g(dir)n(ectories)g(and)h(\002fo)f(\002les.)101
1564 y Fk(\017)46 b Fo(\(unlink)c Fr(path)p Fo(\))101
1677 y Fk(\017)k Fo(\(remove-directo)o(ry)39 b Fr(path)p
Fo(\))101 1790 y Fk(\017)46 b Fo(\(rename)c Fr(old-path)49
b(new-path)p Fo(\))83 1981 y(Unlink)24 b Fs(r)n(emoves)h(the)h(link)g
(indicated)h(by)f Fr(path)p Fs(.)40 b Fo(Remove-director)o(y)20
b Fs(r)n(emoves)26 b(the)f(indi-)83 2094 y(cated)g(\(empty\))g(dir)n
(ectory)-10 b(.)36 b Fo(Rename)22 b Fs(moves)j(the)g(\002le)h(pointed)e
(to)h(by)g Fr(old-path)k Fs(to)c(the)f(location)83 2207
y(pointed)30 b(to)h(by)g Fr(new-path)i Fs(\(the)e(two)g(paths)f(must)h
(be)g(in)h(the)f(same)g(\002le)h(system\).)53 b(Any)30
b(other)83 2320 y(links)23 b(to)f(the)f(\002le)i(r)n(emain)h
(unchanged.)101 2511 y Fk(\017)46 b Fo(\(accessible?)g
Fr(path)h(access-mode)h(.)i(mor)n(e-modes)p Fo(\))e Fk(!)d
Fr(boolean)101 2624 y Fk(\017)h Fo(\(access-mode)40 b
Fr(mode-name)p Fo(\))24 b Fk(!)e Fr(access-mode)1297
b Fs(syntax)83 2816 y Fo(Accessible?)50 b Fs(r)n(eturns)31
b(tr)o(ue)g(if)h Fr(path)h Fs(is)f(a)g(\002le)g(that)g(can)g(be)g
(accessed)e(in)i(the)f(listed)g(mode.)83 2929 y(If)d(mor)n(e)f(than)g
(one)g(mode)g(is)g(speci\002ed)f Fo(accessible?)38 b
Fs(r)n(eturns)26 b(tr)o(ue)h(if)h(all)h(of)f(the)e(speci\002ed)83
3042 y(modes)21 b(ar)n(e)i(permitted.)j(The)c Fr(mode-name)p
Fs(s)i(ar)n(e:)k Fo(read)p Fs(,)21 b Fo(write)p Fs(,)f
Fo(execute)p Fs(,)f Fo(exists)p Fs(.)83 3328 y Ff(7.6.4)99
b(File)25 b(information)101 3510 y Fk(\017)46 b Fo(\(get-file-info)39
b Fr(name)p Fo(\))45 b Fk(!)h Fr(\002le-info)101 3623
y Fk(\017)g Fo(\(get-file/link-)o(in)o(fo)39 b Fr(name)p
Fo(\))45 b Fk(!)g Fr(\002le-info)101 3736 y Fk(\017)h
Fo(\(get-port-info)39 b Fr(fd-port)p Fo(\))48 b Fk(!)d
Fr(\002le-info)83 3927 y Fo(Get-file-info)25 b Fs(and)31
b Fo(get-file/link-in)o(fo)25 b Fs(both)30 b(r)n(eturn)h(a)g(\002le)g
(info)h(r)n(ecor)n(d)f(for)g(the)83 4040 y(named)e(\002le.)48
b Fo(Get-file-info)23 b Fs(follows)30 b(symbolic)f(links)h(while)f
Fo(get-file/link-i)o(nf)o(o)83 4153 y Fs(does)20 b(not.)27
b Fo(Get-port-info)16 b Fs(r)n(eturns)21 b(a)h(\002le)g(info)g(r)n
(ecor)n(d)g(for)g(the)f(\002le)g(which)i Fr(port)g Fs(r)n(eads)f(fr)n
(om)83 4266 y(or)e(writes)f(to.)27 b(An)20 b(err)n(or)f(is)i(raised)f
(if)h Fr(fd-port)i Fs(does)18 b(not)i(r)n(ead)g(fr)n(om)h(or)f(write)g
(to)g(a)g(\002le)h(descriptor)-7 b(.)101 4457 y Fk(\017)46
b Fo(\(file-info?)g Fr(x)p Fo(\))f Fk(!)h Fr(boolean)101
4570 y Fk(\017)g Fo(\(file-info-name)39 b Fr(\002le-info)p
Fo(\))46 b Fk(!)f Fr(string)83 4761 y Fo(File-info?)72
b Fs(is)39 b(a)g(pr)n(edicate)g(for)f(\002le-info)i(r)n(ecor)n(ds.)75
b Fo(File-info-name)33 b Fs(is)39 b(the)f(name)83 4874
y(which)d(was)g(used)e(to)g(get)h Fo(file-info)p Fs(,)f(either)h(as)g
(passed)f(to)h Fo(get-file-info)29 b Fs(or)34 b Fo(get-)83
4987 y(file/link-info)p Fs(,)16 b(or)22 b(used)g(to)g(open)f(the)h
(port)f(passed)g(to)h Fo(get-port-info)p Fs(.)101 5179
y Fk(\017)46 b Fo(\(file-info-type)39 b Fr(\002le-info)p
Fo(\))46 b Fk(!)f Fr(\002le-type)101 5291 y Fk(\017)h
Fo(\(file-type?)g Fr(x)p Fo(\))f Fk(!)h Fr(boolean)101
5404 y Fk(\017)g Fo(\(file-type-name)39 b Fr(\002le-type)p
Fo(\))47 b Fk(!)f Fr(symbol)101 5517 y Fk(\017)g Fo(\(file-type)41
b Fr(type)p Fo(\))24 b Fk(!)e Fr(\002le-type)1816 b Fs(syntax)83
5709 y Fo(File-info-type)20 b Fs(r)n(eturns)26 b(the)g(type)f(of)i(the)
f(\002le,)h(as)g(a)g(\002le-type)f(object)h(File)f(types)f(may)i(be)83
5822 y(compar)n(ed)22 b(using)g Fo(eq?)p Fs(.)27 b(The)22
b(valid)i(\002le)f(types)d(ar)n(e:)1748 6071 y(71)p eop
%%Page: 72 78
72 77 bop 1440 561 a Fo(regular)1440 673 y(directory)1440
786 y(character-devi)o(ce)1440 899 y(block-device)1440
1012 y(fifo)1440 1125 y(symbolic-link)1440 1238 y(socket)1440
1351 y(other)166 1546 y(Symbolic-link)17 b Fs(and)22
b Fo(socket)e Fs(ar)n(e)j(not)f(r)n(equir)n(ed)g(by)h(POSIX.)184
1707 y Fk(\017)46 b Fo(\(file-info-devi)o(ce)39 b Fr(\002le-info)p
Fo(\))46 b Fk(!)g Fr(integer)184 1820 y Fk(\017)g Fo(\(file-info-inod)o
(e)39 b Fr(\002le-info)p Fo(\))47 b Fk(!)e Fr(integer)166
1980 y Fs(The)22 b(device)g(and)h(inode)f(numbers)g(uniquely)g
(determine)f(a)i(\002le.)184 2141 y Fk(\017)46 b Fo(\(file-info-link)o
(-c)o(ou)o(nt)39 b Fr(\002le-info)p Fo(\))46 b Fk(!)g
Fr(integer)184 2254 y Fk(\017)g Fo(\(file-info-size)39
b Fr(\002le-info)p Fo(\))46 b Fk(!)f Fr(integer)166 2414
y Fs(These)27 b(r)n(eturn)i(the)f(number)h(of)g(links)g(to)f(a)i
(\002le)f(and)g(the)f(\002le)h(size)g(in)g(bytes.)46
b(The)28 b(size)h(is)g(only)166 2527 y(meaningful)23
b(for)g(r)n(egular)g(\002les.)184 2688 y Fk(\017)46 b
Fo(\(file-info-owne)o(r)39 b Fr(\002le-info)p Fo(\))47
b Fk(!)e Fr(user-id)184 2801 y Fk(\017)h Fo(\(file-info-grou)o(p)39
b Fr(\002le-info)p Fo(\))47 b Fk(!)e Fr(gr)n(oup-id)184
2913 y Fk(\017)h Fo(\(file-info-mode)39 b Fr(\002le-info)p
Fo(\))46 b Fk(!)f Fr(\002le-mode)166 3074 y Fs(These)21
b(r)n(eturn)h(the)g(owner)-7 b(,)21 b(gr)n(oup,)h(and)g(access)h(mode)e
(of)i(a)g(\002le.)184 3235 y Fk(\017)46 b Fo(\(file-info-last)o(-a)o
(cc)o(ess)39 b Fr(\002le-info)p Fo(\))46 b Fk(!)f Fr(time)184
3347 y Fk(\017)h Fo(\(file-info-last)o(-m)o(od)o(ifi)o(ca)o(ti)o(on)39
b Fr(\002le-info)p Fo(\))46 b Fk(!)g Fr(time)184 3460
y Fk(\017)g Fo(\(file-info-last)o(-i)o(nf)o(o-c)o(ha)o(ng)o(e)39
b Fr(\002le-info)p Fo(\))47 b Fk(!)e Fr(time)166 3621
y Fs(These)21 b(r)n(eturn)h(the)g(time)g(the)g(\002le)h(was)f(last)h(r)
n(ead,)f(modi\002ed,)g(or)g(had)h(its)f(status)g(modi\002ed)166
3873 y Ff(7.6.5)99 b(File)25 b(modes)166 4050 y Fs(A)d(\002le)h(mode)f
(is)h(a)g(boxed)e(integer)h(r)n(epr)n(esenting)e(a)j(\002le)g(pr)n
(otection)f(mask.)184 4211 y Fk(\017)46 b Fo(\(file-mode)41
b(permission-name)e(...\))21 b Fk(!)h Fr(\002le-mode)909
b Fs(syntax)184 4324 y Fk(\017)46 b Fo(\(file-mode?)g
Fr(x)p Fo(\))f Fk(!)h Fr(boolean)184 4437 y Fk(\017)g
Fo(\(file-mode+)41 b Fr(\002le-mode)47 b(.)14 b(.)g(.)g
Fo(\))48 b Fk(!)e Fr(\002le-mode)184 4550 y Fk(\017)g
Fo(\(file-mode-)41 b Fr(\002le-mode0)47 b(\002le-mode1)p
Fo(\))h Fk(!)d Fr(\002le-mode)166 4710 y Fo(File-mode)35
b Fs(is)k(syntax)g(for)g(cr)n(eating)g(\002le)g(modes.)76
b(The)39 b(mode-names)f(ar)n(e)i(listed)e(below)-8 b(.)166
4823 y Fo(File-mode?)49 b Fs(is)31 b(a)h(pr)n(edicate)f(for)g(\002le)g
(modes.)52 b Fo(File-mode+)26 b Fs(r)n(eturns)k(a)i(mode)e(that)h(con-)
166 4936 y(tains)25 b(all)h(of)e(permissions)f(of)i(its)f(ar)n
(guments.)32 b Fo(File-mode-)21 b Fs(r)n(eturns)i(a)i(mode)e(that)i
(has)f(all)i(of)166 5049 y(the)c(permissions)f(of)i Fr(\002le-mode0)i
Fs(that)d(ar)n(e)h(not)f(in)h Fr(\002le-mode1)p Fs(.)184
5209 y Fk(\017)46 b Fo(\(file-mode=?)g Fr(\002le-mode0)h(\002le-mode1)p
Fo(\))h Fk(!)d Fr(boolean)184 5322 y Fk(\017)h Fo(\(file-mode<=?)f
Fr(\002le-mode0)j(\002le-mode1)p Fo(\))f Fk(!)e Fr(boolean)184
5435 y Fk(\017)h Fo(\(file-mode>=?)f Fr(\002le-mode0)j(\002le-mode1)p
Fo(\))f Fk(!)e Fr(boolean)166 5596 y Fo(File-mode=?)40
b Fs(r)n(eturns)27 b(tr)o(ue)g(if)i(the)f(two)f(modes)g(ar)n(e)h
(exactly)h(the)e(same.)44 b Fo(File-mode<=?)166 5709
y Fs(r)n(eturns)21 b(tr)o(ue)g(if)i Fr(\002le-mode0)h
Fs(has)e(a)h(subset)e(of)h(the)f(permissions)f(of)j Fr(\002le-mode1)p
Fs(.)29 b Fo(File-mode>=?)166 5822 y Fs(is)23 b Fo(file-mode<=?)f
Fs(with)h(the)f(ar)n(guments)g(r)n(eversed.)1831 6071
y(72)p eop
%%Page: 73 79
73 78 bop 101 573 a Fk(\017)46 b Fo(\(file-mode->int)o(eg)o(er)39
b Fr(\002le-mode)p Fo(\))47 b Fk(!)e Fr(integer)101 686
y Fk(\017)h Fo(\(integer->file-)o(mo)o(de)39 b Fr(integer)p
Fo(\))47 b Fk(!)e Fr(\002le-mode)83 860 y Fo(Integer->file-m)o(od)o(e)c
Fs(and)47 b Fo(file-mode->int)o(ege)o(r)41 b Fs(translate)46
b(\002le)h(modes)f(to)g(and)83 973 y(fr)n(om)27 b(the)f(classic)i(Unix)
f(\002le)g(mode)f(masks.)39 b(These)25 b(may)i(not)f(be)h(the)f(masks)g
(used)f(by)i(the)f(un-)83 1086 y(derlying)c(OS.)596 1304
y(Permission)g(name)100 b(Bit)22 b(mask)596 1417 y Fo(set-uid)407
b(#o4000)119 b Fs(set)21 b(user)h(id)g(when)g(executing)596
1530 y Fo(set-gid)407 b(#o2000)119 b Fs(set)21 b(gr)n(oup)h(id)h(when)e
(executing)596 1643 y Fo(owner-read)242 b(#o0400)119
b Fs(r)n(ead)22 b(by)h(owner)596 1756 y Fo(owner-write)187
b(#o0200)119 b Fs(write)22 b(by)g(owner)596 1869 y Fo(owner-exec)242
b(#o0100)119 b Fs(execute)21 b(\(or)h(sear)n(ch\))h(by)g(owner)596
1982 y Fo(group-read)242 b(#o0040)119 b Fs(r)n(ead)22
b(by)h(gr)n(oup)596 2095 y Fo(group-write)187 b(#o0020)119
b Fs(write)22 b(by)g(gr)n(oup)596 2208 y Fo(group-exec)242
b(#o0010)119 b Fs(execute)21 b(\(or)h(sear)n(ch\))h(by)g(gr)n(oup)596
2320 y Fo(other-read)242 b(#o0004)119 b Fs(r)n(ead)22
b(by)h(others)596 2433 y Fo(other-write)187 b(#o0002)119
b Fs(write)22 b(by)g(others)596 2546 y Fo(other-exec)242
b(#o0001)119 b Fs(execute)21 b(\(or)h(sear)n(ch\))h(by)g(others)711
2772 y(Names)f(for)h(sets)e(of)i(permissions)711 2885
y Fo(owner)98 b(#o0700)f Fs(r)n(ead,)22 b(write,)g(and)g(execute)f(by)i
(owner)711 2997 y Fo(group)98 b(#o0070)f Fs(r)n(ead,)22
b(write,)g(and)g(execute)f(by)i(gr)n(oup)711 3110 y Fo(other)98
b(#o0007)f Fs(r)n(ead,)22 b(write,)g(and)g(execute)f(by)i(others)711
3223 y Fo(read)153 b(#o0444)97 b Fs(r)n(ead)22 b(by)h(anyone)711
3336 y Fo(write)98 b(#o0222)f Fs(write)22 b(by)g(anyone)711
3449 y Fo(exec)153 b(#o0111)97 b Fs(execute)21 b(by)h(anyone)711
3562 y Fo(all)208 b(#o0777)97 b Fs(anything)22 b(by)g(anyone)83
3843 y Fl(7.7)119 b(T)-7 b(ime)83 4056 y Fs(These)21
b(pr)n(ocedur)n(es)g(ar)n(e)i(in)g(str)o(uctur)n(es)e
Fo(posix-time)d Fs(and)23 b Fo(posix)p Fs(.)101 4230
y Fk(\017)46 b Fo(\(make-time)41 b Fr(integer)p Fo(\))47
b Fk(!)e Fr(time)101 4343 y Fk(\017)h Fo(\(current-time\))39
b Fk(!)46 b Fr(time)101 4456 y Fk(\017)g Fo(\(time?)i
Fr(x)p Fo(\))e Fk(!)f Fr(boolean)101 4569 y Fk(\017)h
Fo(\(time-seconds)40 b Fr(time)p Fo(\))45 b Fk(!)h Fr(integer)83
4744 y Fs(A)22 b Fo(time)f Fs(r)n(ecor)n(d)h(contains)h(an)g(integer)e
(that)h(r)n(epr)n(esents)e(time)i(as)h(the)e(number)i(of)f(second)f
(since)83 4856 y(the)32 b(Unix)i(epoch)e(\(00:00:00)k(GMT)-7
b(,)33 b(January)h(1,)i(1970\).)62 b Fo(Make-time)29
b Fs(and)k Fo(current-time)83 4969 y Fs(r)n(eturn)22
b Fo(time)p Fs(s,)f(with)j Fo(make-time)p Fs('s)19 b(using)j(its)h(ar)n
(gument)g(while)h Fo(current-time)p Fs('s)18 b(has)23
b(the)83 5082 y(curr)n(ent)c(time.)27 b Fo(Time?)e Fs(is)20
b(a)g(pr)n(edicate)f(that)g(r)n(ecognizes)g Fo(time)p
Fs(s)f(and)h Fo(time-seconds)14 b Fs(r)n(eturns)83 5195
y(the)22 b(number)g(of)h(seconds)e Fr(time)i Fs(r)n(epr)n(esents.)101
5370 y Fk(\017)46 b Fo(\(time=?)i Fr(time)e(time)p Fo(\))g
Fk(!)f Fr(boolean)101 5483 y Fk(\017)h Fo(\(time<?)i
Fr(time)e(time)p Fo(\))g Fk(!)f Fr(boolean)101 5596 y
Fk(\017)h Fo(\(time<=?)h Fr(time)f(time)p Fo(\))g Fk(!)f
Fr(boolean)101 5709 y Fk(\017)h Fo(\(time>?)i Fr(time)e(time)p
Fo(\))g Fk(!)f Fr(boolean)101 5822 y Fk(\017)h Fo(\(time>=?)h
Fr(time)f(time)p Fo(\))g Fk(!)f Fr(boolean)1748 6071
y Fs(73)p eop
%%Page: 74 80
74 79 bop 166 573 a Fs(These)21 b(perform)h(various)h(comparison)f
(operations)f(on)i(the)f Fo(time)p Fs(s.)184 743 y Fk(\017)46
b Fo(\(time->string)40 b Fr(time)p Fo(\))45 b Fk(!)h
Fr(string)166 912 y Fo(Time->string)17 b Fs(r)n(eturns)22
b(a)h(string)f(r)n(epr)n(esentation)e(of)j Fr(time)g
Fs(in)g(the)f(following)h(form.)331 1098 y Fo("Wed)53
b(Jun)g(30)h(21:49:08)d(1993)331 1211 y(")166 1510 y
Fl(7.8)119 b(I/O)166 1721 y Fs(These)21 b(pr)n(ocedur)n(es)g(ar)n(e)i
(in)g(str)o(uctur)n(es)e Fo(posix-i/o)e Fs(and)j Fo(posix)p
Fs(.)184 1890 y Fk(\017)46 b Fo(\(open-pipe\))41 b Fk(!)k
Fr(input-port)i(+)f(output-port)166 2060 y Fo(Open-pipe)31
b Fs(cr)n(eates)i(a)i(new)f(pipe)g(and)h(r)n(eturns)e(the)h(two)f(ends)
g(as)i(an)g(input)f(port)f(and)i(an)166 2173 y(output)21
b(port.)307 2286 y(A)j Fr(\002le)g(descriptor)j Fs(port)c(\(or)h
Fr(fd-port)p Fs(\))i(is)e(a)h(port)d(that)i(r)n(eads)f(to)g(or)g
(writes)g(fr)n(om)i(an)f(OS)g(\002le)g(de-)166 2399 y(scriptor)-7
b(.)27 b(Fd-ports)21 b(ar)n(e)i(r)n(eturned)e(by)h Fo(open-input-file)p
Fs(,)16 b Fo(open-output-fil)o(e)p Fs(,)g Fo(open-)166
2512 y(file)p Fs(,)21 b Fo(open-pipe)p Fs(,)d(and)23
b(other)e(pr)n(ocedur)n(es.)184 2681 y Fk(\017)46 b Fo(\(fd-port?)h
Fr(port)p Fo(\))f Fk(!)g Fr(boolean)184 2794 y Fk(\017)g
Fo(\(port->fd)41 b Fr(port)p Fo(\))47 b Fk(!)e Fr(integer)i(or)g
Fo(#f)166 2964 y(Fd-port?)c Fs(r)n(eturns)27 b(tr)o(ue)h(if)i(its)e(ar)
n(gument)g(is)h(an)g(fd-port.)45 b Fo(Port->fd)26 b Fs(r)n(eturns)h
(the)h(\002le)h(de-)166 3077 y(scriptor)22 b(associated)g(with)g(or)h
Fo(#f)e Fs(if)j Fr(port)g Fs(is)f(not)f(an)h(fd-port.)184
3246 y Fk(\017)46 b Fo(\(remap-file-des)o(cr)o(ip)o(tor)o(s)39
b Fr(fd-spec)48 b(.)14 b(.)g(.)g Fo(\))166 3416 y(Remap-file-desc)o(ri)
o(pt)o(or)o(s)19 b Fs(r)n(eassigns)k(\002le)h(descriptors)f(to)g
(ports.)32 b(The)24 b Fr(fd-specs)j Fs(indicate)166 3529
y(which)f(port)f(is)h(to)f(be)h(mapped)f(to)g(each)h(\002le)g
(descriptor:)33 b(the)25 b(\002rst)g(gets)f(\002le)i(descriptor)e
Fo(0)p Fs(,)i(the)166 3642 y(second)c(gets)f Fo(1)p Fs(,)h(and)h(so)g
(forth.)28 b(A)23 b Fr(fd-spec)i Fs(is)e(either)f(a)i(port)e(that)h(r)n
(eads)f(fr)n(om)i(or)e(writes)g(to)h(a)g(\002le)166 3755
y(descriptor)-7 b(,)19 b(or)g Fo(#f)p Fs(,)g(with)h Fo(#f)f
Fs(indicating)i(that)e(the)g(corr)n(esponding)f(\002le)i(descriptor)e
(is)i(not)f(used.)166 3868 y(Any)26 b(open)f(ports)g(not)h(listed)g(ar)
n(e)h(marked)f(`close-on-exec'.)39 b(The)26 b(same)h(port)e(may)i(be)g
(moved)166 3981 y(to)22 b(multiple)h(new)f(\002le)h(descriptors.)307
4094 y(For)f(example,)331 4280 y Fo(\(remap-file-desc)o(ri)o(pt)o(or)o
(s)48 b(\(current-output-)o(po)o(rt)o(\))1640 4393 y(#f)1640
4506 y(\(current-input-p)o(or)o(t\))o(\))166 4692 y Fs(moves)30
b(the)g(curr)n(ent)h(output)e(port)g(to)h(\002le)h(descriptor)e
Fo(0)i Fs(and)g(the)f(curr)n(ent)g(input)g(port)g(to)g(\002le)166
4805 y(descriptor)21 b Fo(2)p Fs(.)184 4974 y Fk(\017)46
b Fo(\(dup)e Fr(fd-port)p Fo(\))j Fk(!)f Fr(fd-port)184
5087 y Fk(\017)g Fo(\(dup-switching-)o(mo)o(de)39 b Fr(fd-port)p
Fo(\))47 b Fk(!)f Fr(fd-port)184 5200 y Fk(\017)g Fo(\(dup2)d
Fr(fd-port)48 b(\002le-descriptor)p Fo(\))h Fk(!)d Fr(fd-port)166
5370 y Fs(These)17 b(change)i Fr(fd-port)p Fs('s)j(\002le)d(descriptor)
e(and)i(r)n(eturn)f(a)i(new)e(port)g(that)h(uses)e Fr(ports)p
Fs('s)k(old)e(\002le)g(de-)166 5483 y(scriptor)-7 b(.)30
b Fo(Dup)23 b Fs(uses)f(the)g(lowest)h(unused)f(\002le)h(descriptor)f
(and)i Fo(dup2)e Fs(uses)g(the)h(one)f(pr)n(ovided.)166
5596 y Fo(Dup-switching-m)o(od)o(e)f Fs(is)26 b(the)g(same)h(as)f
Fo(dup)g Fs(except)f(that)i(the)e(r)n(eturned)g(port)h(is)g(an)i(input)
166 5709 y(port)d(if)h(the)f(ar)n(gument)h(was)f(an)h(output)e(port)h
(and)h(vice)g(versa.)38 b(If)25 b(any)h(existing)f(port)g(uses)f(the)
166 5822 y(\002le)f(descriptor)e(passed)g(to)h Fo(dup2)p
Fs(,)e(that)j(port)e(is)i(closed.)1831 6071 y(74)p eop
%%Page: 75 81
75 80 bop 101 573 a Fk(\017)46 b Fo(\(close-all-but)39
b Fr(port)47 b(.)14 b(.)g(.)g Fo(\))83 748 y(Close-all-but)h
Fs(closes)20 b(all)j(\002le)e(descriptors)e(whose)g(associated)h(ports)
g(ar)n(e)h(not)f(passed)g(to)g(it)83 861 y(as)j(ar)n(guments.)101
1036 y Fk(\017)46 b Fo(\(close-on-exec?)e Fr(port)p Fo(\))j
Fk(!)e Fr(boolean)101 1149 y Fk(\017)h Fo(\(set-close-on-e)o(xe)o(c?)o
(!)39 b Fr(port)47 b(boolean)p Fo(\))83 1324 y(Close-on-exec?)20
b Fs(r)n(eturns)d(tr)o(ue)h(if)h Fo(port)d Fs(will)j(be)f(closed)g
(when)f(a)i(new)e(pr)n(ogram)h(is)h(exec'ed.)83 1437
y Fo(Set-close-on-ex)o(ec)o(?!)j Fs(sets)f Fo(port)p
Fs('s)f(close-on-exec)i(\003ag.)101 1612 y Fk(\017)46
b Fo(\(i/o-flags)41 b Fr(port)p Fo(\))46 b Fk(!)g Fr(\002le-options)101
1725 y Fk(\017)g Fo(\(set-i/o-flags!)39 b Fr(port)47
b(\002le-options)p Fo(\))83 1900 y Fs(These)23 b(two)g(pr)n(ocedur)n
(es)g(r)n(ead)h(and)h(write)e(various)i(options)e(for)h
Fo(port)p Fs(.)32 b(The)23 b(options)g(that)h(can)83
2013 y(be)30 b(r)n(ead)g(ar)n(e)g Fo(append)p Fs(,)f
Fo(nonblocking)p Fs(,)d Fo(read-only)p Fs(,)i Fo(write-only)p
Fs(,)f(and)j Fo(read/write)p Fs(.)83 2126 y(Only)23 b(the)f
Fo(append)e Fs(and)j Fo(nonblocking)17 b Fs(can)24 b(be)e(written.)101
2301 y Fk(\017)46 b Fo(\(port-is-a-term)o(in)o(al)o(?)f
Fr(port)p Fo(\))h Fk(!)g Fr(boolean)101 2414 y Fk(\017)g
Fo(\(port-terminal-)o(na)o(me)39 b Fr(port)p Fo(\))46
b Fk(!)g Fr(string)83 2589 y Fo(Port-is-a-termi)o(na)o(l?)27
b Fs(r)n(eturns)c(tr)o(ue)h(if)i Fr(port)g Fs(has)e(an)h(underlying)e
(\002le)i(descriptor)e(that)h(is)83 2702 y(associated)g(with)h(a)h
(terminal.)36 b(For)24 b(such)h(ports)f Fo(port-terminal-)o(na)o(me)19
b Fs(r)n(eturns)24 b(the)g(name)83 2815 y(of)f(the)e(terminal,)j(for)e
(all)i(others)d(it)i(r)n(eturns)e Fo(#f)p Fs(.)83 3119
y Fl(7.9)119 b(Regular)30 b(expressions)83 3332 y Fs(The)25
b(pr)n(ocedur)n(es)f(in)i(this)f(section)g(pr)n(ovide)g(access)g(to)g
(POSIX)g(r)n(egular)h(expr)n(ession)e(matching.)83 3445
y(The)c(r)n(egular)h(expr)n(ession)d(syntax)i(and)g(semantics)h(ar)n(e)
g(far)g(too)f(complex)g(to)g(be)h(described)e(her)n(e.)83
3558 y(Because)25 b(the)g(C)h(interface)g(uses)f(zer)n(o)h(bytes)e(for)
i(marking)g(the)f(ends)g(of)h(strings,)f(patterns)f(and)83
3671 y(strings)d(that)i(contain)g(zer)n(o)f(bytes)g(will)i(not)d(work)h
(corr)n(ectly)-10 b(.)224 3785 y(These)21 b(pr)n(ocedur)n(es)g(ar)n(e)i
(in)g(str)o(uctur)n(es)e Fo(posix-regexps)c Fs(and)23
b Fo(posix)p Fs(.)224 3899 y(An)28 b(abstract)g(data)g(type)e(for)i(cr)
n(eating)g(POSIX)g(r)n(egular)g(expr)n(essions)d(is)j(described)f(in)h
(sec-)83 4012 y(tion)22 b(5.14.)101 4187 y Fk(\017)46
b Fo(\(make-regexp)40 b Fr(string)47 b(.)j(r)n(egexp-options)p
Fo(\))g Fk(!)c Fr(r)n(egexp)101 4300 y Fk(\017)g Fo(\(regexp-option)39
b Fr(option-name)p Fo(\))24 b Fk(!)f Fr(r)n(egexp-option)1088
b Fs(syntax)83 4475 y Fo(Make-regexp)20 b Fs(makes)k(a)h(new)f(r)n
(egular)g(expr)n(ession,)f(using)h Fr(string)i Fs(as)f(the)f(pattern.)
32 b(The)24 b(pos-)83 4588 y(sible)f(option)f(names)g(ar)n(e:)895
4807 y Fo(extended)259 b Fs(use)22 b(the)g(extended)e(patterns)895
4920 y Fo(ignore-case)94 b Fs(ignor)n(e)22 b(case)h(when)f(matching)895
5032 y Fo(submatches)149 b Fs(r)n(eport)22 b(submatches)895
5145 y Fo(newline)314 b Fs(tr)n(eat)23 b(newlines)e(specially)224
5358 y(The)31 b(r)n(egular)g(expr)n(ession)f(is)h(not)f(compiled)i
(until)f(it)h(matched)f(against)g(a)h(string,)h(so)d(any)83
5471 y(err)n(ors)22 b(in)h(the)e(pattern)h(string)g(will)i(not)d(be)i
(r)n(eported)d(until)j(that)g(point.)101 5646 y Fk(\017)46
b Fo(\(regexp?)h Fr(x)p Fo(\))f Fk(!)f Fr(boolean)83
5822 y Fs(This)22 b(is)h(a)g(pr)n(edicate)f(for)h(r)n(egular)g(expr)n
(essions.)1748 6071 y(75)p eop
%%Page: 76 82
76 81 bop 184 573 a Fk(\017)46 b Fo(\(regexp-match)40
b Fr(r)n(egexp)48 b(string)f(submatches?)53 b(starts-line?)h
(ends-line?)p Fo(\))457 686 y Fk(!)g Fr(boolean)24 b(or)g(list)g(of)f
(matches)184 799 y Fk(\017)46 b Fo(\(match?)i Fr(x)p
Fo(\))d Fk(!)h Fr(boolean)184 912 y Fk(\017)g Fo(\(match-start)40
b Fr(match)p Fo(\))46 b Fk(!)f Fr(integer)184 1024 y
Fk(\017)h Fo(\(match-end)41 b Fr(match)p Fo(\))46 b Fk(!)f
Fr(integer)166 1196 y Fo(Regexp-match)30 b Fs(matches)k(the)g(r)n
(egular)h(expr)n(ession)e(against)i(the)g(characters)g(in)g
Fr(string)p Fs(.)66 b(If)166 1308 y(the)28 b(string)f(does)g(not)g
(match)j(the)d(r)n(egular)i(expr)n(ession,)e Fo(regexp-match)c
Fs(r)n(eturns)k Fo(#f)p Fs(.)45 b(If)28 b(the)166 1421
y(string)h(does)g(match,)k(then)c(a)i(list)g(of)f(match)h(r)n(ecor)n
(ds)f(is)g(r)n(eturned)f(if)i Fr(submatches?)53 b Fs(is)30
b(tr)o(ue,)h(or)166 1534 y Fo(#t)f Fs(is)i(r)n(eturned)d(if)j(it)g(is)f
(not.)53 b(Each)32 b(match)g(r)n(ecor)n(d)f(contains)g(the)g(index)f
(of)i(the)e(character)i(at)166 1647 y(the)27 b(beginning)g(of)g(the)g
(match)h(and)g(one)e(mor)n(e)i(than)f(the)g(index)g(of)g(the)g
(character)h(at)g(the)e(end.)166 1760 y(The)h(\002rst)g(match)i(r)n
(ecor)n(d)e(gives)g(the)g(location)i(of)e(the)g(substring)g(that)g
(matched)h Fr(r)n(egexp)p Fs(.)46 b(If)28 b(the)166 1873
y(pattern)19 b(in)i Fr(r)n(egexp)j Fs(contained)c(submatches,)g(then)f
(the)h(r)n(esults)f(of)i(these)e(ar)n(e)h(r)n(eturned)f(in)i(or)n(der)
-7 b(,)166 1986 y(with)29 b(a)g(match)g(r)n(ecor)n(ds)f(r)n(eporting)f
(submatches)h(that)g(succeeded)f(and)h Fo(#f)g Fs(in)h(place)g(of)g
(those)166 2099 y(that)22 b(did)h(not.)307 2212 y Fr(Starts-line?)45
b Fs(should)26 b(be)h(tr)o(ue)g(if)h Fr(string)g Fs(starts)e(at)i(the)e
(beginning)h(of)g(a)h(line)g(and)f Fr(ends-line?)166
2325 y Fs(should)22 b(be)g(tr)o(ue)g(if)i(it)e(ends)g(one.)166
2623 y Fl(7.10)119 b(C)30 b(to)g(Scheme)g(correspondence)166
2834 y Fs(The)c(following)h(table)g(lists)f(the)g(Scheme)g(pr)n(ocedur)
n(es)f(that)i(corr)n(espond)d(to)i(particular)i(C)f(pr)n(o-)166
2947 y(cedur)n(es.)g(Not)21 b(all)j(of)f(the)f(Scheme)g(pr)n(ocedur)n
(es)f(listed)h(ar)n(e)h(part)f(of)h(the)e(POSIX)h(interface.)308
3151 y(C)h(pr)n(ocedur)n(e)455 b(Scheme)23 b(pr)n(ocedur)n(e\(s\))308
3264 y Fo(access)624 b(accessible?)308 3377 y(chdir)679
b(set-working-dire)o(ct)o(or)o(y!)308 3490 y(close)g(close-input-port)o
(,)48 b(close-output-po)o(rt,)1372 3603 y(close-channel,)g
(close-socket)308 3716 y(closedir)514 b(close-directory-)o(st)o(re)o
(am)308 3829 y(creat)679 b(open-file)308 3942 y(ctime)g(time->string)
308 4055 y(dup)789 b(dup,)53 b(dup-switching-m)o(od)o(e)308
4168 y(dup2)734 b(dup2)308 4281 y(exec[l|v][e|p|)o Fg(\017)p
Fo(])93 b(exec,)53 b(exec-with-envi)o(ro)o(nme)o(nt)o(,)1372
4393 y(exec-file,)d(exec-file-with)o(-e)o(nv)o(ir)o(onm)o(en)o(t,)1372
4506 y(exec-with-alia)o(s)p 313 4619 28 4 v 341 4619
a(exit)701 b(exit)308 4732 y(fcntl)679 b(io-flags,)51
b(set-io-flags!,)1372 4845 y(close-on-exec,)d(set-close-on-e)o(xe)o(c!)
308 4958 y(fork)734 b(fork,)53 b(fork-and-forge)o(t)308
5071 y(fstat)679 b(get-port-info)308 5184 y(getcwd)624
b(working-director)o(y)308 5297 y(getegid)569 b(get-effective-gr)o(ou)o
(p-)o(id)308 5410 y(getenv)624 b(lookup-environme)o(nt)o(-v)o(ar)o(iab)
o(le)o(,)1372 5523 y(environment-al)o(is)o(t)308 5635
y(geteuid)569 b(get-effective-us)o(er)o(-i)o(d)308 5748
y(getgid)624 b(get-group-id)308 5861 y(getgroups)459
b(get-groups)1831 6071 y Fs(76)p eop
%%Page: 77 83
77 82 bop 225 573 a Fs(C)23 b(pr)n(ocedur)n(e)455 b(Scheme)23
b(pr)n(ocedur)n(e\(s\))225 686 y Fo(getlogin)514 b(get-login-name)225
799 y(getpid)624 b(get-process-id)225 912 y(getppid)569
b(get-parent-proce)o(ss)o(-i)o(d)225 1024 y(getuid)624
b(get-user-id)225 1137 y(isatty)g(port-is-a-termin)o(al)o(?)225
1250 y(link)734 b(link)225 1363 y(lstat)679 b(get-file/link-in)o(fo)225
1476 y(mkdir)g(make-directory)225 1589 y(mkfifo)624 b(make-fifo)225
1702 y(open)734 b(open-file)225 1815 y(opendir)569 b(open-directory-s)o
(tr)o(ea)o(m)225 1928 y(pipe)734 b(open-pipe)225 2041
y(read)g(read-char,)50 b(read-block)225 2154 y(readdir)569
b(read-directory-s)o(tr)o(ea)o(m)225 2266 y(rename)624
b(rename)225 2379 y(rmdir)679 b(remove-directory)225
2492 y(setgid)624 b(set-group-id!)225 2605 y(setuid)g(set-user-id!)225
2718 y(stat)734 b(get-file-info)225 2831 y(time)g(current-time)225
2944 y(ttyname)569 b(port-terminal-na)o(me)225 3057 y(umask)679
b(set-file-creatio)o(n-)o(ma)o(sk)o(!)225 3170 y(uname)g(os-name,)51
b(os-node-name,)1289 3283 y(os-release-nam)o(e,)d(os-version-nam)o(e,)
1289 3396 y(machine-name)225 3509 y(unlink)624 b(unlink)225
3621 y(waitpid)569 b(wait-for-child-p)o(ro)o(ce)o(ss)225
3734 y(write)679 b(write-char,)50 b(write-block)1748
6071 y Fs(77)p eop
%%Page: 78 84
78 83 bop 166 1196 a Fn(Appendix)44 b(A)166 1611 y Fq(ASCII)52
b(character)h(encoding)166 2072 y Fs(\223ASCII\224)39
b(stands)f(for)h(\223American)h(Standar)n(d)f(Code)f(for)h(Information)
g(Inter)n(change\224.)77 b(The)166 2185 y(ASCII)28 b(standar)n(d)h(is)g
(a)h(seven-bit)f(code)f(published)h(by)g(the)f(United)g(States)g(of)h
(America)h(Stan-)166 2298 y(dar)n(ds)21 b(Institute)e(\(USASI\))h(in)h
(1968.)30 b(The)20 b(ASCII)g(encoding)h(forms)f(the)h(\002rst)f(half)i
(of)f(ISO-8859-1)166 2411 y(\(Latin1\))j(which)f(in)g(turn)f(forms)g
(the)g(\002rst)g(page)g(of)h(ISO)f(10646)j(\(Unicode\).)307
2524 y(The)32 b(Scheme)h(48)h(pr)n(ocedur)n(es)d Fo(char->ascii)d
Fs(and)33 b Fo(ascii->char)28 b Fs(\(section)k(5.1\))i(give)166
2637 y(access)23 b(to)f(the)f(ASCII)h(encoding.)222 2832
y Fc(n)270 2844 y Fb(10)440 2832 y Fc(n)488 2844 y Fb(16)1018
2832 y Fc(Unicode)f(name)540 b(n)2140 2844 y Fb(10)2310
2832 y Fc(n)2358 2844 y Fb(16)2794 2832 y Fc(Unicode)20
b(name)291 2931 y Fa(0)168 b(0)99 b Fc(NUL)175 b(null)947
b Fa(64)118 b(40)99 b(@)216 b Fc(commer)o(cial)20 b(at)291
3031 y Fa(1)168 b(1)99 b Fc(SOH)182 b(start)21 b(of)f(heading)516
b Fa(65)118 b(41)99 b(A)216 b Fc(latin)21 b(capital)f(letter)g(a)291
3131 y Fa(2)168 b(2)99 b Fc(STX)210 b(start)21 b(of)f(text)678
b Fa(66)118 b(42)99 b(B)216 b Fc(latin)21 b(capital)f(letter)g(b)291
3230 y Fa(3)168 b(3)99 b Fc(ETX)203 b(end)21 b(of)g(text)702
b Fa(67)118 b(43)99 b(C)216 b Fc(latin)21 b(capital)f(letter)g(c)291
3330 y Fa(4)168 b(4)99 b Fc(EOT)193 b(end)21 b(of)g(transmission)370
b Fa(68)118 b(44)99 b(D)216 b Fc(latin)21 b(capital)f(letter)g(d)291
3429 y Fa(5)168 b(5)99 b Fc(ENQ)175 b(enquiry)806 b Fa(69)118
b(45)99 b(E)216 b Fc(latin)21 b(capital)f(letter)g(e)291
3529 y Fa(6)168 b(6)99 b Fc(ACK)176 b(acknowledge)605
b Fa(70)118 b(46)99 b(F)216 b Fc(latin)21 b(capital)f(letter)g(f)291
3629 y Fa(7)168 b(7)99 b Fc(BEL)207 b(bell)959 b Fa(71)118
b(47)99 b(G)216 b Fc(latin)21 b(capital)f(letter)g(g)291
3728 y Fa(8)168 b(8)99 b Fc(BS)265 b(backspace)718 b
Fa(72)118 b(48)99 b(H)216 b Fc(latin)21 b(capital)f(letter)g(h)291
3828 y Fa(9)168 b(9)99 b Fc(HT)240 b(horizontal)22 b(tabulation)318
b Fa(73)118 b(49)99 b(I)216 b Fc(latin)21 b(capital)f(letter)g(i)241
3928 y Fa(10)168 b(A)99 b Fc(LF)263 b(line)21 b(feed)777
b Fa(74)118 b(4A)99 b(J)216 b Fc(latin)21 b(capital)f(letter)g(j)241
4027 y Fa(11)168 b(B)99 b Fc(VT)249 b(vertical)20 b(tabulation)424
b Fa(75)118 b(4B)99 b(K)216 b Fc(latin)21 b(capital)f(letter)g(k)241
4127 y Fa(12)168 b(C)99 b Fc(FF)268 b(form)21 b(feed)734
b Fa(76)118 b(4C)99 b(L)216 b Fc(latin)21 b(capital)f(letter)g(l)241
4227 y Fa(13)168 b(D)99 b Fc(CR)246 b(carriage)20 b(r)o(eturn)546
b Fa(77)118 b(4D)99 b(M)216 b Fc(latin)21 b(capital)f(letter)g(m)241
4326 y Fa(14)168 b(E)99 b Fc(SO)251 b(shift)21 b(out)788
b Fa(78)118 b(4E)99 b(N)216 b Fc(latin)21 b(capital)f(letter)g(n)241
4426 y Fa(15)168 b(F)99 b Fc(SI)288 b(shift)21 b(in)838
b Fa(79)118 b(4F)99 b(O)216 b Fc(latin)21 b(capital)f(letter)g(o)241
4525 y Fa(16)118 b(10)99 b Fc(DLE)194 b(data)20 b(link)h(escape)504
b Fa(80)118 b(50)99 b(P)216 b Fc(latin)21 b(capital)f(letter)g(p)241
4625 y Fa(17)118 b(11)99 b Fc(DC1)195 b(device)20 b(contr)o(ol)h(one)
422 b Fa(81)118 b(51)99 b(Q)216 b Fc(latin)21 b(capital)f(letter)g(q)
241 4725 y Fa(18)118 b(12)99 b Fc(DC2)195 b(device)20
b(contr)o(ol)h(two)414 b Fa(82)118 b(52)99 b(R)216 b
Fc(latin)21 b(capital)f(letter)g(r)241 4824 y Fa(19)118
b(13)99 b Fc(DC3)195 b(device)20 b(contr)o(ol)h(thr)o(ee)368
b Fa(83)118 b(53)99 b(S)216 b Fc(latin)21 b(capital)f(letter)g(s)241
4924 y Fa(20)118 b(14)99 b Fc(DC4)195 b(device)20 b(contr)o(ol)h(four)
399 b Fa(84)118 b(54)99 b(T)216 b Fc(latin)21 b(capital)f(letter)g(t)
241 5024 y Fa(21)118 b(15)99 b Fc(NAK)166 b(negative)21
b(acknowledge)270 b Fa(85)118 b(55)99 b(U)216 b Fc(latin)21
b(capital)f(letter)g(u)241 5123 y Fa(22)118 b(16)99 b
Fc(SYN)192 b(synchr)o(onous)22 b(idle)463 b Fa(86)118
b(56)99 b(V)216 b Fc(latin)21 b(capital)f(letter)g(v)241
5223 y Fa(23)118 b(17)99 b Fc(ETB)207 b(end)21 b(of)g(transmission)h
(block)150 b Fa(87)118 b(57)99 b(W)216 b Fc(latin)21
b(capital)f(letter)g(w)241 5322 y Fa(24)118 b(18)99 b
Fc(CAN)167 b(cancel)865 b Fa(88)118 b(58)99 b(X)216 b
Fc(latin)21 b(capital)f(letter)g(x)241 5422 y Fa(25)118
b(19)99 b Fc(EM)230 b(end)21 b(of)g(medium)528 b Fa(89)118
b(59)99 b(Y)216 b Fc(latin)21 b(capital)f(letter)g(y)241
5522 y Fa(26)118 b(1A)99 b Fc(SUB)200 b(substitute)732
b Fa(90)118 b(5A)99 b(Z)216 b Fc(latin)21 b(capital)f(letter)g(z)241
5621 y Fa(27)118 b(1B)99 b Fc(ESC)206 b(escape)849 b
Fa(91)118 b(5B)99 b([)216 b Fc(left)20 b(squar)o(e)g(bracket)241
5721 y Fa(28)118 b(1C)99 b Fc(FS)270 b(\002le)21 b(separator)611
b Fa(92)118 b(5C)99 b(\\)216 b Fc(r)o(everse)19 b(solidus)241
5821 y Fa(29)118 b(1D)99 b Fc(GS)253 b(gr)o(oup)21 b(separator)502
b Fa(93)118 b(5D)99 b(])216 b Fc(right)21 b(squar)o(e)f(bracket)1831
6071 y Fs(78)p eop
%%Page: 79 85
79 84 bop 139 573 a Fc(n)187 585 y Fb(10)357 573 y Fc(n)405
585 y Fb(16)935 573 y Fc(Unicode)21 b(name)540 b(n)2057
585 y Fb(10)2227 573 y Fc(n)2275 585 y Fb(16)2711 573
y Fc(Unicode)20 b(name)158 672 y Fa(30)118 b(1E)99 b
Fc(RS)261 b(r)o(ecor)o(d)19 b(separator)490 b Fa(94)118
b(5E)99 b(\210)216 b Fc(cir)o(cum\003ex)20 b(accent)158
772 y Fa(31)118 b(1F)99 b Fc(US)251 b(unit)22 b(separator)575
b Fa(95)118 b(5F)99 b(_)216 b Fc(low)21 b(line)158 872
y Fa(32)118 b(20)99 b Fc(SP)-8 b(ACE)99 b(space)889 b
Fa(96)118 b(60)99 b(`)216 b Fc(grave)20 b(accent)158
971 y Fa(33)118 b(21)99 b(!)310 b Fc(exclamation)21 b(mark)433
b Fa(97)118 b(61)99 b(a)216 b Fc(latin)21 b(small)g(letter)f(a)158
1071 y Fa(34)118 b(22)99 b(")310 b Fc(quotation)22 b(mark)523
b Fa(98)118 b(62)99 b(b)216 b Fc(latin)21 b(small)g(letter)f(b)158
1171 y Fa(35)118 b(23)99 b(#)310 b Fc(number)21 b(sign)629
b Fa(99)118 b(63)99 b(c)216 b Fc(latin)21 b(small)g(letter)f(c)158
1270 y Fa(36)118 b(24)99 b($)310 b Fc(dollar)21 b(sign)650
b Fa(100)118 b(64)99 b(d)216 b Fc(latin)21 b(small)g(letter)f(d)158
1370 y Fa(37)118 b(25)99 b(\045)310 b Fc(per)o(cent)20
b(sign)596 b Fa(101)118 b(65)99 b(e)216 b Fc(latin)21
b(small)g(letter)f(e)158 1469 y Fa(38)118 b(26)99 b(&)310
b Fc(ampersand)629 b Fa(102)118 b(66)99 b(f)216 b Fc(latin)21
b(small)g(letter)f(f)158 1569 y Fa(39)118 b(27)99 b(')310
b Fc(apostr)o(ophe)629 b Fa(103)118 b(67)99 b(g)216 b
Fc(latin)21 b(small)g(letter)f(g)158 1669 y Fa(40)118
b(28)99 b(\()310 b Fc(left)21 b(par)o(enthesis)482 b
Fa(104)118 b(68)99 b(h)216 b Fc(latin)21 b(small)g(letter)f(h)158
1768 y Fa(41)118 b(29)99 b(\))310 b Fc(right)22 b(par)o(enthesis)422
b Fa(105)118 b(69)99 b(i)216 b Fc(latin)21 b(small)g(letter)f(i)158
1868 y Fa(42)118 b(2A)99 b(*)310 b Fc(asterisk)761 b
Fa(106)118 b(6A)99 b(j)216 b Fc(latin)21 b(small)g(letter)f(j)158
1968 y Fa(43)118 b(2B)99 b(+)310 b Fc(plus)21 b(sign)710
b Fa(107)118 b(6B)99 b(k)216 b Fc(latin)21 b(small)g(letter)f(k)158
2067 y Fa(44)118 b(2C)99 b(,)310 b Fc(comma)773 b Fa(108)118
b(6C)99 b(l)216 b Fc(latin)21 b(small)g(letter)f(l)158
2167 y Fa(45)118 b(2D)99 b(-)310 b Fc(hyphen-minus)505
b Fa(109)118 b(6D)99 b(m)216 b Fc(latin)21 b(small)g(letter)f(m)158
2267 y Fa(46)118 b(2E)99 b(.)310 b Fc(full)21 b(stop)739
b Fa(110)118 b(6E)99 b(n)216 b Fc(latin)21 b(small)g(letter)f(n)158
2366 y Fa(47)118 b(2F)99 b(/)310 b Fc(solidus)779 b Fa(111)118
b(6F)99 b(o)216 b Fc(latin)21 b(small)g(letter)f(o)158
2466 y Fa(48)118 b(30)99 b(0)310 b Fc(digit)21 b(zer)o(o)691
b Fa(112)118 b(70)99 b(p)216 b Fc(latin)21 b(small)g(letter)f(p)158
2565 y Fa(49)118 b(31)99 b(1)310 b Fc(digit)21 b(one)717
b Fa(113)118 b(71)99 b(q)216 b Fc(latin)21 b(small)g(letter)f(q)158
2665 y Fa(50)118 b(32)99 b(2)310 b Fc(digit)21 b(two)709
b Fa(114)118 b(72)99 b(r)216 b Fc(latin)21 b(small)g(letter)f(r)158
2765 y Fa(51)118 b(33)99 b(3)310 b Fc(digit)21 b(thr)o(ee)663
b Fa(115)118 b(73)99 b(s)216 b Fc(latin)21 b(small)g(letter)f(s)158
2864 y Fa(52)118 b(34)99 b(4)310 b Fc(digit)21 b(four)694
b Fa(116)118 b(74)99 b(t)216 b Fc(latin)21 b(small)g(letter)f(t)158
2964 y Fa(53)118 b(35)99 b(5)310 b Fc(digit)21 b(\002ve)713
b Fa(117)118 b(75)99 b(u)216 b Fc(latin)21 b(small)g(letter)f(u)158
3064 y Fa(54)118 b(36)99 b(6)310 b Fc(digit)21 b(six)748
b Fa(118)118 b(76)99 b(v)216 b Fc(latin)21 b(small)g(letter)f(v)158
3163 y Fa(55)118 b(37)99 b(7)310 b Fc(digit)21 b(seven)640
b Fa(119)118 b(77)99 b(w)216 b Fc(latin)21 b(small)g(letter)f(w)158
3263 y Fa(56)118 b(38)99 b(8)310 b Fc(digit)21 b(eight)665
b Fa(120)118 b(78)99 b(x)216 b Fc(latin)21 b(small)g(letter)f(x)158
3362 y Fa(57)118 b(39)99 b(9)310 b Fc(digit)21 b(nine)690
b Fa(121)118 b(79)99 b(y)216 b Fc(latin)21 b(small)g(letter)f(y)158
3462 y Fa(58)118 b(3A)99 b(:)310 b Fc(colon)844 b Fa(122)118
b(7A)99 b(z)216 b Fc(latin)21 b(small)g(letter)f(z)158
3562 y Fa(59)118 b(3B)99 b(;)310 b Fc(semicolon)672 b
Fa(123)118 b(7B)99 b({)216 b Fc(left)20 b(curly)h(bracket)158
3661 y Fa(60)118 b(3C)99 b(<)310 b Fc(less-than)21 b(sign)542
b Fa(124)118 b(7C)99 b(|)216 b Fc(vertical)20 b(line)158
3761 y Fa(61)118 b(3D)99 b(=)310 b Fc(equals)21 b(sign)632
b Fa(125)118 b(7D)99 b(})216 b Fc(right)21 b(curly)g(bracket)158
3861 y Fa(62)118 b(3E)99 b(>)310 b Fc(gr)o(eater)o(-than)19
b(sign)419 b Fa(126)118 b(7E)99 b(\230)216 b Fc(tilde)158
3960 y Fa(63)118 b(3F)99 b(?)310 b Fc(question)22 b(mark)512
b Fa(127)118 b(7F)99 b Fc(DEL)h(delete)1748 6071 y Fs(79)p
eop
%%Page: 80 86
80 85 bop 166 1237 a Fq(Bibliography)211 1699 y Fs([1])47
b(Information)18 b(technology)f(\226)i(Portable)g(Operating)f(System)f
(Interface)h(\(POSIX\).)23 b(ISO/IEC)363 1811 y(9945-1)i(ANSI/IEEE)20
b(Std)i(1003.1.)34 b(2nd)23 b(Ed.,)e(1996.)211 1999 y([2])47
b(W)-5 b(illiam)25 b(Clinger)e(and)g(Jonathan)g(Rees.)30
b(Macr)n(os)23 b(that)g(work.)31 b Fr(Principles)24 b(of)g(Pr)n
(ogramming)363 2112 y(Languages)p Fs(,)f(January)g(1991.)211
2300 y([3])47 b(W)-5 b(illiam)26 b(Clinger)d(and)g(Jonathan)h(Rees)d
(\(editors\).)33 b(Revised)2514 2267 y Fm(4)2576 2300
y Fs(r)n(eport)22 b(on)h(the)f(algorithmic)363 2413 y(language)g
(Scheme.)32 b Fr(LISP)22 b(Pointers)i Fs(IV\(3\):1\22655,)g
(July-September)d(1991.)211 2600 y([4])47 b(Pavel)21
b(Curtis)g(and)f(James)h(Rauen.)28 b(A)20 b(module)g(system)f(for)h
(Scheme.)28 b Fr(ACM)19 b(Confer)n(ence)j(on)363 2713
y(Lisp)h(and)g(Functional)g(Pr)n(ogramming,)h Fs(pages)d(13\22619,)k
(1990.)211 2901 y([5])47 b(Richar)n(d)20 b(Kelsey)f(and)h(Jonathan)g
(Rees.)k(A)c(T)-8 b(ractable)20 b(Scheme)f(Implementation.)25
b Fr(Lisp)c(and)363 3014 y(Symbolic)i(Computation)h Fs(7:315\226335)i
(1994.)211 3201 y([6])47 b(Richar)n(d)34 b(Kelsey)-10
b(,)35 b(W)-5 b(ill)35 b(Clinger)-7 b(,)36 b(Jonathan)e(Rees)e
(\(editors\).)66 b(Revised)2945 3168 y Fm(5)3016 3201
y Fs(Report)32 b(on)h(the)363 3314 y(Algorithmic)c(Language)e(Scheme.)
49 b Fr(Higher-Order)32 b(and)c(Symbolic)i(Computation,)g
Fs(V)-10 b(ol.)27 b(1)-5 b(1,)363 3427 y(No.)20 b(1,)h(September)-7
b(,)19 b(1998.)30 b(and)21 b Fr(ACM)f(SIGPLAN)e(Notices)p
Fs(,)23 b(V)-10 b(ol.)20 b(33,)i(No.)d(9,)j(October)-7
b(,)20 b(1998.)211 3615 y([7])47 b(David)25 b(MacQueen.)38
b(Modules)22 b(for)i(Standar)n(d)g(ML.)37 b Fr(ACM)23
b(Confer)n(ence)j(on)e(Lisp)h(and)f(Func-)363 3728 y(tional)g(Pr)n
(ogramming,)g Fs(1984.)211 3915 y([8])47 b(Jonathan)19
b(Rees)e(and)h(Br)o(uce)g(Donald.)24 b(Pr)n(ogram)19
b(mobile)g(r)n(obots)e(in)i(Scheme.)k Fr(International)363
4028 y(Confer)n(ence)h(on)e(Robotics)j(and)e(Automation,)f
Fs(IEEE,)f(1992.)211 4216 y([9])47 b(Mark)34 b(A.)g(Sheldon)f(and)h
(David)h(K.)f(Gif)n(for)n(d.)71 b(Static)34 b(dependent)d(types)h(for)i
(\002rst-class)363 4329 y(modules.)29 b Fr(ACM)21 b(Confer)n(ence)i(on)
f(Lisp)g(and)g(Functional)g(Pr)n(ogramming,)h Fs(pages)e(20\22629,)i
(1990.)166 4516 y([10])47 b(Olin)59 b(Shivers)e(and)h(Brian)g(D.)g
(Calrstr)n(om.)145 b(Scsh)58 b(Refer)n(ence)e(Manual,)68
b(scsh)57 b(r)n(e-)363 4629 y(lease)49 b(0.4.)120 b(MIT)49
b(Laboratory)g(for)g(Computer)g(Science)119 b(Also)49
b(available)k(at)d(URL)363 4742 y(http://swissnet.ai.mit.edu/scsh/.)171
4930 y([1)-5 b(1])47 b(Olin)30 b(Shivers.)51 b(A)29 b(universal)g
(scripting)f(framework,)i(or)e(Lambda:)40 b(the)28 b(ultimate)h
(\223little)363 5043 y(language\224.)66 b Fr(Concurr)n(ency)33
b(and)g(Parallelism,)38 b(Pr)n(ogramming,)f(Networking,)f(and)e
(Security)m(,)363 5156 y Fs(pages)21 b(254\226265,)26
b(Springer)21 b(1996.)35 b(Joxan)23 b(Jaf)n(far)h(and)f(Roland)f(H.)g
(C.)h(Y)-8 b(ap,)22 b(editors.)1831 6071 y(80)p eop
%%Page: 81 87
81 86 bop 83 1045 a Fq(Index)83 1472 y Fs(The)29 b(principal)h(entry)e
(for)h(each)h(term,)g(pr)n(oce-)83 1585 y(dur)n(e,)25
b(or)g(keywor)n(d)e(is)i(listed)g(\002rst,)f(separated)83
1698 y(fr)n(om)f(the)f(other)f(entries)h(by)g(a)h(semicolon.)83
2009 y Fo(accessible?)63 b Fs(71)83 2123 y Fo(add-signal-queu)o(e-)o
(si)o(gn)o(al!)e Fs(67)83 2236 y Fo(any-match?)j Fs(47)83
2350 y Fo(arithmetic-shif)o(t)e Fs(28)83 2463 y Fo(array)k
Fs(30)83 2576 y Fo(array->vector)c Fs(30)83 2690 y Fo(array-dimension)o
(s)g Fs(30)83 2803 y Fo(array-ref)i Fs(30)83 2917 y Fo(array-set!)g
Fs(30)83 3030 y Fo(array?)h Fs(30)83 3143 y Fo(ascii->char)e
Fs(28)83 3257 y Fo(ascii-limit)g Fs(28)83 3370 y Fo(ascii-range)g
Fs(45)83 3484 y Fo(ascii-ranges)g Fs(45)83 3597 y Fo(ascii-whitespac)o
(es)e Fs(28)83 3802 y Fo(bit-count)j Fs(29)83 3915 y
Fo(bitwise-and)f Fs(28)83 4029 y Fo(bitwise-ior)g Fs(28)83
4142 y Fo(bitwise-not)g Fs(28)83 4256 y Fo(bitwise-xor)g
Fs(28)83 4369 y Fo(byte-vector)g Fs(29)83 4482 y Fo(byte-vector-len)o
(gt)o(h)f Fs(29)83 4596 y Fo(byte-vector-ref)f Fs(29)83
4709 y Fo(byte-vector-set)o(!)h Fs(29)83 4823 y Fo(byte-vector?)h
Fs(29)83 5028 y Fo(call-external)f Fs(54;)24 b(53)83
5141 y Fo(call-external-v)o(al)o(ue)62 b Fs(53)83 5254
y Fo(call-imported-b)o(in)o(di)o(ng)g Fs(53)83 5368 y
Fo(cell-ref)j Fs(29)83 5481 y Fo(cell-set!)f Fs(29)83
5595 y Fo(cell?)i Fs(29)83 5708 y Fo(char->ascii)d Fs(28)83
5822 y Fo(close-all-but)f Fs(75)1835 1472 y Fo(close-director)o(y-)o
(st)o(re)o(am)g Fs(69)1835 1586 y Fo(close-on-exec?)f
Fs(75)1835 1699 y Fo(close-socket)h Fs(38)1835 1812 y
Fo(compound-inter)o(fa)o(ce)g Fs(21)1835 1925 y Fo(copy-array)h
Fs(30)1835 2039 y Fo(current-column)e Fs(37)1835 2152
y Fo(current-row)i Fs(37)1835 2265 y Fo(current-time)f
Fs(73)1835 2469 y Fo(default-hash-f)o(un)o(ct)o(io)o(n)g
Fs(36)1835 2582 y Fo(define-exporte)o(d-)o(bi)o(nd)o(ing)f
Fs(51)1835 2695 y Fo(define-importe)o(d-)o(bi)o(nd)o(ing)g
Fs(52)1835 2809 y Fo(define-interfa)o(ce)g Fs(20)1835
2922 y Fo(define-record-)o(di)o(sc)o(lo)o(ser)g Fs(33;)24
b(31)1835 3035 y Fo(define-record-)o(re)o(su)o(me)o(r)62
b Fs(59;)24 b(33)1835 3149 y Fo(define-structu)o(re)61
b Fs(18)1835 3262 y Fo(delete-from-qu)o(eu)o(e!)h Fs(29)1835
3375 y Fo(dequeue!)i Fs(29)1835 3489 y Fo(dequeue-signal)o(!)e
Fs(66)1835 3602 y Fo(directory-stre)o(am)o(?)g Fs(69)1835
3715 y Fo(dup)k Fs(74)1835 3829 y Fo(dup-switching-)o(mo)o(de)c
Fs(74)1835 3942 y Fo(dup2)k Fs(74)1835 4055 y Fo(dynamic-load)c
Fs(54)1835 4258 y Fo(enqueue!)i Fs(29)1835 4372 y Fo(environment-al)o
(is)o(t)e Fs(68)1835 4485 y Fo(exact-match?)g Fs(47)1835
4598 y Fo(exec)k Fs(64)1835 4712 y Fo(exec-file)e Fs(64)1835
4825 y Fo(exec-file-with)o(-e)o(nv)o(ir)o(onm)o(en)o(t)e
Fs(64)1835 4938 y Fo(exec-with-alia)o(s)g Fs(64)1835
5052 y Fo(exec-with-envi)o(ro)o(nm)o(en)o(t)g Fs(64)1835
5165 y Fo(exit)k Fs(64)1835 5278 y Fo(external-name)c
Fs(54)1835 5392 y Fo(external-value)f Fs(54)1835 5505
y Fo(external?)j Fs(54)1835 5708 y Fo(fd-port?)g Fs(74)1835
5822 y Fo(file-info-devi)o(ce)d Fs(72)1748 6071 y(81)p
eop
%%Page: 82 88
82 87 bop 166 573 a Fo(file-info-group)61 b Fs(72)166
687 y Fo(file-info-inode)g Fs(72)166 801 y Fo(file-info-last-)o(ac)o
(ce)o(ss)h Fs(72)166 916 y Fo(file-info-last-)o(in)o(fo)o(-c)o(han)o
(ge)f Fs(72)166 1030 y Fo(file-info-last-)o(mo)o(di)o(fi)o(cat)o(io)o
(n)h Fs(72)166 1144 y Fo(file-info-link-)o(co)o(un)o(t)g
Fs(72)166 1259 y Fo(file-info-mode)g Fs(72)166 1373 y
Fo(file-info-name)g Fs(71)166 1487 y Fo(file-info-owner)f
Fs(72)166 1601 y Fo(file-info-size)h Fs(72)166 1716 y
Fo(file-info-type)g Fs(71)166 1830 y Fo(file-info?)i
Fs(71)166 1944 y Fo(file-mode+)g Fs(72)166 2059 y Fo(file-mode-)g
Fs(72)166 2173 y Fo(file-mode->inte)o(ge)o(r)e Fs(73)166
2287 y Fo(file-mode<=?)h Fs(72)166 2401 y Fo(file-mode=?)g
Fs(72)166 2516 y Fo(file-mode>=?)g Fs(72)166 2630 y Fo(file-mode?)h
Fs(72)166 2744 y Fo(file-options-on)o(?)e Fs(70)166 2859
y Fo(file-type-name)g Fs(71)166 2973 y Fo(file-type?)i
Fs(71)166 3087 y Fo(fluid)i Fs(37)166 3201 y Fo(fork)g
Fs(63)166 3316 y Fo(fork-and-forget)61 b Fs(63)166 3430
y Fo(fresh-line)j Fs(37)166 3650 y Fo(get-effective-g)o(ro)o(up)o(-i)o
(d)e Fs(67)166 3764 y Fo(get-effective-u)o(se)o(r-)o(id)g
Fs(67)166 3879 y Fo(get-external)h Fs(54)166 3993 y Fo(get-file-info)f
Fs(71)166 4107 y Fo(get-file/link-i)o(nf)o(o)g Fs(71)166
4222 y Fo(get-group-id)h Fs(67)166 4336 y Fo(get-groups)h
Fs(67)166 4450 y Fo(get-host-name)e Fs(38)166 4564 y
Fo(get-login-name)g Fs(67)166 4679 y Fo(get-parent-proc)o(es)o(s-)o(id)
g Fs(67)166 4793 y Fo(get-port-info)g Fs(71)166 4907
y Fo(get-process-id)g Fs(67)166 5022 y Fo(get-user-id)h
Fs(67)166 5136 y Fo(group-id->group)o(-i)o(nf)o(o)f Fs(68)166
5250 y Fo(group-id->integ)o(er)f Fs(68)166 5364 y Fo(group-id=?)j
Fs(68)166 5479 y Fo(group-id?)g Fs(68)166 5593 y Fo(group-info-id)e
Fs(68)166 5707 y Fo(group-info-memb)o(er)o(s)g Fs(68)166
5822 y Fo(group-info-name)f Fs(68)1918 573 y Fo(group-info?)i
Fs(68)1918 775 y Fo(i/o-flags)h Fs(75)1918 888 y Fo(ignore-case)f
Fs(46)1918 1001 y Fo(integer->file-)o(mo)o(de)f Fs(73)1918
1114 y Fo(integer->group)o(-i)o(d)g Fs(68)1918 1228 y
Fo(integer->proce)o(ss)o(-i)o(d)g Fs(64)1918 1341 y Fo(integer->signa)o
(l)g Fs(65)1918 1454 y Fo(integer->user-)o(id)f Fs(68)1918
1567 y Fo(intersection)h Fs(45)1918 1769 y Fo(let-fluid)i
Fs(37)1918 1883 y Fo(let-fluids)f Fs(37)1918 1996 y Fo(limit-output)f
Fs(36)1918 2109 y Fo(link)k Fs(71)1918 2222 y Fo(list->queue)d
Fs(29)1918 2336 y Fo(list-directory)e Fs(69)1918 2449
y Fo(lookup-all-ext)o(er)o(na)o(ls)h Fs(54)1918 2562
y Fo(lookup-environ)o(me)o(nt)o(-v)o(ari)o(ab)o(le)f
Fs(68)1918 2675 y Fo(lookup-exporte)o(d-)o(bi)o(nd)o(ing)g
Fs(52)1918 2789 y Fo(lookup-externa)o(l)h Fs(54)1918
2902 y Fo(lookup-importe)o(d-)o(bi)o(nd)o(ing)f Fs(52)1918
3104 y Fo(machine-name)h Fs(69)1918 3217 y Fo(make-array)h
Fs(30)1918 3330 y Fo(make-byte-vect)o(or)e Fs(29)1918
3443 y Fo(make-cell)j Fs(29)1918 3557 y Fo(make-directory)d
Fs(71)1918 3670 y Fo(make-fifo)j Fs(71)1918 3783 y Fo(make-fluid)f
Fs(37)1918 3896 y Fo(make-integer-t)o(ab)o(le)f Fs(35)1918
4010 y Fo(make-queue)h Fs(29)1918 4123 y Fo(make-record)g
Fs(32)1918 4236 y Fo(make-record-ty)o(pe)e Fs(33)1918
4349 y Fo(make-regexp)i Fs(75)1918 4463 y Fo(make-shared-ar)o(ra)o(y)f
Fs(30)1918 4576 y Fo(make-signal-qu)o(eu)o(e)g Fs(66)1918
4689 y Fo(make-string-in)o(pu)o(t-)o(po)o(rt)g Fs(36)1918
4802 y Fo(make-string-ou)o(tp)o(ut)o(-p)o(ort)f Fs(36)1918
4916 y Fo(make-string-ta)o(bl)o(e)h Fs(35)1918 5029 y
Fo(make-symbol-ta)o(bl)o(e)g Fs(35)1918 5142 y Fo(make-table)h
Fs(35)1918 5255 y Fo(make-table-imm)o(ut)o(ab)o(le)o(!)f
Fs(35)1918 5369 y Fo(make-table-mak)o(er)f Fs(35)1918
5482 y Fo(make-time)j Fs(73)1918 5595 y Fo(make-tracking-)o(in)o(pu)o
(t-)o(por)o(t)e Fs(36)1918 5708 y Fo(make-tracking-)o(ou)o(tp)o(ut)o
(-po)o(rt)f Fs(37)1918 5822 y Fo(match)k Fs(47)1831 6071
y(82)p eop
%%Page: 83 89
83 88 bop 83 573 a Fo(match-end)64 b Fs(76;)23 b(47)83
686 y Fo(match-start)63 b Fs(76;)24 b(47)83 799 y Fo(match-submatche)o
(s)62 b Fs(47)83 912 y Fo(match?)j Fs(76)83 1024 y Fo(maybe-dequeue-s)o
(ig)o(na)o(l!)d Fs(66)83 1137 y Fo(modify)j Fs(18)83
1329 y Fo(name->group-inf)o(o)d Fs(68)83 1442 y Fo(name->signal)h
Fs(65)83 1555 y Fo(name->user-info)e Fs(68)83 1668 y
Fo(negate)k Fs(45)83 1781 y Fo(no-submatches)d Fs(47)83
1972 y Fo(one-of)j Fs(46)83 2085 y Fo(open-directory-)o(st)o(re)o(am)d
Fs(69)83 2198 y Fo(open-file)i Fs(69)83 2311 y Fo(open-pipe)g
Fs(74)83 2424 y Fo(open-socket)f Fs(38)83 2537 y Fo(os-name)i
Fs(69)83 2650 y Fo(os-node-name)e Fs(69)83 2763 y Fo(os-release-name)e
Fs(69)83 2876 y Fo(os-version-name)g Fs(69)83 3067 y
Fo(port->fd)k Fs(74)83 3180 y Fo(port-is-a-termi)o(na)o(l?)d
Fs(75)83 3293 y Fo(port-terminal-n)o(am)o(e)g Fs(75)83
3406 y Fo(prefix)j Fs(18)83 3519 y Fo(process-id->int)o(eg)o(er)d
Fs(64)83 3632 y Fo(process-id-exit)o(-s)o(ta)o(tu)o(s)g
Fs(64)83 3745 y Fo(process-id-term)o(in)o(at)o(in)o(g-s)o(ig)o(na)o(l)
415 3858 y Fs(64)83 3970 y Fo(process-id=?)h Fs(64)83
4083 y Fo(process-id?)g Fs(64)83 4275 y Fo(queue->list)g
Fs(29)83 4388 y Fo(queue-empty?)g Fs(29)83 4501 y Fo(queue-length)g
Fs(29)83 4614 y Fo(queue?)i Fs(29)83 4805 y Fo(range)h
Fs(45)83 4918 y Fo(ranges)f Fs(45)83 5031 y Fo(read-directory-)o(st)o
(re)o(am)d Fs(69)83 5144 y Fo(record)j Fs(32)83 5257
y Fo(record-accessor)c Fs(33)83 5370 y Fo(record-construc)o(to)o(r)h
Fs(33)83 5483 y Fo(record-length)g Fs(32)83 5596 y Fo(record-modifier)f
Fs(33)83 5709 y Fo(record-predicat)o(e)h Fs(33)83 5822
y Fo(record-ref)i Fs(32)1835 573 y Fo(record-set!)f Fs(32)1835
686 y Fo(record-type)g Fs(32)1835 799 y Fo(record-type-fi)o(el)o(d-)o
(na)o(mes)e Fs(33)1835 912 y Fo(record-type-na)o(me)g
Fs(33)1835 1025 y Fo(record-type?)h Fs(33)1835 1138 y
Fo(record?)j Fs(32)1835 1250 y Fo(regexp-match)d Fs(76)1835
1363 y Fo(regexp?)j Fs(75)1835 1476 y Fo(remap-file-des)o(cr)o(ip)o(to)
o(rs)d Fs(74)1835 1589 y Fo(remove-directo)o(ry)f Fs(71)1835
1702 y Fo(remove-signal-)o(qu)o(eu)o(e-)o(sig)o(na)o(l!)g
Fs(67)1835 1815 y Fo(rename)k Fs(71)1835 1928 y Fo(repeat)g
Fs(46)1835 2124 y Fo(sequence)f Fs(46)1835 2237 y Fo(set)i
Fs(45)1835 2350 y Fo(set-close-on-e)o(xe)o(c?)o(!)c Fs(75)1835
2463 y Fo(set-file-creat)o(io)o(n-)o(ma)o(sk!)f Fs(70)1835
2576 y Fo(set-group-id!)h Fs(67)1835 2689 y Fo(set-i/o-flags!)f
Fs(75)1835 2802 y Fo(set-user-id!)h Fs(67)1835 2915 y
Fo(set-working-di)o(re)o(ct)o(or)o(y!)g Fs(69)1835 3028
y Fo(shared-binding)o(-i)o(s-)o(im)o(por)o(t?)f Fs(52)1835
3141 y Fo(shared-binding)o(-n)o(am)o(e)h Fs(52)1835 3254
y Fo(shared-binding)o(-r)o(ef)g Fs(52)1835 3367 y Fo(shared-binding)o
(-s)o(et)o(!)g Fs(52)1835 3480 y Fo(shared-binding)o(?)g
Fs(52)1835 3592 y Fo(signal-name)h Fs(65)1835 3705 y
Fo(signal-os-numb)o(er)e Fs(65)1835 3818 y Fo(signal-process)g
Fs(66)1835 3931 y Fo(signal-queue-m)o(on)o(it)o(or)o(ed-)o(si)o(gn)o
(al)o(s)2167 4044 y Fs(66)1835 4157 y Fo(signal-queue?)h
Fs(66)1835 4270 y Fo(signal=?)i Fs(65)1835 4383 y Fo(signal?)h
Fs(65)1835 4496 y Fo(socket-accept)d Fs(38)1835 4609
y Fo(socket-client)g Fs(38)1835 4722 y Fo(socket-port-nu)o(mb)o(er)g
Fs(38)1835 4835 y Fo(string-end)h Fs(45)1835 4948 y Fo(string-hash)g
Fs(36)1835 5061 y Fo(string-output-)o(po)o(rt)o(-o)o(utp)o(ut)e
Fs(36)1835 5173 y Fo(string-start)h Fs(45)1835 5286 y
Fo(submatch)i Fs(47)1835 5399 y Fo(subset)h Fs(18)1835
5512 y Fo(subtract)f Fs(45)1835 5709 y Fo(table-ref)g
Fs(36)1835 5822 y Fo(table-set!)f Fs(36)1748 6071 y(83)p
eop
%%Page: 84 90
84 89 bop 166 573 a Fo(table-walk)64 b Fs(36)166 686
y Fo(table?)h Fs(36)166 799 y Fo(text)h Fs(46)166 912
y Fo(time->string)d Fs(74)166 1024 y Fo(time-seconds)g
Fs(73)166 1137 y Fo(time<=?)i Fs(73)166 1250 y Fo(time<?)g
Fs(73)166 1363 y Fo(time=?)g Fs(73)166 1476 y Fo(time>=?)g
Fs(73)166 1589 y Fo(time>?)g Fs(73)166 1702 y Fo(time?)h
Fs(73)166 1898 y Fo(undefine-export)o(ed)o(-b)o(in)o(din)o(g)c
Fs(52)166 2011 y Fo(undefine-import)o(ed)o(-b)o(in)o(din)o(g)g
Fs(52)166 2124 y Fo(union)k Fs(45)166 2237 y Fo(unlink)f
Fs(71)166 2350 y Fo(use-case)g Fs(46)166 2462 y Fo(user-id->intege)o(r)
d Fs(68)166 2575 y Fo(user-id->user-i)o(nf)o(o)g Fs(68)166
2688 y Fo(user-id=?)i Fs(68)166 2801 y Fo(user-id?)h
Fs(68)166 2914 y Fo(user-info-group)c Fs(68)166 3027
y Fo(user-info-home-)o(di)o(re)o(ct)o(ory)g Fs(68)166
3140 y Fo(user-info-id)i Fs(68)166 3253 y Fo(user-info-name)f
Fs(68)166 3366 y Fo(user-info-shell)f Fs(68)166 3479
y Fo(user-info?)j Fs(68)166 3675 y Fo(wait-for-child-)o(pr)o(oc)o(es)o
(s)e Fs(64)166 3787 y Fo(working-directo)o(ry)f Fs(69)1831
6071 y(84)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- HTML file produced from file: manual.tex --
 -- using Hyperlatex v 2.3.1 (c) Otfried Cheong--
 -- on Emacs 20.4.1, Tue Mar 20 05:57:22 2001 -->
<HEAD>
<TITLE>Scheme 48 Manual -- Finite record types</TITLE>

</HEAD><BODY BGCOLOR="#ffffff">
<EM>Scheme 48 Manual</EM> | <A HREF="s48manual.html#top_node">Contents</A> | In Chapter: <A HREF="s48manual_35.html">Libraries</A><BR>Previous: <A HREF="s48manual_41.html">Records</A> | Next: <A HREF="s48manual_43.html">Hash tables</A>
<H2>Finite record types</H2>
<P>The structure <CODE>finite-types</CODE> has
 two macros for defining `finite' record types.
These are record types for which there are a fixed number of instances,
 all of which are created at the same time as the record type itself.
The syntax for the defining a finite type is:
<BLOCKQUOTE><PRE>
(define-finite-type <CODE><I>tag</I></CODE> <CODE><I>type-name</I></CODE>
  (<CODE><I>field-tag</I></CODE> ...)
  <CODE><I>predicate-name</I></CODE>
  <CODE><I>vector-of-elements-name</I></CODE>
  <CODE><I>name-accessor</I></CODE>
  <CODE><I>index-accessor</I></CODE>
  (<CODE><I>field-tag</I></CODE> <CODE><I>accessor-name</I></CODE> [<CODE><I>modifier-name</I></CODE>])
  ...
  ((<CODE><I>element-name</I></CODE> <CODE><I>field-value</I></CODE> ...)
   ...))
</PRE></BLOCKQUOTE>
This differs from <CODE>define-record-type</CODE> in the following ways:
<UL><LI>No name is specified for the constructor, but the field arguments
 to the constructor are listed.
<LI>The <CODE><I>vector-of-elements-name</I></CODE> is added; it will be bound
 to a vector containing all of the elements of the type.
These are constructed by applying the (unnamed) constructor to the
 initial field values at the end of the form.
<LI>There are names for accessors for two required fields, name
 and index.
These fields are not settable, and are not to be included
 in the argument list for the constructor.
<LI>The form ends with the names and the initial field values for
 the elements of the type.
The name must be first.
The remaining values must match the <CODE><I>field-tag</I></CODE>s in the constructor's
 argument list.
<LI><CODE><I>Tag</I></CODE> is bound to a macro that maps <CODE><I>element-name</I></CODE>s to the
 the corresponding element of the vector.
The name lookup is done at macro-expansion time.
</UL>
<BLOCKQUOTE><PRE>
(define-finite-type color :color
  (red green blue)
  color?
  colors
  color-name
  color-index
  (red   color-red)
  (green color-green)
  (blue  color-blue)
  ((black    0   0   0)
   (white  255 255 255)
   (purple 160  32 240)
   (maroon 176  48  96)))

(color-name (color black))         <CODE>-&gt;</CODE> black
(color-name (vector-ref colors 1)) <CODE>-&gt;</CODE> white
(color-index (color purple))       <CODE>-&gt;</CODE> 2
(color-red (color maroon))         <CODE>-&gt;</CODE> 176
</PRE></BLOCKQUOTE>
<P>Enumerated types are finite types whose only fields are the name
 and the index.
The syntax for defining an enumerated type is:
<BLOCKQUOTE><PRE>
(define-enumerated-type <CODE><I>tag</I></CODE> <CODE><I>type-name</I></CODE>
  <CODE><I>predicate-name</I></CODE>
  <CODE><I>vector-of-elements-name</I></CODE>
  <CODE><I>name-accessor</I></CODE>
  <CODE><I>index-accessor</I></CODE>
  (<CODE><I>element-name</I></CODE> ...))
</PRE></BLOCKQUOTE>
In the absence of any additional fields, both the constructor argument
 list and the initial field values are not required.
<P>The above example of a finite type can be pared down to the following
 enumerated type:
<BLOCKQUOTE><PRE>
(define-enumerated-type color :color
  color?
  colors
  color-name
  color-index
  (black white purple maroon))

(color-name (vector-ref colors 0)) <CODE>-&gt;</CODE> black
(color-name (color white))         <CODE>-&gt;</CODE> white
(color-index (color purple))       <CODE>-&gt;</CODE> 2
</PRE></BLOCKQUOTE>
<P>
  
Previous: <A HREF="s48manual_41.html">Records</A> | Next: <A HREF="s48manual_43.html">Hash tables</A></BODY></HTML>
